<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Vendedor - E2E SHOP</title>
    <meta name="description" content="Painel de controle para vendedores da E2E SHOP">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f97316">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Modal Styles -->
    <style>
        /* Sistema de Modais Moderno */
        .modal-overlay {
            @apply fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 cursor-pointer;
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-content {
            @apply bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden cursor-default;
            animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.05);
        }
        
        .modal-header {
            @apply p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white;
            position: relative;
        }
        
        .modal-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #06b6d4);
            border-radius: 3px 3px 0 0;
        }
        
        .modal-title {
            @apply text-2xl font-bold text-gray-900;
            background: linear-gradient(135deg, #1f2937, #374151);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .modal-close-btn {
            @apply w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200;
            color: #6b7280;
        }
        
        .modal-close-btn:hover {
            @apply bg-red-100 text-red-600;
            transform: scale(1.1);
        }
        
        
        .modal-body {
            @apply p-6;
        }
        
        .modal-footer {
            @apply p-6 border-t border-gray-100 bg-gray-50;
        }
        
        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Botões Modernos */
        .btn-primary {
            @apply bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl;
        }
        
        .btn-secondary {
            @apply bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold transition-all duration-200;
        }
        
        .btn-danger {
            @apply bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl;
        }
        
        .btn-success {
            @apply bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl;
        }
        
        /* Inputs Modernos */
        .input-modern {
            @apply w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .input-modern:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        /* Tabelas Modernas */
        .table-modern {
            @apply w-full bg-white rounded-xl overflow-hidden shadow-sm;
        }
        
        .table-modern th {
            @apply px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50;
        }
        
        .table-modern td {
            @apply px-6 py-4 whitespace-nowrap text-sm text-gray-900;
        }
        
        .table-modern tr:hover {
            @apply bg-gray-50;
        }
        
        /* Cards de Produto Modernos */
        .product-card {
            @apply bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200;
        }
        
        .product-image {
            @apply w-12 h-12 rounded-lg overflow-hidden bg-gray-100;
        }
        
        /* Badges Modernos */
        .badge-modern {
            @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
        }
        
        .badge-blue {
            @apply bg-blue-100 text-blue-800;
        }
        
        .badge-green {
            @apply bg-green-100 text-green-800;
        }
        
        .badge-red {
            @apply bg-red-100 text-red-800;
        }
        
        .badge-yellow {
            @apply bg-yellow-100 text-yellow-800;
        }
        
        /* Animações para modais */
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .animate-slideIn {
            animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* CSS simples para manter qualidade original */
        #header-avatar, #profile-photo-preview {
            object-fit: cover;
            object-position: center;
        }
        
        /* Avatar do header */
        #header-avatar {
            width: 64px;
            height: 64px;
        }
        
        /* Foto do perfil */
        #profile-photo-preview {
            width: 128px;
            height: 128px;
        }
        
        /* Container da foto com qualidade */
        .photo-container {
            position: relative;
            width: 128px;
            height: 128px;
            border-radius: 50%;
            overflow: hidden;
            background: linear-gradient(135deg, #f97316, #ea580c);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Container do avatar com qualidade */
        .avatar-container {
            position: relative;
            overflow: hidden;
            border-radius: 50%;
            background: linear-gradient(135deg, #f97316, #ea580c);
        }
        
        /* Botões de foto de perfil - agora fora do círculo */
        .photo-action-btn {
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .photo-action-btn:hover {
            transform: translateY(-1px);
        }
        
        /* Hover effects para inputs */
        .input-modern:hover {
            @apply border-blue-300 shadow-md;
        }
        
        .input-modern:focus {
            @apply border-blue-500 shadow-lg;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#f97316',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12',
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'bounce-gentle': 'bounceGentle 2s infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceGentle: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/style.css?v=6.0">
    <link rel="stylesheet" href="assets/css/ecommerce.css?v=1.0">
</head>
<body class="bg-gray-50">
    <!-- Header Moderno -->
    <header class="bg-white shadow-xl border-b border-gray-100 sticky top-0 z-50 backdrop-blur-md bg-white/95">
        <!-- Top Bar -->
        <div class="bg-gradient-to-r from-primary-600 via-primary-700 to-primary-800 text-white py-3">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <span class="text-sm font-medium flex items-center space-x-2 animate-pulse-slow">
                            <i class="fas fa-store text-primary-200"></i>
                            <span>Painel do Vendedor - E2E SHOP</span>
                        </span>
                    </div>
                    <div class="flex items-center space-x-6">
                        <a href="tel:+5511999999999" class="text-sm hover:text-primary-200 transition-all duration-300 flex items-center space-x-2 hover:scale-105">
                            <i class="fas fa-phone"></i>
                            <span>(11) 99999-9999</span>
                        </a>
                        <a href="mailto:contato@e2eshop.com" class="text-sm hover:text-primary-200 transition-all duration-300 flex items-center space-x-2 hover:scale-105">
                            <i class="fas fa-envelope"></i>
                            <span>contato@e2eshop.com</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Header -->
        <div class="bg-white py-4 border-b border-gray-100">
            <div class="container mx-auto px-4">
                <div class="flex items-center justify-between">
                    <!-- Logo -->
                    <div class="flex items-center space-x-3">
                        <a href="index.html" class="flex items-center space-x-3 group">
                            <img src="assets/images/logo/header/logo-dark.png" 
                                 alt="E2E Shop Logo" 
                                 class="header-logo h-12 w-auto transition-all duration-300 group-hover:scale-105"
                                 data-context="header">
                        </a>
                    </div>
            
                    <!-- Header Actions -->
                    <div class="flex items-center space-x-4">
                        <!-- Notificações -->
                        <div class="relative">
                            <button class="p-3 text-gray-600 hover:text-primary-600 transition-all duration-300 hover:scale-110">
                                <i class="fas fa-bell text-xl"></i>
                                <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">2</span>
                            </button>
                        </div>
                        
                        <!-- Usuário -->
                        <div class="flex items-center space-x-4">
                            <div class="w-16 h-16 rounded-full overflow-hidden border-3 border-primary-300 shadow-xl bg-primary-500 flex items-center justify-center">
                                <img id="header-avatar" src="" alt="Avatar" 
                                     class="w-full h-full object-cover hidden">
                                <i id="header-avatar-icon" class="fas fa-user text-white text-xl"></i>
                            </div>
                            <div class="flex flex-col">
                                <span class="text-sm font-semibold text-gray-900" id="vendor-name">Carregando...</span>
                                <span class="text-xs text-gray-500">Vendedor</span>
                            </div>
                        </div>
                        
                        <!-- Logout -->
                        <button onclick="openLogoutModal()" class="px-4 py-2 text-gray-600 hover:text-red-600 transition-colors duration-300 font-medium">
                            <i class="fas fa-sign-out-alt mr-2"></i>
                            Sair
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-8 bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 min-h-screen">
        <div class="container mx-auto px-4">
            <!-- Welcome Section - Redesenhada -->
            <div class="mb-12">
                <div class="bg-gradient-to-r from-primary-600 via-primary-700 to-primary-800 rounded-3xl p-8 text-white relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-32 translate-x-32"></div>
                        <div class="absolute bottom-0 left-0 w-48 h-48 bg-white rounded-full translate-y-24 -translate-x-24"></div>
                    </div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-4xl font-bold mb-3 flex items-center">
                                    <i class="fas fa-chart-line mr-4 text-primary-200"></i>
                                    Painel de Vendas Inteligente
                                </h1>
                                <p class="text-xl text-primary-100 mb-4">Gerencie seus produtos e maximize suas vendas com IA</p>
                                
                                <!-- Status Cards -->
                                <div class="flex flex-wrap gap-4">
                                    <div class="bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 flex items-center">
                                        <i class="fas fa-clock mr-2"></i>
                                        <span class="text-sm">Última atualização: <span id="last-update">Agora</span></span>
                                    </div>
                                    <div class="bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 flex items-center">
                                        <i class="fas fa-shield-alt mr-2"></i>
                                        <span class="text-sm">Sistema Seguro</span>
                                    </div>
                                    <div class="bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 flex items-center">
                                        <i class="fas fa-sync-alt mr-2"></i>
                                        <span class="text-sm">Sincronização Ativa</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quick Stats -->
                            <div class="text-right">
                                <div class="text-3xl font-bold mb-1" id="welcome-sales">R$ 0,00</div>
                                <div class="text-primary-200 text-sm">Vendas Hoje</div>
                                <div class="flex items-center mt-2 text-green-300">
                                    <i class="fas fa-arrow-up mr-1"></i>
                                    <span class="text-sm">+12% vs ontem</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Demo Profile Notice (only for demo users) -->
                <div id="demo-notice" class="mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6 shadow-lg" style="display: none;">
                    <div class="flex items-start space-x-4">
                        <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-info-circle text-white text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-blue-800 mb-2 text-lg">Perfil de Demonstração</h3>
                            <p class="text-blue-700 mb-3">
                                Este é um perfil de demonstração com dados simulados. Alterações feitas não serão salvas permanentemente.
                            </p>
                            <div class="flex items-center text-sm text-blue-600">
                                <i class="fas fa-lightbulb mr-2"></i>
                                <span>Use este perfil para explorar todas as funcionalidades do sistema</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Cards - Redesenhados -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <!-- Vendas do Mês -->
                <div class="group bg-gradient-to-br from-white to-gray-50 rounded-3xl shadow-xl border border-gray-100 p-8 hover:shadow-2xl hover:scale-105 transition-all duration-500 relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full -translate-y-16 translate-x-16 opacity-10 group-hover:opacity-20 transition-opacity duration-500"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-chart-line text-white text-2xl"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-3xl font-bold text-gray-900 mb-1" id="monthly-sales">R$ 0,00</div>
                                <div class="text-sm text-gray-600">Vendas do Mês</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-green-600">
                                <i class="fas fa-arrow-up mr-2"></i>
                                <span class="font-semibold">+18%</span>
                            </div>
                            <div class="text-sm text-gray-500">vs mês anterior</div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mt-4 w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-1000" style="width: 75%"></div>
                        </div>
                    </div>
                </div>

                <!-- Produtos Vendidos -->
                <div class="group bg-gradient-to-br from-white to-blue-50 rounded-3xl shadow-xl border border-gray-100 p-8 hover:shadow-2xl hover:scale-105 transition-all duration-500 relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full -translate-y-16 translate-x-16 opacity-10 group-hover:opacity-20 transition-opacity duration-500"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-box text-white text-2xl"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-3xl font-bold text-gray-900 mb-1" id="products-sold">0</div>
                                <div class="text-sm text-gray-600">Produtos Vendidos</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-blue-600">
                                <i class="fas fa-arrow-up mr-2"></i>
                                <span class="font-semibold">+12%</span>
                            </div>
                            <div class="text-sm text-gray-500">vs mês anterior</div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mt-4 w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-1000" style="width: 60%"></div>
                        </div>
                    </div>
                </div>

                <!-- Comissão -->
                <div class="group bg-gradient-to-br from-white to-purple-50 rounded-3xl shadow-xl border border-gray-100 p-8 hover:shadow-2xl hover:scale-105 transition-all duration-500 relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full -translate-y-16 translate-x-16 opacity-10 group-hover:opacity-20 transition-opacity duration-500"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-coins text-white text-2xl"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-3xl font-bold text-gray-900 mb-1" id="commission">R$ 0,00</div>
                                <div class="text-sm text-gray-600">Comissão</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-purple-600">
                                <i class="fas fa-arrow-up mr-2"></i>
                                <span class="font-semibold">+8%</span>
                            </div>
                            <div class="text-sm text-gray-500">vs mês anterior</div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mt-4 w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-1000" style="width: 45%"></div>
                        </div>
                    </div>
                </div>

                <!-- Avaliação -->
                <div class="group bg-gradient-to-br from-white to-orange-50 rounded-3xl shadow-xl border border-gray-100 p-8 hover:shadow-2xl hover:scale-105 transition-all duration-500 relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full -translate-y-16 translate-x-16 opacity-10 group-hover:opacity-20 transition-opacity duration-500"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-star text-white text-2xl"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-3xl font-bold text-gray-900 mb-1" id="rating">4.8</div>
                                <div class="text-sm text-gray-600">Avaliação</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center text-orange-600">
                                <i class="fas fa-star mr-2"></i>
                                <span class="font-semibold">127</span>
                            </div>
                            <div class="text-sm text-gray-500">avaliações</div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mt-4 w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-1000" style="width: 96%"></div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Main Dashboard Content -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column -->
                <div class="lg:col-span-2 space-y-8 flex flex-col">
                    <!-- Meus Produtos - Redesenhado -->
                    <div class="bg-gradient-to-br from-white to-gray-50 rounded-3xl shadow-2xl border border-gray-100 overflow-hidden relative">
                        <!-- Header com gradiente tecnológico -->
                        <div class="bg-gradient-to-r from-primary-600 via-primary-700 to-primary-800 p-8 relative overflow-hidden">
                            <!-- Background Pattern -->
                            <div class="absolute inset-0 opacity-10">
                                <div class="absolute top-0 right-0 w-48 h-48 bg-white rounded-full -translate-y-24 translate-x-24"></div>
                                <div class="absolute bottom-0 left-0 w-32 h-32 bg-white rounded-full translate-y-16 -translate-x-16"></div>
                            </div>
                            
                            <div class="relative z-10">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
                                            <i class="fas fa-box text-white text-2xl"></i>
                                        </div>
                                        <div>
                                            <h2 class="text-3xl font-bold text-white mb-2">Meus Produtos</h2>
                                            <p class="text-primary-100 text-lg">Gerencie seu catálogo com inteligência artificial</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Action Buttons (removidos a pedido) -->
                                    <div class="flex items-center space-x-3"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Tabela Compacta -->
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table class="w-full min-w-full">
                                    <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                                        <tr>
                                            <th class="px-4 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider w-2/5">
                                                <div class="flex items-center space-x-1">
                                                    <i class="fas fa-image text-primary-500 text-sm"></i>
                                                    <span>Produto</span>
                                                </div>
                                            </th>
                                            <th class="px-3 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider w-1/6">
                                                <div class="flex items-center space-x-1">
                                                    <i class="fas fa-tag text-primary-500 text-sm"></i>
                                                    <span>Preço</span>
                                                </div>
                                            </th>
                                            <th class="px-3 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider w-1/6">
                                                <div class="flex items-center space-x-1">
                                                    <i class="fas fa-warehouse text-primary-500 text-sm"></i>
                                                    <span>Estoque</span>
                                                </div>
                                            </th>
                                            <th class="px-3 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider w-1/6">
                                                <div class="flex items-center space-x-1">
                                                    <i class="fas fa-chart-bar text-primary-500 text-sm"></i>
                                                    <span>Vendas</span>
                                                </div>
                                            </th>
                                            <th class="px-3 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider w-1/6">
                                                <div class="flex items-center justify-center space-x-1">
                                                    <i class="fas fa-cog text-primary-500 text-sm"></i>
                                                    <span>Ações</span>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-100" id="my-products-table">
                                        <!-- Produtos serão carregados via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação Compacta -->
                            <div id="my-products-pagination" class="mt-6 px-6 pb-6">
                                <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4">
                                    <div class="flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0">
                                        <div id="my-products-pagination-info" class="text-sm text-gray-600 flex items-center">
                                            <i class="fas fa-info-circle mr-2 text-primary-500"></i>
                                            <!-- Informações de paginação serão inseridas aqui -->
                                        </div>
                                        
                                        <div id="my-products-pagination-controls" class="flex items-center space-x-2">
                                            <!-- Controles de paginação serão inseridos aqui -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Analytics - Interface Otimizada -->
                    <div class="bg-gradient-to-br from-white to-blue-50 rounded-3xl shadow-2xl border border-gray-100 p-8 relative overflow-hidden">
                        <!-- Background Pattern Suave -->
                        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full -translate-y-16 translate-x-16 opacity-10"></div>
                        
                        <div class="relative z-10">
                            <!-- Header Melhorado -->
                            <div class="flex items-center justify-between mb-10">
                                <div class="flex items-center space-x-4">
                                    <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-chart-line text-white text-2xl"></i>
                                    </div>
                                    <div>
                                        <h2 class="text-3xl font-bold text-gray-900 mb-2">Performance Analytics</h2>
                                        <p class="text-gray-600 text-lg">Análise inteligente de performance</p>
                                    </div>
                                </div>
                                
                                <!-- Status Cards -->
                                <div class="flex items-center space-x-4">
                                    <div class="bg-green-100 rounded-xl px-4 py-2 flex items-center">
                                        <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-green-700 text-sm font-medium">Sistema Ativo</span>
                                    </div>
                                    <div class="bg-blue-100 rounded-xl px-4 py-2 flex items-center">
                                        <i class="fas fa-sync-alt text-blue-600 mr-2"></i>
                                        <span class="text-blue-700 text-sm font-medium">Tempo Real</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- KPIs com Melhor Espaçamento -->
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-10">
                                <!-- Vendas do Mês -->
                                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-8 border border-blue-200 hover:shadow-lg transition-all duration-300">
                                    <div class="flex flex-col items-center text-center">
                                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mb-4">
                                            <i class="fas fa-chart-line text-white text-xl"></i>
                                        </div>
                                        <div class="text-3xl font-bold text-blue-600 mb-2" id="monthly-sales">R$ 0,00</div>
                                        <div class="text-sm text-blue-500 mb-4">Vendas do Mês</div>
                                        <div class="w-full bg-blue-200 rounded-full h-3 mb-2">
                                            <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-1000" id="monthly-sales-bar" style="width: 0%"></div>
                                        </div>
                                        <div class="text-xs text-blue-600 font-medium" id="monthly-sales-status">Meta: R$ 30.000</div>
                                    </div>
                                </div>

                                <!-- Produtos Vendidos -->
                                <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-8 border border-green-200 hover:shadow-lg transition-all duration-300">
                                    <div class="flex flex-col items-center text-center">
                                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mb-4">
                                            <i class="fas fa-box text-white text-xl"></i>
                                        </div>
                                        <div class="text-3xl font-bold text-green-600 mb-2" id="products-sold">0</div>
                                        <div class="text-sm text-green-500 mb-4">Produtos Vendidos</div>
                                        <div class="w-full bg-green-200 rounded-full h-3 mb-2">
                                            <div class="bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full transition-all duration-1000" id="products-sold-bar" style="width: 0%"></div>
                                        </div>
                                        <div class="text-xs text-green-600 font-medium" id="products-sold-status">Total: 30 produtos</div>
                                    </div>
                                </div>

                                <!-- Comissão -->
                                <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-8 border border-purple-200 hover:shadow-lg transition-all duration-300">
                                    <div class="flex flex-col items-center text-center">
                                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4">
                                            <i class="fas fa-coins text-white text-xl"></i>
                                        </div>
                                        <div class="text-3xl font-bold text-purple-600 mb-2" id="commission">R$ 0,00</div>
                                        <div class="text-sm text-purple-500 mb-4">Comissão</div>
                                        <div class="w-full bg-purple-200 rounded-full h-3 mb-2">
                                            <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-1000" id="commission-bar" style="width: 0%"></div>
                                        </div>
                                        <div class="text-xs text-purple-600 font-medium" id="commission-status">Taxa: 5%</div>
                                    </div>
                                </div>

                                <!-- Avaliação -->
                                <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-2xl p-8 border border-yellow-200 hover:shadow-lg transition-all duration-300">
                                    <div class="flex flex-col items-center text-center">
                                        <div class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl flex items-center justify-center mb-4">
                                            <i class="fas fa-star text-white text-xl"></i>
                                        </div>
                                        <div class="text-3xl font-bold text-yellow-600 mb-2" id="rating">0,0</div>
                                        <div class="text-sm text-yellow-500 mb-4">Avaliação</div>
                                        <div class="w-full bg-yellow-200 rounded-full h-3 mb-2">
                                            <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 h-3 rounded-full transition-all duration-1000" id="rating-bar" style="width: 0%"></div>
                                        </div>
                                        <div class="text-xs text-yellow-600 font-medium" id="rating-status">Meta: 4.5+</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Seção de Insights Melhorada -->
                            <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 border border-gray-200 mb-8">
                                <div class="flex items-center space-x-3 mb-6">
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-robot text-white text-lg"></i>
                                    </div>
                                    <h3 class="text-2xl font-bold text-gray-900">Insights Inteligentes</h3>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm">
                                        <div class="flex items-center space-x-3 mb-3">
                                            <i class="fas fa-lightbulb text-yellow-500 text-lg"></i>
                                            <span class="text-lg font-semibold text-gray-900">Recomendação</span>
                                        </div>
                                        <p class="text-gray-600">Foque em produtos com maior margem de lucro para aumentar sua receita mensal.</p>
                                    </div>
                                    <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm">
                                        <div class="flex items-center space-x-3 mb-3">
                                            <i class="fas fa-trending-up text-green-500 text-lg"></i>
                                            <span class="text-lg font-semibold text-gray-900">Tendência</span>
                                        </div>
                                        <p class="text-gray-600">Vendas de eletrônicos estão em alta. Considere expandir este segmento.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gráfico de Performance Melhorado -->
                            <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 border border-gray-200">
                                <div class="flex items-center justify-between mb-6">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center">
                                            <i class="fas fa-chart-area text-white text-lg"></i>
                                        </div>
                                        <h3 class="text-2xl font-bold text-gray-900">Performance dos Produtos</h3>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <span class="text-blue-600 text-sm font-medium">Vendas Mensais</span>
                                    </div>
                                </div>
                                
                                <!-- Gráfico Melhorado -->
                                <div class="h-40 bg-white rounded-xl p-6 border border-gray-200 flex items-end space-x-2">
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 20%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 35%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 50%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 25%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 60%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 40%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 70%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 45%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 55%"></div>
                                    <div class="flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t" style="height: 30%"></div>
                                </div>
                                
                                <div class="flex justify-between text-sm text-gray-500 mt-4">
                                    <span>Jan</span>
                                    <span>Fev</span>
                                    <span>Mar</span>
                                    <span>Abr</span>
                                    <span>Mai</span>
                                    <span>Jun</span>
                                    <span>Jul</span>
                                    <span>Ago</span>
                                    <span>Set</span>
                                    <span>Out</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Right Column - Sidebar Tecnológica -->
                <div class="space-y-8 flex flex-col">
                    <!-- Quick Actions - Redesenhada -->
                    <div class="bg-gradient-to-br from-white to-indigo-50 rounded-3xl shadow-2xl border border-gray-100 p-8 relative overflow-hidden min-h-[400px]">
                        <!-- Background Pattern -->
                        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-full -translate-y-16 translate-x-16 opacity-10"></div>
                        
                        <div class="relative z-10">
                            <div class="flex items-center space-x-3 mb-8">
                                <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl flex items-center justify-center">
                                    <i class="fas fa-bolt text-white text-xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-gray-900">Ações Rápidas</h2>
                                    <p class="text-sm text-gray-600">Acesso direto às funcionalidades</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4 flex-1 flex flex-col justify-center">
                                <!-- Gerenciador de Estoque -->
                                <button onclick="openStockManagement()" class="w-full group bg-gradient-to-r from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 rounded-2xl p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg border border-purple-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                                            <i class="fas fa-warehouse text-white text-xl"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <p class="font-bold text-gray-900 text-lg">Gerenciador de Estoque</p>
                                            <p class="text-sm text-gray-600">Controlar estoque dos produtos</p>
                                            <div class="flex items-center mt-2 text-purple-600 text-sm">
                                                <i class="fas fa-arrow-right mr-2"></i>
                                                <span>Acessar</span>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                                
                                <!-- Gerenciar Produtos (Inativo) -->
                                <button onclick="showComingSoon('Gerenciar Produtos')" class="w-full group bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 transition-all duration-300 opacity-60 cursor-not-allowed border border-gray-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-14 h-14 bg-gradient-to-br from-gray-400 to-gray-500 rounded-2xl flex items-center justify-center shadow-lg">
                                            <i class="fas fa-box text-white text-xl"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <p class="font-bold text-gray-900 text-lg">Gerenciar Produtos</p>
                                            <p class="text-sm text-gray-600">Adicionar e editar produtos</p>
                                            <div class="flex items-center mt-2 text-orange-500 text-sm">
                                                <i class="fas fa-clock mr-2"></i>
                                                <span>Em breve</span>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                                
                                <!-- Relatório de Vendas -->
                                <button onclick="openSalesReport()" class="w-full group bg-gradient-to-r from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 rounded-2xl p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg border border-green-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                                            <i class="fas fa-chart-bar text-white text-xl"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <p class="font-bold text-gray-900 text-lg">Relatório de Vendas</p>
                                            <p class="text-sm text-gray-600">Analisar performance</p>
                                            <div class="flex items-center mt-2 text-green-600 text-sm">
                                                <i class="fas fa-arrow-right mr-2"></i>
                                                <span>Acessar</span>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                                
                                <!-- Meu Perfil -->
                                <button onclick="openProfile()" class="w-full group bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 rounded-2xl p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg border border-blue-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                                            <i class="fas fa-user text-white text-xl"></i>
                                        </div>
                                        <div class="flex-1 text-left">
                                            <p class="font-bold text-gray-900 text-lg">Meu Perfil</p>
                                            <p class="text-sm text-gray-600">Configurações da conta</p>
                                            <div class="flex items-center mt-2 text-blue-600 text-sm">
                                                <i class="fas fa-arrow-right mr-2"></i>
                                                <span>Acessar</span>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Resumo do Dia (ocultado para evitar duplicidade com Performance Analytics) -->
                    <div style="display:none" class="bg-gradient-to-br from-white to-cyan-50 rounded-3xl shadow-2xl border border-gray-100 p-6 relative overflow-hidden">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-calendar-day text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">Resumo do Dia</h3>
                                <p class="text-sm text-gray-600">KPIs do período de hoje</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-3" id="today-kpis">
                            <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-9 h-9 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-dollar-sign"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500">Total vendido</p>
                                        <p class="font-semibold text-gray-900" id="kpi-today-total">R$ 0,00</p>
                                    </div>
                                </div>
                                <span class="text-xs text-emerald-700 font-medium" id="kpi-today-orders">0 pedidos</span>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-9 h-9 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-receipt"></i>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500">Ticket médio</p>
                                        <p class="font-semibold text-gray-900" id="kpi-today-avg">R$ 0,00</p>
                                    </div>
                                </div>
                                <span class="text-xs text-indigo-700 font-medium" id="kpi-today-items">0 itens</span>
                            </div>
                        </div>
                    </div>

                    <!-- Nova Seção: Alertas de Estoque -->
                    <div class="bg-gradient-to-br from-white to-red-50 rounded-3xl shadow-2xl border border-gray-100 p-6 relative overflow-hidden">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-bell text-white"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-xl font-bold text-gray-900">Alertas de Estoque</h3>
                                <p class="text-sm text-gray-600">Produtos com estoque baixo</p>
                            </div>
                            <button onclick="openStockManagement()" class="text-sm text-red-600 hover:text-red-700 font-medium">Gerenciar</button>
                        </div>
                        <div id="low-stock-list" class="space-y-3">
                            <!-- itens via JS -->
                        </div>
                    </div>

                    <!-- Vendas do Dia removida a pedido -->
                    <div style="display:none"></div>

                    <!-- Ranking - Mais Vendidos (Top 5) -->
                    <div class="bg-gradient-to-br from-white to-amber-50 rounded-3xl shadow-2xl border border-gray-100 p-6 relative overflow-hidden">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-trophy text-white"></i>
                                </div>
                                <div>
                                <h3 class="text-xl font-bold text-gray-900">Mais Vendidos</h3>
                                <p class="text-sm text-gray-600">Top 5 por receita</p>
                                </div>
                        </div>
                        <div id="top-products" class="space-y-3"></div>
                            </div>
                            
                    <!-- Previsão de Vendas (Forecast) removida a pedido -->
                    <div style="display:none"></div>
                            
                    <!-- Conversão por Categoria (removida a pedido) -->
                    <div style="display:none" class="bg-gradient-to-br from-white to-sky-50 rounded-3xl shadow-2xl border border-gray-100 p-6 relative overflow-hidden">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-10 h-10 bg-gradient-to-br from-sky-500 to-sky-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-percentage text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-900">Conversão por Categoria</h3>
                                <p class="text-sm text-gray-600">Taxa de conversão estimada</p>
                        </div>
                        </div>
                        <div id="category-conversion" class="space-y-3"></div>
                    </div>

            <!-- Modal Conversão por Categoria -->
            <div id="category-conversion-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50" style="display:none !important;">
                <div class="max-w-lg mx-auto mt-24 bg-white rounded-2xl shadow-2xl overflow-hidden">
                    <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                        <h3 id="category-conversion-title" class="text-lg font-bold text-gray-900">Conversão</h3>
                        <button onclick="closeCategoryConversionModal()" class="w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="category-conversion-body" class="max-h-96 overflow-y-auto">
                        <!-- rows via JS -->
                    </div>
                    <div class="p-4 border-t border-gray-100 text-right">
                        <button onclick="closeCategoryConversionModal()" class="px-4 py-2 rounded-lg bg-primary-500 text-white hover:bg-primary-600">Fechar</button>
                    </div>
                </div>
            </div>


                    <!-- Vendas Recentes - Redesenhada (removido a pedido) -->
                    <div style="display:none">
                        <!-- Header com gradiente verde -->
                        <div class="bg-gradient-to-r from-green-600 via-green-700 to-green-800 p-8 relative overflow-hidden">
                            <!-- Background Pattern -->
                            <div class="absolute inset-0 opacity-10">
                                <div class="absolute top-0 right-0 w-40 h-40 bg-white rounded-full -translate-y-20 translate-x-20"></div>
                                <div class="absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-12 -translate-x-12"></div>
                            </div>
                            
                            <div class="relative z-10">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center">
                                            <i class="fas fa-shopping-cart text-white text-2xl"></i>
                                        </div>
                                        <div>
                                            <h2 class="text-3xl font-bold text-white mb-2">Vendas Recentes</h2>
                                            <p class="text-green-100 text-lg">Acompanhe suas transações em tempo real</p>
                                        </div>
                                    </div>
                                    
                                    <button class="bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 flex items-center">
                                        <i class="fas fa-external-link-alt mr-2"></i>
                                        Ver todas
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div><div id="recent-sales"></div></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Product Management Modal -->
    <div id="product-management-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Gestão de Produtos</h3>
                            <p class="text-sm text-gray-500">Gerencie todos os seus produtos</p>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="openAddProductModal()" 
                                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg">
                                <i class="fas fa-plus mr-2"></i>Adicionar Produto
                            </button>
                            <button onclick="closeProductManagementModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- Filtros e Busca -->
                    <div class="mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Buscar por nome</label>
                                <input type="text" id="product-search" placeholder="Digite o nome do produto..." 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Filtrar por categoria</label>
                                <select id="category-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todas as categorias</option>
                                    <option value="smartphones">Smartphones</option>
                                    <option value="notebooks">Notebooks</option>
                                    <option value="tablets">Tablets</option>
                                    <option value="acessorios">Acessórios</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ordenar por</label>
                                <select id="sort-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="name">Nome</option>
                                    <option value="price">Preço</option>
                                    <option value="stock">Estoque</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Produtos -->
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Imagem</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Produto</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoria</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Preço</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estoque Atual</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="product-management-table">
                                <!-- Produtos serão carregados via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Stock Management Modal -->
    <div id="stock-management-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-[60] cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-blue-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Gerenciador de Estoque</h3>
                            <p class="text-sm text-gray-500">Gerencie o estoque de todos os produtos do sistema</p>
                        </div>
                        <button onclick="closeStockManagementModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <!-- Filtros e busca -->
                    <div class="mb-6 flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <input type="text" id="stock-search" placeholder="Buscar produtos..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div class="flex gap-2">
                            <select id="stock-category-filter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">Todas as categorias</option>
                                <option value="eletronicos">Eletrônicos</option>
                                <option value="casa">Casa e Jardim</option>
                                <option value="beleza">Beleza</option>
                                <option value="esportes">Esportes</option>
                                <option value="brinquedos">Brinquedos</option>
                                <option value="automotivo">Automotivo</option>
                            </select>
                            <button onclick="refreshStockData()" class="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg">
                                <i class="fas fa-sync-alt mr-2"></i>Atualizar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tabela de produtos -->
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Produto</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoria</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estoque Atual</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="stock-products-table" class="bg-white divide-y divide-gray-200">
                                <!-- Produtos serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Mensagem de carregamento -->
                    <div id="stock-loading" class="text-center py-8 hidden">
                        <i class="fas fa-spinner fa-spin text-2xl text-purple-500 mb-2"></i>
                        <p class="text-gray-500">Carregando produtos...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Stock Increase Modal (Individual) -->
    <div id="stock-increase-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-[65] cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-green-50 to-blue-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-blue-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Aumentar Estoque</h3>
                            <p class="text-sm text-gray-500">Adicione mais unidades ao estoque</p>
                        </div>
                        <button onclick="closeStockIncreaseModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div id="stock-product-info" class="mb-6">
                        <!-- Informações do produto serão carregadas aqui -->
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Quantidade a adicionar (múltiplos de 10)</label>
                        <select id="stock-increase-amount" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="10">10 unidades</option>
                            <option value="20">20 unidades</option>
                            <option value="30">30 unidades</option>
                            <option value="40">40 unidades</option>
                            <option value="50">50 unidades</option>
                            <option value="100">100 unidades</option>
                        </select>
                    </div>
                    
                    <div class="mb-6">
                        <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                            <div class="flex items-center">
                                <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                                <span class="text-sm text-blue-800">
                                    <strong>Estoque atual:</strong> <span id="current-stock">0</span> unidades<br>
                                    <strong>Após aumento:</strong> <span id="new-stock">0</span> unidades
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" onclick="closeStockIncreaseModal()" class="px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg">
                            Cancelar
                        </button>
                        <button onclick="confirmStockIncrease()" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg">
                            Confirmar Aumento
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-details-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Detalhes do Produto</h3>
                            <p class="text-sm text-gray-500">Informações completas do produto</p>
                        </div>
                        <button onclick="closeProductDetailsModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6" id="product-details-content">
                    <!-- Detalhes do produto serão carregados aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal - REMOVIDO conforme especificação - funcionalidade fora do escopo do perfil Vendedor -->
    <div id="add-product-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-[70] cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-emerald-50 to-teal-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Adicionar Produto</h3>
                            <p class="text-sm text-gray-500">Crie um novo produto para vender</p>
                        </div>
                        <button onclick="closeAddProductModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <form id="add-product-form" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Produto</label>
                                <input type="text" name="name" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Marca</label>
                                <input type="text" name="brand" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Preço</label>
                                <input type="number" name="price" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Estoque</label>
                                <input type="number" name="stock" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Descrição</label>
                            <textarea name="description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Categoria</label>
                            <select name="category" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                                <option value="smartphones">Smartphones</option>
                                <option value="notebooks">Notebooks</option>
                                <option value="tablets">Tablets</option>
                                <option value="acessorios">Acessórios</option>
                                <option value="eletrodomesticos">Eletrodomésticos</option>
                                <option value="casa">Casa e Decoração</option>
                                <option value="esportes">Esportes</option>
                                <option value="livros">Livros</option>
                            </select>
                        </div>
                        
                        <!-- Campo de Imagem do Produto -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Imagem do Produto</label>
                            <div class="space-y-3">
                                <!-- Preview da imagem -->
                                <div id="product-image-preview" class="hidden">
                                    <img id="product-image-preview-img" src="" alt="Preview" class="w-32 h-32 object-cover rounded-lg border border-gray-300">
                                </div>
                                
                                <!-- Botão de upload -->
                                <div class="flex items-center space-x-3">
                                    <button type="button" onclick="document.getElementById('product-image-input').click()" 
                                            class="px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg flex items-center space-x-2 transition-all duration-200">
                                        <i class="fas fa-camera"></i>
                                        <span>Escolher Imagem</span>
                                    </button>
                                    
                                    <button type="button" id="remove-product-image-btn" onclick="removeProductImage()" 
                                            class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center space-x-2 transition-all duration-200 hidden">
                                        <i class="fas fa-trash"></i>
                                        <span>Remover</span>
                                    </button>
                                </div>
                                
                                <input type="file" id="product-image-input" accept="image/*" class="hidden" onchange="handleProductImageUpload(event)">
                                <p class="text-xs text-gray-500">Formatos aceitos: JPG, PNG, GIF. Tamanho máximo: 5MB</p>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3">
                            <button type="button" onclick="closeAddProductModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors duration-300">
                                Cancelar
                            </button>
                            <button type="submit" class="px-6 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors duration-300">
                                Adicionar Produto
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Moderno Shopify-Style -->
    <footer class="bg-gray-900 text-white mt-16">
        <!-- Main Footer -->
        <div class="container mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="space-y-4">
                    <div class="flex items-center space-x-3">
                        <img src="assets/images/logo/footer/logo-white.png" 
                             alt="E2E Shop Logo" 
                             class="footer-logo h-8 w-auto"
                             data-context="footer">
                    </div>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        Sua loja online moderna e tecnológica com os melhores produtos de qualidade. 
                        Tecnologia, inovação e praticidade em um só lugar.
                    </p>
                    <div class="flex space-x-3">
                        <a href="#" class="w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-500 transition-colors duration-300" aria-label="Facebook">
                            <i class="fab fa-facebook text-sm"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-500 transition-colors duration-300" aria-label="Instagram">
                            <i class="fab fa-instagram text-sm"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-500 transition-colors duration-300" aria-label="Twitter">
                            <i class="fab fa-twitter text-sm"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary-500 transition-colors duration-300" aria-label="LinkedIn">
                            <i class="fab fa-linkedin text-sm"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Produtos -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-white">Produtos</h3>
                    <ul class="space-y-2">
                        <li><a href="products.html?category=smartphones" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Smartphones</a></li>
                        <li><a href="products.html?category=notebooks" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Notebooks</a></li>
                        <li><a href="products.html?category=tablets" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Tablets</a></li>
                        <li><a href="products.html?category=acessorios" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Acessórios</a></li>
                    </ul>
                </div>
                
                <!-- Suporte -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-white">Suporte</h3>
                    <ul class="space-y-2">
                        <li><a href="contact.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Contato</a></li>
                        <li><a href="faq.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Perguntas Frequentes</a></li>
                        <li><a href="shipping.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Frete e Entrega</a></li>
                        <li><a href="returns.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Devoluções</a></li>
                    </ul>
                </div>
                
                <!-- Conta -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-white">Conta</h3>
                    <ul class="space-y-2">
                        <li><a href="login.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Entrar</a></li>
                        <li><a href="register.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Cadastrar</a></li>
                        <li><a href="profile.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Meu Perfil</a></li>
                        <li><a href="orders.html" class="text-gray-400 hover:text-white transition-colors duration-300 text-sm">Meus Pedidos</a></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Footer Bottom -->
        <div class="border-t border-gray-800">
            <div class="container mx-auto px-4 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-center md:text-left">
                        <p class="text-gray-400 text-sm">&copy; 2024 E2E SHOP. Todos os direitos reservados.</p>
                        <p class="text-gray-500 text-xs mt-1">
                            Desenvolvido por: <strong>Uriel</strong>, <strong>Heraldo</strong>, <strong>Bruno</strong>, <strong>Fernanda</strong>, <strong>Samuel</strong>
                        </p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-500 text-xs">Formas de Pagamento:</span>
                        <div class="flex space-x-2">
                            <i class="fab fa-cc-visa text-gray-400 text-lg"></i>
                            <i class="fab fa-cc-mastercard text-gray-400 text-lg"></i>
                            <i class="fas fa-credit-card text-gray-400 text-lg"></i>
                            <i class="fas fa-mobile-alt text-gray-400 text-lg"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/products-api.js?v=1.0"></script>
    <script src="assets/js/ecommerce-system.js?v=1.0"></script>
    <script src="assets/js/clean-modals.js?v=3.3"></script>
    <script src="assets/js/categories.js?v=4.0"></script>
    <script src="assets/js/components.js"></script>
    <script src="assets/js/auth.js"></script>
    <!-- cart-api-integration removido para build clean -->
    <script src="assets/js/modern-cart-system.js?v=1.0"></script>
    <script src="assets/js/cart-functions.js?v=1.0"></script>
    <script src="assets/js/vendor-dashboard.js?v=1.0"></script>
    
    <script>
        // Dados do vendedor - começam vazios
        let vendorData = {
            monthlySales: 0.00,
            productsSold: 0,
            commission: 0.00,
            rating: 0.0,
            myProducts: [], // Produtos da API serão carregados aqui
            recentSales: [],
            topProducts: []
        };

        // Configurar fechamento de modais
        function setupModalCloseHandlers() {
            console.log('🔧 Configurando fechamento de modais...');
            
            // Lista de modais
            const modals = [
                { id: 'product-management-modal', closeFunction: 'closeProductManagementModal' },
                { id: 'stock-management-modal', closeFunction: 'closeStockManagementModal' },
                { id: 'stock-increase-modal', closeFunction: 'closeStockIncreaseModal' },
                { id: 'product-details-modal', closeFunction: 'closeProductDetailsModal' },
                { id: 'profile-modal', closeFunction: 'closeProfileModal' },
                { id: 'delete-account-modal', closeFunction: 'closeDeleteAccountModal' },
                { id: 'sales-report-modal', closeFunction: 'closeSalesReportModal' },
                // { id: 'add-product-modal', closeFunction: 'closeAddProductModal' }, // Removido conforme especificação
                { id: 'edit-product-modal', closeFunction: 'closeEditProductModal' }
            ];
            
            // Configurar cada modal
            modals.forEach(modal => {
                const modalElement = document.getElementById(modal.id);
                if (modalElement) {
                    // Fechar clicando fora do modal
                    modalElement.addEventListener('click', function(e) {
                        if (e.target === modalElement) {
                            console.log(`🖱️ Fechando modal ${modal.id} clicando fora`);
                            window[modal.closeFunction]();
                        }
                    });
                }
            });
            
            // Event listener global para tecla ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    // Verificar qual modal está aberto e fechar
                    const openModal = modals.find(modal => {
                        const modalElement = document.getElementById(modal.id);
                        return modalElement && !modalElement.classList.contains('hidden');
                    });
                    
                    if (openModal) {
                        console.log(`⌨️ Fechando modal ${openModal.id} com ESC`);
                        window[openModal.closeFunction]();
                    }
                }
            });
            
            console.log('✅ Handlers de fechamento configurados para todos os modais');
        }

        // Função para verificar se a API está disponível
        function checkAPI() {
            console.log('🔍 Verificando disponibilidade da API...');
            console.log('📡 window.productsAPI:', window.productsAPI);
            console.log('📡 typeof window.productsAPI:', typeof window.productsAPI);
            
            if (window.productsAPI) {
                console.log('✅ API disponível');
                return true;
            } else {
                console.log('❌ API não disponível');
                return false;
            }
        }

        // Função para carregar dados do dashboard
        async function loadDashboardData() {
            console.log('📊 Carregando dados do dashboard vendedor...');
            
            // Verificar API
            checkAPI();
            
            // Carregar nome do usuário
            loadUserData();
            
            // Carregar foto de perfil
            loadProfilePhoto();
            
            // Verificar se é conta demo e carregar dados apropriados
            if (isDemoAccount()) {
                console.log('🏢 Conta demo detectada - carregando dados realistas...');
                const demoData = generateRealisticDemoData();
                
                // Aplicar dados demo realistas
                vendorData.monthlySales = demoData.monthlySales;
                vendorData.productsSold = demoData.productsSold;
                vendorData.commission = demoData.commission;
                vendorData.rating = demoData.rating;
                vendorData.recentSales = demoData.recentSales;
                vendorData.myProducts = demoData.products;
                
                // Sincronizar todos os dados
                syncAllData(demoData);
                
                console.log('📊 Dados demo realistas aplicados:', {
                    monthlySales: `R$ ${demoData.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`,
                    productsSold: demoData.productsSold,
                    commission: `R$ ${demoData.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`,
                    rating: demoData.rating.toFixed(1)
                });
                
                // Renderizar tabela com paginação
                syncProductSales();
                computeAndSyncPerformance();
                renderMyProductsTable();
                renderLowStockAlerts();
                renderTopSellers();
                renderCategoryConversion();
                
            // Campos removidos a pedido: não carregar
            // loadRecentSales();
            // loadTopProducts();
                
                // Salvar dados
                saveVendorData();
                
                console.log('✅ Dados demo carregados com sucesso!');
                return;
            }
            
            // Atualizar estatísticas (começam zeradas para contas reais)
            document.getElementById('monthly-sales').textContent = `R$ ${vendorData.monthlySales.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
            document.getElementById('products-sold').textContent = vendorData.productsSold.toLocaleString('pt-BR');
            document.getElementById('commission').textContent = `R$ ${vendorData.commission.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
            document.getElementById('rating').textContent = vendorData.rating;
            
            // Carregar produtos - preservar dados salvos se existirem
            if (vendorData.myProducts && vendorData.myProducts.length > 0) {
                console.log('📦 Dados de produtos já carregados, preservando alterações...');
                syncProductSales();
                computeAndSyncPerformance();
                renderMyProductsTable();
                renderLowStockAlerts();
                renderTopSellers();
                renderCategoryConversion();
            } else {
                console.log('📦 Carregando produtos da API...');
                await loadMyProducts();
                syncProductSales();
                computeAndSyncPerformance();
                renderLowStockAlerts();
                renderTopSellers();
                renderCategoryConversion();
            }
            
            // Campos removidos a pedido: não carregar
            // loadRecentSales();
            // loadTopProducts();
            
            // Salvar dados atualizados no localStorage
            saveVendorData();
        }

        // Função para salvar dados do vendedor
        function saveVendorData() {
            try {
                // Adicionar timestamp de modificação
                vendorData.lastModified = new Date().toISOString();
                
                localStorage.setItem('vendor_data', JSON.stringify(vendorData));
                console.log('💾 Dados do vendedor salvos no localStorage');
                console.log('💾 Dados salvos:', vendorData);
                console.log('💾 Última modificação:', vendorData.lastModified);
                
                // Verificar se foi salvo corretamente
                const savedData = localStorage.getItem('vendor_data');
                if (savedData) {
                    console.log('✅ Verificação: Dados confirmados no localStorage');
                } else {
                    console.error('❌ Erro: Dados não foram salvos no localStorage');
                }
            } catch (error) {
                console.error('❌ Erro ao salvar dados do vendedor:', error);
            }
        }

        // Renderizar alertas de estoque baixo
        function renderLowStockAlerts() {
            const container = document.getElementById('low-stock-list');
            if (!container) return;
            const products = Array.isArray(vendorData.myProducts) ? vendorData.myProducts : [];
            const low = products.filter(p => typeof p.stock === 'number' && p.stock <= 5).slice(0, 5);
            if (low.length === 0) {
                container.innerHTML = `
                    <div class="p-4 bg-white rounded-xl border border-gray-200 text-sm text-gray-600">
                        Nenhum alerta de estoque. Tudo ok!
                    </div>
                `;
                return;
            }
            container.innerHTML = low.map(p => `
                <div class="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-red-100 text-red-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900 text-sm">${p.name}</p>
                            <p class="text-xs text-gray-500">Estoque: ${p.stock}</p>
                        </div>
                    </div>
                    <button onclick="openStockManagement()" class="text-xs px-3 py-1 rounded-lg bg-red-50 text-red-600 border border-red-200 hover:bg-red-100">Repor</button>
                </div>
            `).join('');
        }

        // Renderizar vendas do dia
        function renderTodaySales() {
            const list = document.getElementById('today-sales-list');
            const totalEl = document.getElementById('today-sales-total');
            const kpiTotal = document.getElementById('kpi-today-total');
            const kpiOrders = document.getElementById('kpi-today-orders');
            const kpiAvg = document.getElementById('kpi-today-avg');
            const kpiItems = document.getElementById('kpi-today-items');
            if (!list || !totalEl) return;
            const sales = Array.isArray(vendorData.recentSales) ? vendorData.recentSales : [];
            const today = new Date();
            const isToday = (d) => {
                // Aceita strings como 'Hoje', 'Ontem', '2 dias atrás' e datas ISO
                if (typeof d === 'string') {
                    const s = d.toLowerCase();
                    if (s.includes('hoje')) return true;
                    if (s.includes('ontem')) return false;
                    // Tenta parsear ISO
                    const parsed = Date.parse(d);
                    if (!isNaN(parsed)) {
                        const dt = new Date(parsed);
                        return dt.toDateString() === today.toDateString();
                    }
                    return false;
                }
                if (d instanceof Date) {
                    return d.toDateString() === today.toDateString();
                }
                return false;
            };
            // Fallback: se não houver vendas "hoje", considerar últimas 24h ou primeira página de recentSales
            let todaySales = sales.filter(s => isToday(s.date));
            if (todaySales.length === 0 && sales.length > 0) {
                const now = Date.now();
                todaySales = sales.filter(s => {
                    const parsed = Date.parse(s.date);
                    return !isNaN(parsed) && (now - parsed) <= 24*60*60*1000;
                });
            }
            todaySales = todaySales.slice(0, 5);
            if (todaySales.length === 0) {
                list.innerHTML = `<div class="p-4 bg-white rounded-xl border border-gray-200 text-sm text-gray-600">Nenhuma venda hoje (ainda!).</div>`;
                totalEl.textContent = 'R$ 0,00';
                if (kpiTotal) kpiTotal.textContent = 'R$ 0,00';
                if (kpiOrders) kpiOrders.textContent = '0 pedidos';
                if (kpiAvg) kpiAvg.textContent = 'R$ 0,00';
                if (kpiItems) kpiItems.textContent = '0 itens';
                return;
            }
            const total = todaySales.reduce((sum, s) => {
                // amount pode ser número ou string formatada
                if (typeof s.amount === 'number') return sum + s.amount;
                if (typeof s.amount === 'string') {
                    const n = parseFloat(s.amount.replace('R$','').replace(/\./g,'').replace(',','.'));
                    return sum + (isNaN(n) ? 0 : n);
                }
                if (typeof s.total === 'number') return sum + s.total;
                return sum;
            }, 0);
            const totalText = `R$ ${total.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
            totalEl.textContent = totalText;
            const welcomeSales = document.getElementById('welcome-sales');
            if (welcomeSales) welcomeSales.textContent = totalText;
            if (kpiTotal) kpiTotal.textContent = totalEl.textContent;
            if (kpiOrders) kpiOrders.textContent = `${todaySales.length} pedidos`;
            let itemsCount = 0;
            todaySales.forEach(s => { if (Array.isArray(s.items)) itemsCount += s.items.length; });
            const avg = todaySales.length > 0 ? (total / todaySales.length) : 0;
            if (kpiAvg) kpiAvg.textContent = `R$ ${avg.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
            if (kpiItems) kpiItems.textContent = `${itemsCount} itens`;
            list.innerHTML = todaySales.map(s => `
                <div class="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200">
                    <div>
                        <p class="font-medium text-gray-900 text-sm">${s.product || 'Venda'}</p>
                        <p class="text-xs text-gray-500">${s.customer || ''}</p>
                    </div>
                    <div class="text-right">
                        <span class="text-emerald-700 font-bold">${typeof s.amount === 'number' ? 'R$ ' + s.amount.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : (s.amount || (s.total ? 'R$ ' + s.total.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : ''))}</span>
                    </div>
                </div>
            `).join('');
        }

        // Renderizar Vendas Recentes (Top 5)
        function renderRecentSales() {
            const container = document.getElementById('recent-sales-list');
            if (!container) return;
            const sales = Array.isArray(vendorData.recentSales) ? vendorData.recentSales : [];
            if (sales.length === 0) {
                // Mostrar 5 placeholders padronizados, como no Mais Vendidos
                container.innerHTML = Array.from({ length: 5 }).map((_, idx) => `
                    <div class="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200 opacity-60">
                        <div>
                            <p class="font-medium text-gray-900 text-sm">Venda #${idx + 1}</p>
                            <p class="text-xs text-gray-500">-</p>
                        </div>
                        <div class="text-right">
                            <span class="text-green-700 font-bold">R$ 0,00</span>
                        </div>
                    </div>
                `).join('');
                return;
            }
            // Ordenar por data (quando possível) e pegar top 3
            const ordered = sales.slice().sort((a,b) => {
                const pa = Date.parse(a.date), pb = Date.parse(b.date);
                if (!isNaN(pa) && !isNaN(pb)) return pb - pa;
                return 0;
            }).slice(0,3);
            container.innerHTML = ordered.map(s => `
                <div class="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200">
                    <div>
                        <p class="font-medium text-gray-900 text-sm">${s.product || 'Venda'}</p>
                        <p class="text-xs text-gray-500">${s.customer || ''} ${s.date ? '• ' + s.date : ''}</p>
                    </div>
                    <div class="text-right">
                        <span class="text-green-700 font-bold">${typeof s.amount === 'number' ? 'R$ ' + s.amount.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : (s.amount || (s.total ? 'R$ ' + s.total.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) : ''))}</span>
                    </div>
                </div>
            `).join('');
        }

        // Função para carregar dados do usuário
        function loadUserData() {
            console.log('👤 Carregando dados do usuário...');
            
            // Mostrar banner de demonstração apenas para usuários demo
            const demoNotice = document.getElementById('demo-notice');
            if (demoNotice) {
                const isDemo = isDemoUser();
                console.log('🎭 Exibindo banner demo:', isDemo);
                demoNotice.style.display = isDemo ? 'block' : 'none';
                
                if (isDemo) {
                    console.log('✅ Banner de demonstração exibido para vendedor');
                } else {
                    // Forçar exibição se for usuário demo mas não foi detectado
                    console.log('🔄 Verificando se precisa forçar banner demo...');
                    setTimeout(() => {
                        if (isDemoUser()) {
                            forceShowDemoBanner();
                        }
                    }, 1000);
                }
            }
            
            // Verificar se é um usuário novo (vem da URL)
            const urlParams = new URLSearchParams(window.location.search);
            const isNewUser = urlParams.has('firstName') && urlParams.has('lastName');
            
            if (isNewUser) {
                console.log('🆕 Usuário novo detectado - inicializando dados zerados');
                
                // Inicializar dados zerados para usuário novo
                vendorData = {
                    monthlySales: 0.00,
                    productsSold: 0,
                    commission: 0.00,
                    rating: 0.0,
                    myProducts: [],
                    recentSales: [],
                    topProducts: []
                };
                
                // Atualizar nome do vendedor
                const firstName = urlParams.get('firstName');
                const lastName = urlParams.get('lastName');
                const vendorNameElement = document.getElementById('vendor-name');
                if (vendorNameElement) {
                    vendorNameElement.textContent = `${firstName} ${lastName}`;
                    console.log('✅ Nome do vendedor atualizado:', `${firstName} ${lastName}`);
                }
                
                // Salvar no localStorage para próximas visitas
                const userData = {
                    firstName: firstName,
                    lastName: lastName,
                    email: urlParams.get('email') || '',
                    profile: 'vendedor',
                    timestamp: new Date().toISOString(),
                    isNewUser: true
                };
                localStorage.setItem('e2e_current_user', JSON.stringify(userData));
                console.log('💾 Dados do usuário novo salvos no localStorage');
                
                // Salvar dados zerados no localStorage
                localStorage.setItem('vendor_data', JSON.stringify(vendorData));
                console.log('📊 Dados zerados salvos para usuário novo');
                return;
            }
            
            // Tentar carregar do localStorage
            const savedUser = localStorage.getItem('e2e_current_user');
            const savedVendorData = localStorage.getItem('vendor_data');
            
            if (savedUser) {
                try {
                    const userData = JSON.parse(savedUser);
                    console.log('✅ Dados do usuário encontrados:', userData);
                    
                    // Atualizar nome do vendedor
                    const vendorNameElement = document.getElementById('vendor-name');
                    if (vendorNameElement && userData.firstName && userData.lastName) {
                        vendorNameElement.textContent = `${userData.firstName} ${userData.lastName}`;
                        console.log('✅ Nome do vendedor atualizado:', `${userData.firstName} ${userData.lastName}`);
                    }
                    
                    // Carregar dados do vendedor se existirem
                    if (savedVendorData) {
                        try {
                            vendorData = JSON.parse(savedVendorData);
                            console.log('📊 Dados do vendedor carregados do localStorage:', vendorData);
                            console.log('📊 Produtos carregados:', vendorData.myProducts?.length || 0);
                        } catch (error) {
                            console.error('❌ Erro ao carregar dados do vendedor:', error);
                        }
                    } else {
                        console.log('⚠️ Nenhum dado do vendedor encontrado no localStorage');
                    }
                    
                    return;
                } catch (error) {
                    console.error('❌ Erro ao parsear dados do usuário:', error);
                }
            }
            
            console.log('⚠️ Nenhum dado de usuário encontrado, usando nome padrão');
        }

        // Função para carregar meus produtos (usando a mesma lógica do Gerenciador de Estoque)
        async function loadMyProducts() {
            console.log('🔄 Carregando produtos para Meus Produtos...');
            
            // Verificar se é conta demo
            if (isDemoAccount()) {
                console.log('🏢 Conta demo detectada - carregando dados realistas...');
                const demoData = generateRealisticDemoData();
                
                // Aplicar dados demo realistas
                vendorData.monthlySales = demoData.monthlySales;
                vendorData.productsSold = demoData.productsSold;
                vendorData.commission = demoData.commission;
                vendorData.rating = demoData.rating;
                vendorData.recentSales = demoData.recentSales;
                vendorData.myProducts = demoData.products;
                
                // Sincronizar todos os dados
                syncAllData(demoData);
                
                console.log('📊 Dados demo realistas aplicados:', {
                    monthlySales: `R$ ${demoData.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`,
                    productsSold: demoData.productsSold,
                    commission: `R$ ${demoData.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`,
                    rating: demoData.rating.toFixed(1)
                });
                
                // Renderizar tabela com paginação
                renderMyProductsTable();
                
                // Salvar dados
                saveVendorData();
                return;
            }
            
            // Verificar se já temos dados salvos com modificações
            if (vendorData.myProducts && vendorData.myProducts.length > 0) {
                console.log('📦 Dados já existem, verificando se há modificações...');
                console.log('📦 Última modificação:', vendorData.lastModified);
                
                // Verificar se há timestamp de modificação (indica que dados foram alterados)
                if (vendorData.lastModified) {
                    console.log('✅ Dados modificados encontrados, preservando alterações...');
                    renderMyProductsTable();
                    return;
                }
                
                // Verificar se algum produto foi modificado (tem estoque diferente do padrão)
                const hasModifications = vendorData.myProducts.some(product => {
                    // Se o produto tem estoque diferente de 0, pode ter sido modificado
                    return product.stock && product.stock > 0;
                });
                
                if (hasModifications) {
                    console.log('✅ Dados modificados encontrados, preservando alterações...');
                    renderMyProductsTable();
                    return;
                }
            }
            
            // SEMPRE carregar produtos locais como fallback principal
            console.log('📦 Carregando produtos locais (30 produtos)...');
            const localProducts = getLocalProducts();
            console.log('✅ Produtos locais carregados:', localProducts.length);
            
            // Verificar se temos todos os 30 produtos
            if (localProducts.length < 30) {
                console.warn('⚠️ Apenas', localProducts.length, 'produtos locais encontrados, esperado 30');
            }
            
            // Processar produtos locais
            vendorData.myProducts = localProducts.map(product => ({
                id: product.id,
                name: product.name,
                price: product.price,
                stock: product.stock,
                sales: 0,
                category: product.category,
                description: product.description || '',
                image: product.image,
                brand: product.brand,
                isActive: true
            }));
            
            console.log('📊 Produtos processados para Meus Produtos:', vendorData.myProducts.length);
            console.log('🖼️ Primeiro produto processado:', vendorData.myProducts[0]);
            console.log('📦 Lista completa de produtos:', vendorData.myProducts.map(p => p.name));
            
            // Renderizar tabela com paginação
            renderMyProductsTable();
            
            // Salvar dados no localStorage
            saveVendorData();
            
            return; // Não tentar carregar da API se já carregou localmente
            
            try {
                // Tentar carregar produtos da API primeiro (mesma lógica do Gerenciador de Estoque)
                console.log('🌐 Tentando carregar produtos da API...');
                const response = await fetch('https://e2e-shop-api.pages.dev/api/products', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    // Timeout de 5 segundos
                    signal: AbortSignal.timeout(5000)
                });
                
                if (!response.ok) {
                    throw new Error(`API retornou status ${response.status}`);
                }
                
                apiProducts = await response.json();
                console.log('✅ Produtos carregados da API para Meus Produtos:', apiProducts.length);
                
                // Processar produtos da API (mesma lógica do Gerenciador de Estoque)
                vendorData.myProducts = apiProducts.map(product => {
                    console.log('🔍 Processando produto:', product);
                    
                    // Processar preço corretamente
                    let price = 0;
                    if (typeof product.price === 'number') {
                        price = product.price;
                    } else if (product.price && typeof product.price === 'object') {
                        price = product.price.final || product.price.price_final || product.price.price || 0;
                    } else if (product.price_final) {
                        price = product.price_final;
                    } else if (product.price_final_price) {
                        price = product.price_final_price;
                    }
                    
                    // Processar estoque corretamente
                    let stock = 0;
                    if (typeof product.stock === 'number') {
                        stock = product.stock;
                    } else if (product.stock && typeof product.stock === 'object') {
                        stock = product.stock.quantity || product.stock.stock_quantity || product.stock.available || 0;
                    } else if (product.stock_quantity) {
                        stock = product.stock_quantity;
                    } else if (product.available_stock) {
                        stock = product.available_stock;
                    } else if (product.quantity) {
                        stock = product.quantity;
                    }
                    
                    // Se ainda não tem estoque, usar um valor padrão baseado no produto
                    if (stock === 0) {
                        stock = Math.floor(Math.random() * 50) + 10; // Entre 10 e 60 unidades
                    }
                    
                    // Se não tem preço, usar um valor padrão baseado no produto
                    if (price === 0) {
                        const productName = product.title || product.name || product.slug || '';
                        if (productName.toLowerCase().includes('tv') || productName.toLowerCase().includes('smart')) {
                            price = Math.floor(Math.random() * 2000) + 1500; // TVs: R$ 1.500-3.500
                        } else if (productName.toLowerCase().includes('fone') || productName.toLowerCase().includes('bluetooth')) {
                            price = Math.floor(Math.random() * 500) + 200; // Fones: R$ 200-700
                        } else if (productName.toLowerCase().includes('monitor')) {
                            price = Math.floor(Math.random() * 1000) + 800; // Monitores: R$ 800-1.800
                        } else if (productName.toLowerCase().includes('cafeteira')) {
                            price = Math.floor(Math.random() * 300) + 150; // Cafeteiras: R$ 150-450
                        } else if (productName.toLowerCase().includes('aspirador')) {
                            price = Math.floor(Math.random() * 800) + 400; // Aspiradores: R$ 400-1.200
                        } else {
                            price = Math.floor(Math.random() * 1000) + 200; // Outros: R$ 200-1.200
                        }
                    }
                    
                    // Mapear imagem baseada no nome do produto
                    const productName = product.title || product.name || product.slug || 'produto';
                    let localImagePath = 'assets/images/products/placeholder.jpg';
                    
                    // Mapear produtos específicos para suas imagens
                    const productNameLower = productName.toLowerCase();
                    console.log('🔍 Mapeando imagem para produto:', productName, '→', productNameLower);
                    
                    if (productNameLower.includes('smart tv') && productNameLower.includes('lenovo')) {
                        localImagePath = 'assets/images/products/01_smart_tv_lenovo_55_4k_uhd.jpg';
                        console.log('✅ Mapeado para Smart TV Lenovo');
                    } else if (productNameLower.includes('fone') && productNameLower.includes('jbl')) {
                        localImagePath = 'assets/images/products/02_fone_bluetooth_jbl_cancelamento_ruido.jpg';
                        console.log('✅ Mapeado para Fone JBL');
                    } else if (productNameLower.includes('aspirador') && (productNameLower.includes('britania') || productNameLower.includes('britânia'))) {
                        localImagePath = 'assets/images/products/03_aspirador_robo_britania_wifi.jpg';
                        console.log('✅ Mapeado para Aspirador Britânia');
                        // Fallback específico para Britânia se a imagem não carregar
                        console.log('🖼️ Tentando carregar imagem:', localImagePath);
                    } else if (productNameLower.includes('fone') && productNameLower.includes('dell')) {
                        localImagePath = 'assets/images/products/04_fone_bluetooth_dell_cancelamento_ruido.jpg';
                    } else if (productNameLower.includes('aspirador') && productNameLower.includes('mondial')) {
                        localImagePath = 'assets/images/products/05_aspirador_robo_mondial_wifi.jpg';
                    } else if (productNameLower.includes('monitor') && productNameLower.includes('dell')) {
                        localImagePath = 'assets/images/products/06_monitor_dell_24_75hz.jpg';
                    } else if (productNameLower.includes('cafeteira') && productNameLower.includes('mondial')) {
                        localImagePath = 'assets/images/products/07_cafeteira_eletrica_mondial_18_xicaras.jpg';
                    } else if (productNameLower.includes('cafeteira') && productNameLower.includes('arno')) {
                        localImagePath = 'assets/images/products/08_cafeteira_eletrica_arno_18_xicaras.jpg';
                    } else if (productNameLower.includes('cafeteira') && productNameLower.includes('electrolux')) {
                        localImagePath = 'assets/images/products/09_cafeteira_eletrica_electrolux_18_xicaras.jpg';
                    } else if (productNameLower.includes('monitor') && productNameLower.includes('sony')) {
                        localImagePath = 'assets/images/products/10_monitor_sony_24_75hz.jpg';
                    } else if (productNameLower.includes('aspirador') && productNameLower.includes('arno')) {
                        localImagePath = 'assets/images/products/11_aspirador_robo_arno_wifi.jpg';
                    } else if (productNameLower.includes('monitor') && productNameLower.includes('philips')) {
                        localImagePath = 'assets/images/products/12_monitor_philips_29_75hz.jpg';
                    } else if (productNameLower.includes('smartphone') && productNameLower.includes('samsung')) {
                        localImagePath = 'assets/images/products/13_smartphone_samsung_galaxy_a54.jpg';
                    } else if (productNameLower.includes('laptop') && productNameLower.includes('dell')) {
                        localImagePath = 'assets/images/products/14_laptop_dell_inspiron_15_3000.jpg';
                    } else if (productNameLower.includes('headphone') && productNameLower.includes('sony')) {
                        localImagePath = 'assets/images/products/15_headphone_sony_wh_1000xm4.jpg';
                    } else if (productNameLower.includes('tablet') && productNameLower.includes('apple')) {
                        localImagePath = 'assets/images/products/16_tablet_apple_ipad_air_5.jpg';
                    } else if (productNameLower.includes('smartwatch') && productNameLower.includes('apple')) {
                        localImagePath = 'assets/images/products/17_smartwatch_apple_watch_series_8.jpg';
                    } else if (productNameLower.includes('camera') && productNameLower.includes('canon')) {
                        localImagePath = 'assets/images/products/18_camera_canon_eos_r6_mark_ii.jpg';
                    } else if (productNameLower.includes('console') && productNameLower.includes('playstation')) {
                        localImagePath = 'assets/images/products/19_console_playstation_5.jpg';
                    } else if (productNameLower.includes('teclado') && productNameLower.includes('razer')) {
                        localImagePath = 'assets/images/products/20_teclado_mecanico_razer_blackwidow.jpg';
                    } else if (productNameLower.includes('mouse') && productNameLower.includes('logitech')) {
                        localImagePath = 'assets/images/products/21_mouse_gaming_logitech_g502.jpg';
                    } else if (productNameLower.includes('webcam') && productNameLower.includes('logitech')) {
                        localImagePath = 'assets/images/products/22_webcam_logitech_c920_hd.jpg';
                    } else if (productNameLower.includes('roteador') && productNameLower.includes('tp-link')) {
                        localImagePath = 'assets/images/products/23_roteador_wifi_tp_link_archer_ax73.jpg';
                    } else if (productNameLower.includes('ssd') && productNameLower.includes('samsung')) {
                        localImagePath = 'assets/images/products/24_ssd_samsung_970_evo_plus_1tb.jpg';
                    } else if (productNameLower.includes('ram') && productNameLower.includes('corsair')) {
                        localImagePath = 'assets/images/products/25_ram_corsair_vengeance_16gb_ddr4.jpg';
                    } else if (productNameLower.includes('placa') && productNameLower.includes('asus')) {
                        localImagePath = 'assets/images/products/26_placa_mae_asus_rog_strix_b550.jpg';
                    } else if (productNameLower.includes('processador') && productNameLower.includes('intel')) {
                        localImagePath = 'assets/images/products/27_processador_intel_core_i7_12700k.jpg';
                    } else if (productNameLower.includes('placa') && productNameLower.includes('nvidia')) {
                        localImagePath = 'assets/images/products/28_placa_video_nvidia_rtx_4070.jpg';
                    } else if (productNameLower.includes('fonte') && productNameLower.includes('corsair')) {
                        localImagePath = 'assets/images/products/29_fonte_corsair_rm850x_850w.jpg';
                    } else if (productNameLower.includes('gabinete') && productNameLower.includes('corsair')) {
                        localImagePath = 'assets/images/products/30_gabinete_corsair_4000d_airflow.jpg';
                    }
                    
                    console.log('🖼️ Imagem mapeada para', productName, ':', localImagePath);
                    
                    const processedProduct = {
                        id: product.id || Math.random().toString(36).substr(2, 9),
                        name: product.title || product.name || product.slug || 'Produto sem nome',
                        price: Number(price) || 0,
                        stock: Number(stock) || 0,
                        sales: 0, // Começar com 0 vendas
                        category: product.category || 'tecnologia',
                        description: product.description || '',
                        image: localImagePath, // Usar imagem local
                        brand: product.brand || '',
                        isActive: product.isActive !== false
                    };
                    
                    console.log('✅ Produto processado:', processedProduct);
                    return processedProduct;
                });
                
                console.log('📊 Produtos processados para Meus Produtos:', vendorData.myProducts.length);
                console.log('🖼️ Primeiro produto processado:', vendorData.myProducts[0]);
                
                // Renderizar tabela com paginação
                renderMyProductsTable();
                
            } catch (error) {
                console.warn('⚠️ API não disponível para Meus Produtos, usando produtos locais:', error.message);
                
                // Fallback: usar produtos locais (mesma lógica do Gerenciador de Estoque)
                const localProducts = getLocalProducts();
                console.log('📦 Usando produtos locais para Meus Produtos:', localProducts.length);
                
                // Processar produtos locais
                vendorData.myProducts = localProducts.map(product => ({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    stock: product.stock,
                    sales: 0,
                    category: product.category,
                    description: product.description || '',
                    image: product.image,
                    brand: product.brand,
                    isActive: true
                }));
                
                // Renderizar tabela com paginação
                renderMyProductsTable();
            }
        }

        // Variáveis de paginação para Meus Produtos
        let myProductsCurrentPage = 1;
        const myProductsPageSize = 5;
        let myProductsTotalPages = 1;

        // Renderizar tabela de meus produtos com paginação
        function renderMyProductsTable(page = 1) {
            console.log('🔄 Renderizando tabela de meus produtos...');
            
            // Garantir que myProducts seja um array
            if (!Array.isArray(vendorData.myProducts)) {
                vendorData.myProducts = [];
            }
            
            console.log('📦 Produtos para renderizar:', vendorData.myProducts.length);
            console.log('📦 Produtos:', vendorData.myProducts);
            
            const tableBody = document.getElementById('my-products-table');
            
            if (vendorData.myProducts.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-6 py-12 text-center">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-box-open text-gray-400 text-4xl mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-900 mb-2">Nenhum produto encontrado</h3>
                                <p class="text-gray-500 mb-4">Os produtos da API não foram carregados</p>
                            </div>
                        </td>
                    </tr>
                `;
                // Esconder paginação se não há produtos
                const pagination = document.getElementById('my-products-pagination');
                if (pagination) pagination.style.display = 'none';
                return;
            }
            
            // Calcular paginação
            myProductsTotalPages = Math.ceil(vendorData.myProducts.length / myProductsPageSize);
            myProductsCurrentPage = Math.min(Math.max(page, 1), myProductsTotalPages);
            
            // Calcular produtos para a página atual
            const startIndex = (myProductsCurrentPage - 1) * myProductsPageSize;
            const endIndex = Math.min(startIndex + myProductsPageSize, vendorData.myProducts.length);
            const productsForPage = vendorData.myProducts.slice(startIndex, endIndex);
            
            console.log(`📄 Página ${myProductsCurrentPage} de ${myProductsTotalPages} - Mostrando produtos ${startIndex + 1} a ${endIndex}`);
            
            // Renderizar produtos da página atual
            tableBody.innerHTML = productsForPage.map(product => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mr-4 flex-shrink-0 overflow-hidden">
                                <img src="${product.image}" alt="${product.name}" 
                                     class="w-full h-full object-cover rounded-lg"
                                     onerror="this.onerror=null; this.src='assets/images/products/placeholder.jpg';">
                            </div>
                            <div class="min-w-0 flex-1">
                                <div class="text-sm font-medium text-gray-900 truncate">${product.name}</div>
                                <div class="text-sm text-gray-500">${getCategoryDisplayName(product.category)}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        R$ ${(Number(product.price) || 0).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="flex items-center">
                            <span class="font-medium">${Number(product.stock)}</span>
                            <span class="ml-1 text-xs text-gray-500">unidades</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">${product.sales}</td>
                    <td class="px-6 py-4 text-sm font-medium">
                        <div class="flex space-x-2">
                            <button onclick="viewProductDetails('${product.id}')" 
                                    class="text-blue-600 hover:text-blue-900 transition-colors duration-200">
                                <i class="fas fa-eye mr-1"></i>Ver
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            
            // Renderizar controles de paginação
            renderMyProductsPagination();
        }
        
        // Renderizar controles de paginação para Meus Produtos
        function renderMyProductsPagination() {
            const paginationInfo = document.getElementById('my-products-pagination-info');
            const paginationControls = document.getElementById('my-products-pagination-controls');
            const pagination = document.getElementById('my-products-pagination');
            
            if (!paginationInfo || !paginationControls || !pagination) return;
            
            // Mostrar paginação se há mais de uma página
            if (myProductsTotalPages <= 1) {
                pagination.style.display = 'none';
                return;
            }
            
            pagination.style.display = 'block';
            
            // Calcular informações da página
            const startProduct = (myProductsCurrentPage - 1) * myProductsPageSize + 1;
            const endProduct = Math.min(myProductsCurrentPage * myProductsPageSize, vendorData.myProducts.length);
            
            // Atualizar informações
            paginationInfo.textContent = `Mostrando ${startProduct}-${endProduct} de ${vendorData.myProducts.length} produtos`;
            
            // Gerar controles de paginação
            let paginationHTML = '';
            
            // Botão Anterior
            paginationHTML += `
                <button onclick="goToMyProductsPage(${myProductsCurrentPage - 1})" 
                        class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                        ${myProductsCurrentPage <= 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left mr-1"></i>Anterior
                </button>
            `;
            
            // Números das páginas
            for (let i = 1; i <= myProductsTotalPages; i++) {
                const isActive = i === myProductsCurrentPage;
                paginationHTML += `
                    <button onclick="goToMyProductsPage(${i})" 
                            class="px-3 py-2 text-sm font-medium border-t border-b border-gray-300 hover:bg-gray-50 ${isActive ? 'bg-primary-500 text-white border-primary-500' : 'text-gray-500 bg-white'}">
                        ${i}
                    </button>
                `;
            }
            
            // Botão Próximo
            paginationHTML += `
                <button onclick="goToMyProductsPage(${myProductsCurrentPage + 1})" 
                        class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                        ${myProductsCurrentPage >= myProductsTotalPages ? 'disabled' : ''}>
                    Próximo<i class="fas fa-chevron-right ml-1"></i>
                </button>
            `;
            
            paginationControls.innerHTML = paginationHTML;
        }
        
        // Navegar para página específica dos Meus Produtos
        function goToMyProductsPage(page) {
            if (page < 1 || page > myProductsTotalPages) return;
            
            console.log(`📄 Navegando para página ${page} dos Meus Produtos`);
            renderMyProductsTable(page);
        }

        // Função para carregar vendas recentes
        function loadRecentSales() {
            const recentSalesContainer = document.getElementById('recent-sales');
            
            // Se não há vendas, mostrar mensagem
            if (vendorData.recentSales.length === 0) {
                recentSalesContainer.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-gray-400 text-3xl mb-3"></i>
                        <p class="text-gray-500">Nenhuma venda realizada</p>
                        <p class="text-sm text-gray-400">Suas vendas aparecerão aqui quando você começar a vender</p>
                    </div>
                `;
                return;
            }
            // Limitar a 5 vendas recentes
            const recentSales = vendorData.recentSales.slice(0, 5);
            recentSalesContainer.innerHTML = recentSales.map(sale => `
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shopping-cart text-primary-600"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">${sale.product}</p>
                            <p class="text-sm text-gray-500">${sale.customer} • ${sale.date}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold text-gray-900">${sale.amount}</p>
                        <p class="text-sm text-green-600">Comissão: R$ ${(parseFloat(sale.amount.replace('R$ ', '').replace('.', '').replace(',', '.')) * 0.1).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</p>
                    </div>
                </div>
            `).join('');

            // Garantia: remover qualquer item extra renderizado por outros fluxos
            const recentNodes = Array.from(recentSalesContainer.children);
            if (recentNodes.length > 5) {
                recentNodes.slice(5).forEach(n => n.remove());
            }
        }

        // Função para carregar produtos em destaque
        function loadTopProducts() {
            const topProductsContainer = document.getElementById('top-products');
            
            // Se não há produtos, mostrar mensagem
            if (vendorData.myProducts.length === 0) {
                topProductsContainer.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-box-open text-gray-400 text-3xl mb-3"></i>
                        <p class="text-gray-500">Carregando produtos...</p>
                        <p class="text-sm text-gray-400">Os produtos da API serão exibidos aqui</p>
                    </div>
                `;
                return;
            }
            
            // Se não há vendas, mostrar produtos da API (até 5)
            if (vendorData.myProducts.every(p => p.sales === 0)) {
                // Mostrar primeiros 5 produtos da API
                const topProducts = vendorData.myProducts.slice(0, 5);
                
                topProductsContainer.innerHTML = topProducts.map(product => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium text-gray-900">${product.name}</p>
                            <p class="text-sm text-gray-500">${product.stock} em estoque</p>
                    </div>
                    <div class="text-right">
                            <p class="font-semibold text-gray-900">R$ ${product.price.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</p>
                    </div>
                </div>
            `).join('');
                // Garantia: remover qualquer item extra
                const nodes = Array.from(topProductsContainer.children);
                if (nodes.length > 5) {
                    nodes.slice(5).forEach(n => n.remove());
                }
                return;
            }
            
            // Ordenar produtos por vendas (maior para menor)
            const sortedProducts = [...vendorData.myProducts].sort((a, b) => b.sales - a.sales);
            
            // Pegar apenas os 5 produtos com mais vendas
            const topProducts = sortedProducts.slice(0, 5);
            
            topProductsContainer.innerHTML = topProducts.map(product => {
                const revenue = (product.price * product.sales).toLocaleString('pt-BR', { 
                    style: 'currency', 
                    currency: 'BRL' 
                });
                
                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div>
                            <p class="font-medium text-gray-900">${product.name}</p>
                            <p class="text-sm text-gray-500">${product.sales} vendas</p>
                        </div>
                        <div class="text-right">
                            <p class="font-semibold text-gray-900">${revenue}</p>
                        </div>
                    </div>
                `;
            }).join('');

            // Garantia: remover qualquer item extra renderizado por outros fluxos
            const topNodes = Array.from(topProductsContainer.children);
            if (topNodes.length > 5) {
                topNodes.slice(5).forEach(n => n.remove());
            }
        }

        // Funções de modal
        // Funções removidas conforme especificação - funcionalidade fora do escopo do perfil Vendedor
        // function openAddProductModal() { ... }
        // function closeAddProductModal() { ... }

        // Variáveis globais para gestão de produtos
        let apiProducts = [];
        let filteredProducts = [];
        let currentProductForStock = null;

        // Funções de ação
        function openStockManagement() {
            console.log('📦 Abrindo gerenciador de estoque...');
            document.getElementById('stock-management-modal').classList.remove('hidden');
            loadAllProductsForStock();
        }
        
        function showComingSoon(feature) {
            console.log(`🚧 Funcionalidade "${feature}" em desenvolvimento...`);
            alert(`A funcionalidade "${feature}" estará disponível em breve!`);
        }
        
        function openProductManagement() {
            console.log('📦 Abrindo gestão de produtos...');
            document.getElementById('product-management-modal').classList.remove('hidden');
            loadApiProducts();
        }

        function closeProductManagementModal() {
            console.log('❌ Fechando modal de gestão de produtos');
            document.getElementById('product-management-modal').classList.add('hidden');
        }

        function closeStockManagementModal() {
            console.log('❌ Fechando modal de gerenciamento de estoque');
            document.getElementById('stock-management-modal').classList.add('hidden');
        }
        
        function closeStockIncreaseModal() {
            console.log('❌ Fechando modal de aumento de estoque');
            document.getElementById('stock-increase-modal').classList.add('hidden');
            currentProductForStock = null;
        }

        function closeProductDetailsModal() {
            console.log('❌ Fechando modal de detalhes do produto');
            document.getElementById('product-details-modal').classList.add('hidden');
        }

        // Função para editar produto
        function editProduct(productId) {
            console.log('✏️ Editando produto:', productId);
            console.log('🔍 vendorData.myProducts:', vendorData.myProducts);
            console.log('🔍 apiProducts:', apiProducts);
            
            // Buscar produto em vendorData.myProducts
            let product = vendorData.myProducts.find(p => p.id === productId);
            console.log('🔍 Produto encontrado em myProducts:', product);
            
            // Se não encontrar, buscar em apiProducts
            if (!product) {
                product = apiProducts.find(p => p.id === productId);
                console.log('🔍 Produto encontrado na API:', product);
            }
            
            if (!product) {
                console.error('❌ Produto não encontrado!');
                alert('Produto não encontrado!');
                return;
            }
            
            console.log('📦 Produto encontrado:', product);
            
            // Aguardar um pouco para garantir que o DOM está pronto
            setTimeout(() => {
                // Preencher formulário de edição
                const nameField = document.getElementById('edit-product-name');
                const priceField = document.getElementById('edit-product-price');
                const stockField = document.getElementById('edit-product-stock');
                const categoryField = document.getElementById('edit-product-category');
                const descriptionField = document.getElementById('edit-product-description');
                const brandField = document.getElementById('edit-product-brand');
                
                console.log('🔍 Campos encontrados:', {
                    nameField: !!nameField,
                    priceField: !!priceField,
                    stockField: !!stockField,
                    categoryField: !!categoryField,
                    descriptionField: !!descriptionField,
                    brandField: !!brandField
                });
                
                if (nameField) {
                    nameField.value = product.name || product.title || '';
                    console.log('✅ Nome preenchido:', nameField.value);
                }
                if (priceField) {
                    priceField.value = product.price || 0;
                    console.log('✅ Preço preenchido:', priceField.value);
                }
                if (stockField) {
                    stockField.value = product.stock || 0;
                    console.log('✅ Estoque preenchido:', stockField.value);
                }
                if (categoryField) {
                    categoryField.value = product.category || 'tecnologia';
                    console.log('✅ Categoria preenchida:', categoryField.value);
                }
                if (descriptionField) {
                    descriptionField.value = product.description || '';
                    console.log('✅ Descrição preenchida:', descriptionField.value);
                }
                if (brandField) {
                    brandField.value = product.brand || '';
                    console.log('✅ Marca preenchida:', brandField.value);
                }
                
                // Armazenar ID do produto sendo editado
                window.currentEditingProductId = productId;
                console.log('✅ ID do produto armazenado:', productId);
                
                // Abrir modal de edição
                const modal = document.getElementById('edit-product-modal');
                if (modal) {
                    modal.classList.remove('hidden');
                    console.log('✅ Modal de edição aberto para produto:', product.name || product.title);
                } else {
                    console.error('❌ Modal de edição não encontrado!');
                    alert('Erro: Modal de edição não encontrado!');
                }
            }, 100);
        }

        // Função para excluir produto
        function deleteProduct(productId) {
            console.log('🗑️ Excluindo produto:', productId);
            const product = vendorData.myProducts.find(p => p.id === productId);
            if (!product) {
                alert('Produto não encontrado!');
                return;
            }
            
            if (confirm(`Tem certeza que deseja excluir o produto "${product.name}"?`)) {
                // Remover produto da lista
                vendorData.myProducts = vendorData.myProducts.filter(p => p.id !== productId);
                
                // Salvar dados
                saveVendorData();
                
                // Atualizar tabelas
                renderProductManagementTable();
                renderMyProductsTable();
                
                showSuccessMessage(`Produto "${product.name}" excluído com sucesso!`);
            }
        }

        // Funções removidas conforme especificação - funcionalidade fora do escopo do perfil Vendedor
        // function openAddProductModal() { ... }
        // function closeAddProductModal() { ... }
        
        // ===== FUNÇÕES DE GERENCIAMENTO DE ESTOQUE =====
        
        // Carregar todos os produtos para o gerenciamento de estoque
        async function loadAllProductsForStock() {
            console.log('📦 Carregando todos os produtos para gerenciamento de estoque...');
            
            const loadingElement = document.getElementById('stock-loading');
            const tableBody = document.getElementById('stock-products-table');
            
            // Mostrar loading
            if (loadingElement) loadingElement.classList.remove('hidden');
            if (tableBody) tableBody.innerHTML = '';
            
            // Primeiro, verificar se temos dados atualizados em vendorData.myProducts
            if (vendorData.myProducts && vendorData.myProducts.length > 0) {
                console.log('📦 Usando dados atualizados de Meus Produtos:', vendorData.myProducts.length);
                
                // Converter dados de Meus Produtos para formato do Gerenciador de Estoque
                const stockProducts = vendorData.myProducts.map(product => ({
                    id: product.id,
                    name: product.name,
                    brand: product.brand,
                    category: product.category,
                    stock: product.stock,
                    price: product.price,
                    image: product.image
                }));
                
                // Renderizar tabela com dados atualizados
                renderStockProductsTable(stockProducts);
                
                // Esconder loading
                if (loadingElement) loadingElement.classList.add('hidden');
                return;
            }
            
            try {
                // Tentar carregar produtos da API primeiro
                console.log('🌐 Tentando carregar produtos da API...');
                const response = await fetch('https://e2e-shop-api.pages.dev/api/products', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    // Timeout de 5 segundos
                    signal: AbortSignal.timeout(5000)
                });
                
                if (!response.ok) {
                    throw new Error(`API retornou status ${response.status}`);
                }
                
                apiProducts = await response.json();
                console.log('✅ Produtos carregados da API:', apiProducts.length);
                
                // Renderizar tabela de produtos
                renderStockProductsTable(apiProducts);
                
            } catch (error) {
                console.warn('⚠️ API não disponível, usando produtos locais:', error.message);
                
                // Fallback: usar produtos locais
                const localProducts = getLocalProducts();
                console.log('📦 Usando produtos locais:', localProducts.length);
                
                // Renderizar tabela de produtos locais
                renderStockProductsTable(localProducts);
            }
            
            // Configurar filtros
            setupStockFilters();
            
            // Esconder loading
            if (loadingElement) loadingElement.classList.add('hidden');
        }
        
        // Obter produtos locais como fallback
        function getLocalProducts() {
            return [
                {
                    id: '1',
                    name: 'Smart TV Lenovo 55" 4K UHD',
                    brand: 'Lenovo',
                    category: 'eletronicos',
                    price: 1204.84,
                    stock: 10,
                    image: 'assets/images/products/01_smart_tv_lenovo_55_4k_uhd.jpg'
                },
                {
                    id: '2',
                    name: 'Fone Bluetooth JBL com Cancelamento de Ruído',
                    brand: 'JBL',
                    category: 'eletronicos',
                    price: 493.25,
                    stock: 16,
                    image: 'assets/images/products/02_fone_bluetooth_jbl_cancelamento_ruido.jpg'
                },
                {
                    id: '3',
                    name: 'Aspirador Robô Britânia Wi-Fi',
                    brand: 'Britânia',
                    category: 'casa',
                    price: 768.28,
                    stock: 16,
                    image: 'assets/images/products/03_aspirador_robo_britania_wifi.jpg'
                },
                {
                    id: '4',
                    name: 'Fone Bluetooth Dell com Cancelamento de Ruído',
                    brand: 'Dell',
                    category: 'eletronicos',
                    price: 163.30,
                    stock: 13,
                    image: 'assets/images/products/04_fone_bluetooth_dell_cancelamento_ruido.jpg'
                },
                {
                    id: '5',
                    name: 'Aspirador Robô Mondial Wi-Fi',
                    brand: 'Mondial',
                    category: 'casa',
                    price: 450.00,
                    stock: 8,
                    image: 'assets/images/products/05_aspirador_robo_mondial_wifi.jpg'
                },
                {
                    id: '6',
                    name: 'Monitor Dell 24" 75Hz',
                    brand: 'Dell',
                    category: 'eletronicos',
                    price: 320.50,
                    stock: 25,
                    image: 'assets/images/products/06_monitor_dell_24_75hz.jpg'
                },
                {
                    id: '7',
                    name: 'Cafeteira Elétrica Mondial 18 Xícaras',
                    brand: 'Mondial',
                    category: 'casa',
                    price: 89.90,
                    stock: 30,
                    image: 'assets/images/products/07_cafeteira_eletrica_mondial_18_xicaras.jpg'
                },
                {
                    id: '8',
                    name: 'Cafeteira Elétrica Arno 18 Xícaras',
                    brand: 'Arno',
                    category: 'casa',
                    price: 95.00,
                    stock: 22,
                    image: 'assets/images/products/08_cafeteira_eletrica_arno_18_xicaras.jpg'
                },
                {
                    id: '9',
                    name: 'Cafeteira Elétrica Electrolux 18 Xícaras',
                    brand: 'Electrolux',
                    category: 'casa',
                    price: 120.00,
                    stock: 18,
                    image: 'assets/images/products/09_cafeteira_eletrica_electrolux_18_xicaras.jpg'
                },
                {
                    id: '10',
                    name: 'Monitor Sony 24" 75Hz',
                    brand: 'Sony',
                    category: 'eletronicos',
                    price: 380.00,
                    stock: 12,
                    image: 'assets/images/products/10_monitor_sony_24_75hz.jpg'
                },
                {
                    id: '11',
                    name: 'Aspirador Robô Arno Wi-Fi',
                    brand: 'Arno',
                    category: 'casa',
                    price: 520.00,
                    stock: 5,
                    image: 'assets/images/products/11_aspirador_robo_arno_wifi.jpg'
                },
                {
                    id: '12',
                    name: 'Monitor Philips 29" 75Hz',
                    brand: 'Philips',
                    category: 'eletronicos',
                    price: 450.00,
                    stock: 7,
                    image: 'assets/images/products/12_monitor_philips_29_75hz.jpg'
                },
                {
                    id: '13',
                    name: 'Smartphone Samsung Galaxy A54',
                    brand: 'Samsung',
                    category: 'eletronicos',
                    price: 899.00,
                    stock: 35,
                    image: 'assets/images/products/13_smartphone_samsung_galaxy_a54.jpg'
                },
                {
                    id: '14',
                    name: 'Laptop Dell Inspiron 15 3000',
                    brand: 'Dell',
                    category: 'eletronicos',
                    price: 1899.00,
                    stock: 15,
                    image: 'assets/images/products/14_laptop_dell_inspiron_15_3000.jpg'
                },
                {
                    id: '15',
                    name: 'Headphone Sony WH-1000XM4',
                    brand: 'Sony',
                    category: 'eletronicos',
                    price: 1299.00,
                    stock: 20,
                    image: 'assets/images/products/15_headphone_sony_wh_1000xm4.jpg'
                },
                {
                    id: '16',
                    name: 'Tablet Apple iPad Air 5',
                    brand: 'Apple',
                    category: 'eletronicos',
                    price: 2499.00,
                    stock: 8,
                    image: 'assets/images/products/16_tablet_apple_ipad_air_5.jpg'
                },
                {
                    id: '17',
                    name: 'Smartwatch Apple Watch Series 8',
                    brand: 'Apple',
                    category: 'eletronicos',
                    price: 1999.00,
                    stock: 12,
                    image: 'assets/images/products/17_smartwatch_apple_watch_series_8.jpg'
                },
                {
                    id: '18',
                    name: 'Câmera Canon EOS R6 Mark II',
                    brand: 'Canon',
                    category: 'eletronicos',
                    price: 8999.00,
                    stock: 3,
                    image: 'assets/images/products/18_camera_canon_eos_r6_mark_ii.jpg'
                },
                {
                    id: '19',
                    name: 'Console PlayStation 5',
                    brand: 'Sony',
                    category: 'eletronicos',
                    price: 3999.00,
                    stock: 6,
                    image: 'assets/images/products/19_console_playstation_5.jpg'
                },
                {
                    id: '20',
                    name: 'Teclado Mecânico Razer BlackWidow',
                    brand: 'Razer',
                    category: 'eletronicos',
                    price: 299.00,
                    stock: 40,
                    image: 'assets/images/products/20_teclado_mecanico_razer_blackwidow.jpg'
                },
                {
                    id: '21',
                    name: 'Mouse Gaming Logitech G502',
                    brand: 'Logitech',
                    category: 'eletronicos',
                    price: 199.00,
                    stock: 50,
                    image: 'assets/images/products/21_mouse_gaming_logitech_g502.jpg'
                },
                {
                    id: '22',
                    name: 'Webcam Logitech C920 HD',
                    brand: 'Logitech',
                    category: 'eletronicos',
                    price: 399.00,
                    stock: 25,
                    image: 'assets/images/products/22_webcam_logitech_c920_hd.jpg'
                },
                {
                    id: '23',
                    name: 'Roteador Wi-Fi TP-Link Archer AX73',
                    brand: 'TP-Link',
                    category: 'eletronicos',
                    price: 599.00,
                    stock: 18,
                    image: 'assets/images/products/23_roteador_wifi_tp_link_archer_ax73.jpg'
                },
                {
                    id: '24',
                    name: 'SSD Samsung 970 EVO Plus 1TB',
                    brand: 'Samsung',
                    category: 'eletronicos',
                    price: 699.00,
                    stock: 30,
                    image: 'assets/images/products/24_ssd_samsung_970_evo_plus_1tb.jpg'
                },
                {
                    id: '25',
                    name: 'RAM Corsair Vengeance 16GB DDR4',
                    brand: 'Corsair',
                    category: 'eletronicos',
                    price: 299.00,
                    stock: 45,
                    image: 'assets/images/products/25_ram_corsair_vengeance_16gb_ddr4.jpg'
                },
                {
                    id: '26',
                    name: 'Placa Mãe ASUS ROG Strix B550',
                    brand: 'ASUS',
                    category: 'eletronicos',
                    price: 899.00,
                    stock: 12,
                    image: 'assets/images/products/26_placa_mae_asus_rog_strix_b550.jpg'
                },
                {
                    id: '27',
                    name: 'Processador Intel Core i7-12700K',
                    brand: 'Intel',
                    category: 'eletronicos',
                    price: 1999.00,
                    stock: 8,
                    image: 'assets/images/products/27_processador_intel_core_i7_12700k.jpg'
                },
                {
                    id: '28',
                    name: 'Placa de Vídeo NVIDIA RTX 4070',
                    brand: 'NVIDIA',
                    category: 'eletronicos',
                    price: 3999.00,
                    stock: 5,
                    image: 'assets/images/products/28_placa_video_nvidia_rtx_4070.jpg'
                },
                {
                    id: '29',
                    name: 'Fonte Corsair RM850x 850W',
                    brand: 'Corsair',
                    category: 'eletronicos',
                    price: 599.00,
                    stock: 20,
                    image: 'assets/images/products/29_fonte_corsair_rm850x_850w.jpg'
                },
                {
                    id: '30',
                    name: 'Gabinete Corsair 4000D Airflow',
                    brand: 'Corsair',
                    category: 'eletronicos',
                    price: 399.00,
                    stock: 15,
                    image: 'assets/images/products/30_gabinete_corsair_4000d_airflow.jpg'
                }
            ];
        }
        
        // Renderizar tabela de produtos para estoque
        function renderStockProductsTable(products) {
            const tableBody = document.getElementById('stock-products-table');
            if (!tableBody) return;
            
            if (products.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-4 py-8 text-center text-gray-500">
                            <i class="fas fa-box-open text-4xl mb-2"></i>
                            <p>Nenhum produto encontrado</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tableBody.innerHTML = products.map(product => {
                const currentStock = product.stock || product.stock_quantity || 0;
                const stockStatus = getStockStatus(currentStock);
                
                return `
                    <tr class="hover:bg-gray-50" data-product-id="${product.id}">
                        <td class="px-4 py-4">
                            <div class="flex items-center">
                                <img src="${product.image || 'https://via.placeholder.com/50'}" alt="${product.name}" class="w-10 h-10 rounded-lg object-cover mr-3">
                                <div>
                                    <div class="font-medium text-gray-900">${product.name}</div>
                                    <div class="text-sm text-gray-500">${product.brand || 'Sem marca'}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-4 py-4">
                            <span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
                                ${product.category || 'N/A'}
                            </span>
                        </td>
                        <td class="px-4 py-4">
                            <div class="flex items-center">
                                <span class="text-lg font-semibold ${stockStatus.color}">${currentStock}</span>
                                <span class="text-sm text-gray-500 ml-1">unidades</span>
                            </div>
                        </td>
                        <td class="px-4 py-4">
                            <span class="px-2 py-1 text-xs font-medium ${stockStatus.bgColor} ${stockStatus.textColor} rounded-full">
                                ${stockStatus.text}
                            </span>
                        </td>
                        <td class="px-4 py-4">
                            <div class="flex space-x-2">
                                <button onclick="openStockIncreaseForProduct('${product.id}')" 
                                        class="px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded-lg transition-colors duration-200">
                                    <i class="fas fa-plus mr-1"></i>Adicionar
                                </button>
                                <button onclick="viewProductStockDetails('${product.id}')" 
                                        class="px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors duration-200">
                                    <i class="fas fa-eye mr-1"></i>Ver
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        // Obter status do estoque
        function getStockStatus(stock) {
            if (stock === 0) {
                return {
                    text: 'Esgotado',
                    color: 'text-red-600',
                    bgColor: 'bg-red-100',
                    textColor: 'text-red-800'
                };
            } else if (stock < 10) {
                return {
                    text: 'Baixo',
                    color: 'text-orange-600',
                    bgColor: 'bg-orange-100',
                    textColor: 'text-orange-800'
                };
            } else if (stock < 50) {
                return {
                    text: 'Médio',
                    color: 'text-yellow-600',
                    bgColor: 'bg-yellow-100',
                    textColor: 'text-yellow-800'
                };
            } else {
                return {
                    text: 'Alto',
                    color: 'text-green-600',
                    bgColor: 'bg-green-100',
                    textColor: 'text-green-800'
                };
            }
        }
        
        // Configurar filtros de estoque
        function setupStockFilters() {
            const searchInput = document.getElementById('stock-search');
            const categoryFilter = document.getElementById('stock-category-filter');
            
            if (searchInput) {
                searchInput.addEventListener('input', filterStockProducts);
            }
            
            if (categoryFilter) {
                categoryFilter.addEventListener('change', filterStockProducts);
            }
        }
        
        // Filtrar produtos de estoque
        function filterStockProducts() {
            const searchTerm = document.getElementById('stock-search')?.value.toLowerCase() || '';
            const categoryFilter = document.getElementById('stock-category-filter')?.value || '';
            
            const rows = document.querySelectorAll('#stock-products-table tr');
            
            rows.forEach(row => {
                const productName = row.querySelector('td:first-child .font-medium')?.textContent.toLowerCase() || '';
                const productCategory = row.querySelector('td:nth-child(2) span')?.textContent.toLowerCase() || '';
                
                const matchesSearch = productName.includes(searchTerm);
                const matchesCategory = !categoryFilter || productCategory.includes(categoryFilter);
                
                if (matchesSearch && matchesCategory) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Atualizar dados de estoque
        function refreshStockData() {
            console.log('🔄 Atualizando dados de estoque...');
            loadAllProductsForStock();
        }
        
        // Abrir modal de aumento de estoque para produto específico
        function openStockIncreaseForProduct(productId) {
            console.log('📦 Abrindo aumento de estoque para produto:', productId);
            
            // Buscar produto na tabela atual
            const productRow = document.querySelector(`tr[data-product-id="${productId}"]`);
            if (!productRow) {
                showStockErrorMessage('Produto não encontrado');
                return;
            }
            
            // Extrair dados do produto da tabela
            const productName = productRow.querySelector('.font-medium')?.textContent || 'Produto';
            const currentStock = productRow.querySelector('.text-lg')?.textContent || '0';
            const productImage = productRow.querySelector('img')?.src || 'https://via.placeholder.com/50';
            
            // Configurar modal de aumento de estoque
            const productInfo = document.getElementById('stock-product-info');
            if (productInfo) {
                productInfo.innerHTML = `
                    <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg">
                        <img src="${productImage}" alt="${productName}" class="w-16 h-16 rounded-lg object-cover">
                        <div>
                            <h4 class="font-semibold text-gray-900">${productName}</h4>
                            <p class="text-sm text-gray-500">Estoque atual: <span class="font-medium">${currentStock} unidades</span></p>
                        </div>
                    </div>
                `;
            }
            
            // Atualizar campos do modal
            document.getElementById('current-stock').textContent = currentStock;
            document.getElementById('stock-increase-amount').value = '10';
            updateStockPreview();
            
            // Fechar modal de gerenciamento e abrir modal de aumento
            document.getElementById('stock-management-modal').classList.add('hidden');
            document.getElementById('stock-increase-modal').classList.remove('hidden');
            
            // Armazenar ID do produto para uso posterior
            currentProductForStock = {
                id: productId,
                name: productName,
                currentStock: parseInt(currentStock),
                stock: parseInt(currentStock)
            };
        }
        
        // Ver detalhes do estoque do produto
        function viewProductStockDetails(productId) {
            console.log('👁️ Visualizando detalhes do estoque do produto:', productId);
            
            // Fechar modal de gerenciador de estoque primeiro
            const stockModal = document.getElementById('stock-management-modal');
            if (stockModal && !stockModal.classList.contains('hidden')) {
                console.log('🔍 Fechando modal de gerenciador de estoque...');
                stockModal.classList.add('hidden');
            }
            
            // Usar o modal moderno de detalhes do produto
            viewProductDetails(productId);
        }
        
        // Mostrar mensagem de erro no estoque
        function showStockErrorMessage(message) {
            const tableBody = document.getElementById('stock-products-table');
            if (tableBody) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-4 py-8 text-center text-red-500">
                            <i class="fas fa-exclamation-triangle text-4xl mb-2"></i>
                            <p>${message}</p>
                        </td>
                    </tr>
                `;
            }
        }
        
        // Mostrar mensagem de sucesso no estoque
        function showStockSuccessMessage(message) {
            // Criar modal de sucesso
            const successModal = document.createElement('div');
            successModal.className = 'fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-50 flex items-center justify-center';
            successModal.innerHTML = `
                <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full mx-4 animate-slideIn">
                    <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-green-50 to-blue-50 relative">
                        <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-blue-500 rounded-t-3xl"></div>
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-1">Sucesso!</h3>
                                <p class="text-sm text-gray-500">Estoque atualizado com sucesso</p>
                            </div>
                            <button onclick="this.closest('.fixed').remove()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-green-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-green-600">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-check text-green-600 text-2xl"></i>
                            </div>
                            <p class="text-gray-700 whitespace-pre-line">${message}</p>
                        </div>
                        <div class="mt-6 flex justify-center">
                            <button onclick="this.closest('.fixed').remove()" class="px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors duration-300">
                                <i class="fas fa-check mr-2"></i>Entendi
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(successModal);
            
            // Auto-remover após 5 segundos
            setTimeout(() => {
                if (successModal.parentNode) {
                    successModal.remove();
                }
            }, 5000);
        }
        
        // Função para gerenciar upload de imagem do produto
        function handleProductImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validar tipo de arquivo
            if (!file.type.startsWith('image/')) {
                alert('Por favor, selecione apenas arquivos de imagem!');
                return;
            }
            
            // Validar tamanho (máximo 5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert('A imagem deve ter no máximo 5MB!');
                return;
            }
            
            // Converter para base64
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Image = e.target.result;
                
                // Mostrar preview
                const preview = document.getElementById('product-image-preview');
                const previewImg = document.getElementById('product-image-preview-img');
                const removeBtn = document.getElementById('remove-product-image-btn');
                
                previewImg.src = base64Image;
                preview.classList.remove('hidden');
                removeBtn.classList.remove('hidden');
            };
            
            reader.readAsDataURL(file);
        }
        
        // Função para remover imagem do produto
        function removeProductImage() {
            const preview = document.getElementById('product-image-preview');
            const removeBtn = document.getElementById('remove-product-image-btn');
            const input = document.getElementById('product-image-input');
            
            preview.classList.add('hidden');
            removeBtn.classList.add('hidden');
            input.value = '';
        }
        
        // Função para limpar preview da imagem
        function clearProductImagePreview() {
            const preview = document.getElementById('product-image-preview');
            const removeBtn = document.getElementById('remove-product-image-btn');
            const input = document.getElementById('product-image-input');
            
            preview.classList.add('hidden');
            removeBtn.classList.add('hidden');
            input.value = '';
        }
        
        // Função para adicionar produto ao sistema global do ecommerce
        function addProductToGlobalSystem(product) {
            console.log('🌐 Adicionando produto ao sistema global:', product);
            
            try {
                // Carregar produtos globais existentes
                let globalProducts = JSON.parse(localStorage.getItem('ecommerce_products') || '[]');
                
                // Verificar se o produto já existe (por ID)
                const existingIndex = globalProducts.findIndex(p => p.id === product.id);
                
                if (existingIndex >= 0) {
                    // Atualizar produto existente
                    globalProducts[existingIndex] = {
                        ...globalProducts[existingIndex],
                        ...product,
                        updatedAt: new Date().toISOString()
                    };
                    console.log('🔄 Produto atualizado no sistema global');
                } else {
                    // Adicionar novo produto
                    const globalProduct = {
                        ...product,
                        // Campos específicos do ecommerce
                        slug: product.name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, ''),
                        isActive: true,
                        isAvailable: product.stock > 0,
                        vendor: 'Vendedor Local',
                        createdAt: product.createdAt,
                        updatedAt: new Date().toISOString(),
                        // Metadados para o ecommerce
                        seo: {
                            title: product.name,
                            description: product.description || `Produto ${product.name} da categoria ${product.category}`,
                            keywords: [product.name, product.brand, product.category].filter(Boolean)
                        },
                        // Dados de vendas
                        sales: 0,
                        views: 0,
                        rating: 0,
                        reviews: []
                    };
                    
                    globalProducts.push(globalProduct);
                    console.log('➕ Produto adicionado ao sistema global');
                }
                
                // Salvar no localStorage
                localStorage.setItem('ecommerce_products', JSON.stringify(globalProducts));
                console.log('💾 Produtos globais salvos:', globalProducts.length);
                
                // Notificar outras páginas sobre a atualização
                window.dispatchEvent(new CustomEvent('productsUpdated', {
                    detail: { products: globalProducts }
                }));
                
            } catch (error) {
                console.error('❌ Erro ao adicionar produto ao sistema global:', error);
            }
        }
        
        // Função para atualizar produto no sistema global
        function updateProductInGlobalSystem(product) {
            console.log('🔄 Atualizando produto no sistema global:', product);
            
            try {
                // Carregar produtos globais existentes
                let globalProducts = JSON.parse(localStorage.getItem('ecommerce_products') || '[]');
                
                // Encontrar o produto pelo ID
                const productIndex = globalProducts.findIndex(p => p.id === product.id);
                
                if (productIndex >= 0) {
                    // Atualizar produto existente
                    globalProducts[productIndex] = {
                        ...globalProducts[productIndex],
                        ...product,
                        isAvailable: product.stock > 0,
                        updatedAt: new Date().toISOString()
                    };
                    
                    // Salvar no localStorage
                    localStorage.setItem('ecommerce_products', JSON.stringify(globalProducts));
                    
                    // Notificar outras páginas sobre a atualização
                    window.dispatchEvent(new CustomEvent('productsUpdated', {
                        detail: { products: globalProducts }
                    }));
                    
                    console.log('✅ Produto atualizado no sistema global');
                } else {
                    console.log('⚠️ Produto não encontrado no sistema global, adicionando...');
                    addProductToGlobalSystem(product);
                }
                
            } catch (error) {
                console.error('❌ Erro ao atualizar produto no sistema global:', error);
            }
        }
        
        // Função para remover produto do sistema global
        function removeProductFromGlobalSystem(productId) {
            console.log('🗑️ Removendo produto do sistema global:', productId);
            
            try {
                // Carregar produtos globais existentes
                let globalProducts = JSON.parse(localStorage.getItem('ecommerce_products') || '[]');
                
                // Filtrar produto removido
                const updatedProducts = globalProducts.filter(p => p.id !== productId);
                
                // Salvar no localStorage
                localStorage.setItem('ecommerce_products', JSON.stringify(updatedProducts));
                
                // Notificar outras páginas sobre a atualização
                window.dispatchEvent(new CustomEvent('productsUpdated', {
                    detail: { products: updatedProducts }
                }));
                
                console.log('✅ Produto removido do sistema global');
                
            } catch (error) {
                console.error('❌ Erro ao remover produto do sistema global:', error);
            }
        }

        // Função para fechar modal de edição
        function closeEditProductModal() {
            console.log('❌ Fechando modal de edição');
            document.getElementById('edit-product-modal').classList.add('hidden');
            // Limpar formulário
            document.getElementById('edit-product-form').reset();
            window.currentEditingProductId = null;
        }

        // Função para salvar produto editado
        function saveEditedProduct(event) {
            event.preventDefault();
            console.log('💾 Salvando produto editado');
            
            const productId = window.currentEditingProductId;
            if (!productId) {
                alert('Erro: ID do produto não encontrado!');
                return;
            }
            
            // Obter dados do formulário
            const name = document.getElementById('edit-product-name').value.trim();
            const price = parseFloat(document.getElementById('edit-product-price').value);
            const stock = parseInt(document.getElementById('edit-product-stock').value);
            const category = document.getElementById('edit-product-category').value;
            const description = document.getElementById('edit-product-description').value.trim();
            const brand = document.getElementById('edit-product-brand').value.trim();
            
            console.log('📝 Dados do formulário:', { name, price, stock, category, description, brand });
            
            // Validar dados
            if (!name || price < 0 || stock < 0) {
                alert('Por favor, preencha todos os campos corretamente!');
                return;
            }
            
            // Encontrar e atualizar produto em vendorData.myProducts
            let productIndex = vendorData.myProducts.findIndex(p => p.id === productId);
            
            if (productIndex === -1) {
                // Se não encontrar em myProducts, buscar em apiProducts e adicionar
                const apiProduct = apiProducts.find(p => p.id === productId);
                if (apiProduct) {
                    // Criar novo produto baseado na API
                    const newProduct = {
                        id: productId,
                        name: name,
                        price: price,
                        stock: stock,
                        category: category,
                        description: description,
                        brand: brand,
                        sales: 0,
                        image: apiProduct.image || 'assets/images/products/placeholder.jpg',
                        isActive: true
                    };
                    
                    vendorData.myProducts.push(newProduct);
                    productIndex = vendorData.myProducts.length - 1;
                    console.log('➕ Produto adicionado da API:', newProduct);
                } else {
                    alert('Produto não encontrado!');
                    return;
                }
            } else {
                // Atualizar produto existente
                vendorData.myProducts[productIndex] = {
                    ...vendorData.myProducts[productIndex],
                    name: name,
                    price: price,
                    stock: stock,
                    category: category,
                    description: description,
                    brand: brand
                };
                console.log('✅ Produto atualizado:', vendorData.myProducts[productIndex]);
            }
            
            // Salvar dados
            saveVendorData();
            
            // Atualizar produto no sistema global
            updateProductInGlobalSystem(product);
            
            // Atualizar tabelas
            renderProductManagementTable();
            renderMyProductsTable();
            
            // Fechar modal
            closeEditProductModal();
            
            showSuccessMessage(`Produto "${name}" atualizado com sucesso!`);
        }

        function openSalesReport() {
            // Mostrar modal de relatórios moderno
            const modal = document.getElementById('sales-report-modal');
            modal.classList.remove('hidden');
            
            // Atualizar dados do relatório
            updateSalesReportData();
            
            // Remover event listeners anteriores para evitar duplicação
            modal.removeEventListener('click', handleSalesReportModalClick);
            
            // Configurar event listener para fechar clicando fora
            modal.addEventListener('click', handleSalesReportModalClick);
        }
        
        function handleSalesReportModalClick(e) {
            if (e.target === e.currentTarget) {
                console.log('🖱️ Fechando modal de relatórios clicando fora');
                closeSalesReportModal();
            }
        }
        
        function updateSalesReportData() {
            console.log('📊 Atualizando dados do relatório de vendas...');
            
            // PEGAR OS VALORES EXATOS DA SEÇÃO PERFORMANCE ANALYTICS
            let monthlySales, productsSold, commission, rating;
            
            // 1. Buscar valores da seção Performance Analytics (KPI cards)
            const performanceSection = document.querySelector('.performance-analytics-section');
            if (performanceSection) {
                console.log('🎯 Encontrou seção Performance Analytics, extraindo valores...');
                
                // Buscar cards de KPI dentro da seção Performance Analytics
                const kpiCards = performanceSection.querySelectorAll('.kpi-card');
                
                kpiCards.forEach((card, index) => {
                    const valueElement = card.querySelector('.kpi-value');
                    if (valueElement) {
                        const value = valueElement.textContent;
                        console.log(`📊 KPI ${index}:`, value);
                        
                        switch(index) {
                            case 0: // Vendas do Mês
                                if (value.includes('R$')) {
                                    const salesText = value.replace('R$ ', '').replace(/\./g, '').replace(',', '.');
                                    monthlySales = parseFloat(salesText) || 0;
                                    console.log('✅ Vendas extraídas da Performance Analytics:', monthlySales);
                                }
                                break;
                            case 1: // Produtos Vendidos
                                productsSold = parseInt(value) || 0;
                                console.log('✅ Produtos vendidos extraídos da Performance Analytics:', productsSold);
                                break;
                            case 2: // Comissão
                                if (value.includes('R$')) {
                                    const commissionText = value.replace('R$ ', '').replace(/\./g, '').replace(',', '.');
                                    commission = parseFloat(commissionText) || 0;
                                    console.log('✅ Comissão extraída da Performance Analytics:', commission);
                                }
                                break;
                            case 3: // Avaliação
                                rating = parseFloat(value.replace(',', '.')) || 0;
                                console.log('✅ Avaliação extraída da Performance Analytics:', rating);
                                break;
                        }
                    }
                });
            }
            
            // 2. Se não conseguiu pegar da Performance Analytics, tentar outros seletores
            if (!monthlySales && !productsSold && !commission && !rating) {
                console.log('⚠️ Não encontrou Performance Analytics, tentando outros seletores...');
                
                // Tentar seletores alternativos
                const altSales = document.querySelector('#monthly-sales, .smart-panel-sales, [data-sales]');
                const altProducts = document.querySelector('#products-sold, [data-products]');
                const altCommission = document.querySelector('#commission, [data-commission]');
                const altRating = document.querySelector('#rating, [data-rating]');
                
                if (altSales) {
                    const salesText = altSales.textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.');
                    monthlySales = parseFloat(salesText) || 0;
                }
                
                if (altProducts) {
                    productsSold = parseInt(altProducts.textContent) || 0;
                }
                
                if (altCommission) {
                    const commissionText = altCommission.textContent.replace('R$ ', '').replace(/\./g, '').replace(',', '.');
                    commission = parseFloat(commissionText) || 0;
                }
                
                if (altRating) {
                    rating = parseFloat(altRating.textContent.replace(',', '.')) || 0;
                }
            }
            
            // 3. Se ainda não conseguiu, usar dados demo ou zerados
            if (!monthlySales && !productsSold && !commission && !rating) {
                if (isDemoAccount()) {
                    console.log('🏢 Usando dados demo como fallback');
                    const demoData = generateRealisticDemoData();
                    monthlySales = demoData.monthlySales;
                    productsSold = demoData.productsSold;
                    commission = demoData.commission;
                    rating = demoData.rating;
                } else {
                    console.log('👤 Usando dados zerados como fallback');
                    monthlySales = 0;
                    productsSold = 0;
                    commission = 0;
                    rating = 0;
                }
            }
            
            // Atualizar estatísticas do relatório
            const monthlySalesEl = document.getElementById('report-monthly-sales');
            const productsSoldEl = document.getElementById('report-products-sold');
            const commissionEl = document.getElementById('report-commission');
            const ratingEl = document.getElementById('report-rating');
            
            if (monthlySalesEl) {
                monthlySalesEl.textContent = `R$ ${monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                console.log('✅ Vendas mensais sincronizadas com Performance Analytics:', monthlySales);
            }
            
            if (productsSoldEl) {
                productsSoldEl.textContent = productsSold;
                console.log('✅ Produtos vendidos sincronizados com Performance Analytics:', productsSold);
            }
            
            if (commissionEl) {
                commissionEl.textContent = `R$ ${commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                console.log('✅ Comissão sincronizada com Performance Analytics:', commission);
            }
            
            if (ratingEl) {
                ratingEl.textContent = rating.toFixed(1);
                console.log('✅ Avaliação sincronizada com Performance Analytics:', rating);
            }
            
            // Atualizar gráfico de vendas baseado nos valores reais
            updateSalesChart(monthlySales);
            
            console.log('✅ Dados do relatório sincronizados com Performance Analytics');
        }
        
        function updateSalesChart(monthlySales = 0) {
            console.log('📈 Atualizando gráfico de vendas baseado nas vendas mensais:', monthlySales);
            
            // Gerar dados baseados nas vendas mensais reais
            let salesData;
            
            if (monthlySales > 0) {
                console.log('🏢 Gerando gráfico baseado nas vendas reais');
                // Calcular vendas diárias baseadas nas vendas mensais
                const dailyAverage = monthlySales / 30; // Média diária
                const baseSales = dailyAverage * 0.8; // 80% da média como base
                
                // Gerar variação realista dos últimos 7 dias
                salesData = [
                    { day: 'Seg', sales: Math.floor(baseSales * (0.7 + Math.random() * 0.6)) },
                    { day: 'Ter', sales: Math.floor(baseSales * (0.8 + Math.random() * 0.4)) },
                    { day: 'Qua', sales: Math.floor(baseSales * (0.9 + Math.random() * 0.2)) },
                    { day: 'Qui', sales: Math.floor(baseSales * (0.95 + Math.random() * 0.1)) },
                    { day: 'Sex', sales: Math.floor(baseSales * (1.1 + Math.random() * 0.3)) },
                    { day: 'Sáb', sales: Math.floor(baseSales * (0.6 + Math.random() * 0.4)) },
                    { day: 'Dom', sales: Math.floor(baseSales * (0.5 + Math.random() * 0.3)) }
                ];
            } else {
                console.log('👤 Gerando gráfico zerado para conta real');
                // Dados zerados para conta real
                salesData = [
                    { day: 'Seg', sales: 0 },
                    { day: 'Ter', sales: 0 },
                    { day: 'Qua', sales: 0 },
                    { day: 'Qui', sales: 0 },
                    { day: 'Sex', sales: 0 },
                    { day: 'Sáb', sales: 0 },
                    { day: 'Dom', sales: 0 }
                ];
            }
            
            const chartContainer = document.getElementById('sales-chart');
            if (chartContainer) {
                const maxSales = Math.max(...salesData.map(item => item.sales));
                const maxHeight = 200; // Altura máxima do gráfico
                
                chartContainer.innerHTML = salesData.map(item => {
                    const height = maxSales > 0 ? (item.sales / maxSales) * maxHeight : 0;
                    const color = monthlySales > 0 ? 'bg-gradient-to-t from-blue-500 to-blue-400' : 'bg-gray-300';
                    
                    return `
                        <div class="flex flex-col items-center space-y-2">
                            <div class="w-8 ${color} rounded-t transition-all duration-500" style="height: ${height}px"></div>
                            <span class="text-xs text-gray-600">${item.day}</span>
                            <span class="text-xs font-semibold text-gray-800">R$ ${item.sales.toLocaleString('pt-BR')}</span>
                        </div>
                    `;
                }).join('');
                
                console.log('✅ Gráfico de vendas atualizado com dados reais:', salesData);
            }
        }

        // Carregar produtos da API
        async function loadApiProducts() {
            console.log('🔄 Carregando produtos da API para gestão...');
            
            try {
                // Tentar carregar da API primeiro
                if (window.productsAPI) {
                    try {
                        console.log('📡 API disponível para gestão, carregando produtos...');
                        const response = await window.productsAPI.getProducts();
                        
                        if (response && response.products && response.products.length > 0) {
                            apiProducts = response.products.slice(0, 30); // Limitar a 30 produtos
                            console.log('✅ Produtos carregados da API para gestão:', apiProducts.length);
                            console.log('📦 Primeiro produto da gestão:', apiProducts[0]);
                        } else {
                            throw new Error('API retornou dados vazios para gestão');
                        }
                    } catch (apiError) {
                        console.log('⚠️ Erro na API para gestão, usando produtos hardcoded:', apiError);
                        apiProducts = getHardcodedProducts();
                    }
                } else {
                    console.log('⚠️ API não disponível para gestão, usando produtos hardcoded');
                    apiProducts = getHardcodedProducts();
                }
                
                if (apiProducts.length === 0) {
                    throw new Error('Nenhum produto encontrado para gestão');
                }
                
                filteredProducts = [...apiProducts];
                renderProductManagementTable();
                setupProductManagementFilters();
                
            } catch (error) {
                console.error('❌ Erro ao carregar produtos para gestão:', error);
                // Usar produtos hardcoded como fallback
                console.log('🔄 Usando produtos hardcoded como fallback para gestão...');
                apiProducts = getHardcodedProducts();
                filteredProducts = [...apiProducts];
                renderProductManagementTable();
                setupProductManagementFilters();
            }
        }

        // Produtos hardcoded como fallback - usando os mesmos 30 produtos do sistema
        function getHardcodedProducts() {
            return getLocalProducts(); // Usar os mesmos 30 produtos do Gerenciador de Estoque
        }


        // Renderizar tabela de gestão de produtos
        function renderProductManagementTable() {
            console.log('🔄 Renderizando tabela de gestão de produtos...');
            
            // Garantir que myProducts seja um array
            if (!Array.isArray(vendorData.myProducts)) {
                vendorData.myProducts = [];
            }
            
            console.log('📦 filteredProducts:', filteredProducts?.length || 0);
            console.log('📦 vendorData.myProducts:', vendorData.myProducts?.length || 0);
            
            const tableBody = document.getElementById('product-management-table');
            
            // Combinar produtos da API com produtos locais do vendedor
            const allProducts = [...(filteredProducts || []), ...(vendorData.myProducts || [])];
            console.log('📦 Total de produtos combinados:', allProducts.length);
            
            if (allProducts.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-12 text-center">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-box-open text-gray-400 text-4xl mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-900 mb-2">Nenhum produto encontrado</h3>
                                <p class="text-gray-500">Tente ajustar os filtros de busca</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = allProducts.map(product => {
                // Processar dados do produto corretamente
                const productName = product.title || product.name || product.slug || 'Produto sem nome';
                let productPrice = Number(product.price) || 0;
                const productStock = Number(product.stock) || 0;
                const productBrand = product.brand || 'Marca não informada';
                const productCategory = product.category || 'tecnologia';
                // Mapear imagem baseada no nome do produto
                let productImage = 'assets/images/products/placeholder.jpg';
                const productNameLower = productName.toLowerCase();
                
                // Se o produto tem imagem própria (produto criado localmente)
                if (product.image && product.image !== 'assets/images/products/placeholder.jpg') {
                    productImage = product.image;
                } else {
                    // Mapear imagem baseada no nome do produto
                    if (productNameLower.includes('smart tv') && productNameLower.includes('lenovo')) {
                    productImage = 'assets/images/products/01_smart_tv_lenovo_55_4k_uhd.jpg';
                } else if (productNameLower.includes('fone') && productNameLower.includes('jbl')) {
                    productImage = 'assets/images/products/02_fone_bluetooth_jbl_cancelamento_ruido.jpg';
                } else if (productNameLower.includes('aspirador') && (productNameLower.includes('britania') || productNameLower.includes('britânia'))) {
                    productImage = 'assets/images/products/03_aspirador_robo_britania_wifi.jpg';
                } else if (productNameLower.includes('fone') && productNameLower.includes('dell')) {
                    productImage = 'assets/images/products/04_fone_bluetooth_dell_cancelamento_ruido.jpg';
                } else if (productNameLower.includes('aspirador') && productNameLower.includes('mondial')) {
                    productImage = 'assets/images/products/05_aspirador_robo_mondial_wifi.jpg';
                } else if (productNameLower.includes('monitor') && productNameLower.includes('dell')) {
                    productImage = 'assets/images/products/06_monitor_dell_24_75hz.jpg';
                } else if (productNameLower.includes('cafeteira') && productNameLower.includes('mondial')) {
                    productImage = 'assets/images/products/07_cafeteira_eletrica_mondial_18_xicaras.jpg';
                } else if (productNameLower.includes('cafeteira') && productNameLower.includes('arno')) {
                    productImage = 'assets/images/products/08_cafeteira_eletrica_arno_18_xicaras.jpg';
                } else if (productNameLower.includes('cafeteira') && productNameLower.includes('electrolux')) {
                    productImage = 'assets/images/products/09_cafeteira_eletrica_electrolux_18_xicaras.jpg';
                } else if (productNameLower.includes('monitor') && productNameLower.includes('sony')) {
                    productImage = 'assets/images/products/10_monitor_sony_24_75hz.jpg';
                } else if (productNameLower.includes('aspirador') && productNameLower.includes('arno')) {
                    productImage = 'assets/images/products/11_aspirador_robo_arno_wifi.jpg';
                } else if (productNameLower.includes('monitor') && productNameLower.includes('philips')) {
                    productImage = 'assets/images/products/12_monitor_philips_29_75hz.jpg';
                } else if (productNameLower.includes('smartphone') && productNameLower.includes('samsung')) {
                    productImage = 'assets/images/products/13_smartphone_samsung_galaxy_a54.jpg';
                } else if (productNameLower.includes('laptop') && productNameLower.includes('dell')) {
                    productImage = 'assets/images/products/14_laptop_dell_inspiron_15_3000.jpg';
                } else if (productNameLower.includes('headphone') && productNameLower.includes('sony')) {
                    productImage = 'assets/images/products/15_headphone_sony_wh_1000xm4.jpg';
                } else if (productNameLower.includes('tablet') && productNameLower.includes('apple')) {
                    productImage = 'assets/images/products/16_tablet_apple_ipad_air_5.jpg';
                } else if (productNameLower.includes('smartwatch') && productNameLower.includes('apple')) {
                    productImage = 'assets/images/products/17_smartwatch_apple_watch_series_8.jpg';
                } else if (productNameLower.includes('camera') && productNameLower.includes('canon')) {
                    productImage = 'assets/images/products/18_camera_canon_eos_r6_mark_ii.jpg';
                } else if (productNameLower.includes('console') && productNameLower.includes('playstation')) {
                    productImage = 'assets/images/products/19_console_playstation_5.jpg';
                } else if (productNameLower.includes('teclado') && productNameLower.includes('razer')) {
                    productImage = 'assets/images/products/20_teclado_mecanico_razer_blackwidow.jpg';
                } else if (productNameLower.includes('mouse') && productNameLower.includes('logitech')) {
                    productImage = 'assets/images/products/21_mouse_gaming_logitech_g502.jpg';
                } else if (productNameLower.includes('webcam') && productNameLower.includes('logitech')) {
                    productImage = 'assets/images/products/22_webcam_logitech_c920_hd.jpg';
                } else if (productNameLower.includes('roteador') && productNameLower.includes('tp-link')) {
                    productImage = 'assets/images/products/23_roteador_wifi_tp_link_archer_ax73.jpg';
                } else if (productNameLower.includes('ssd') && productNameLower.includes('samsung')) {
                    productImage = 'assets/images/products/24_ssd_samsung_970_evo_plus_1tb.jpg';
                } else if (productNameLower.includes('ram') && productNameLower.includes('corsair')) {
                    productImage = 'assets/images/products/25_ram_corsair_vengeance_16gb_ddr4.jpg';
                } else if (productNameLower.includes('placa') && productNameLower.includes('asus')) {
                    productImage = 'assets/images/products/26_placa_mae_asus_rog_strix_b550.jpg';
                } else if (productNameLower.includes('processador') && productNameLower.includes('intel')) {
                    productImage = 'assets/images/products/27_processador_intel_core_i7_12700k.jpg';
                } else if (productNameLower.includes('placa') && productNameLower.includes('nvidia')) {
                    productImage = 'assets/images/products/28_placa_video_nvidia_rtx_4070.jpg';
                } else if (productNameLower.includes('fonte') && productNameLower.includes('corsair')) {
                    productImage = 'assets/images/products/29_fonte_corsair_rm850x_850w.jpg';
                } else if (productNameLower.includes('gabinete') && productNameLower.includes('corsair')) {
                    productImage = 'assets/images/products/30_gabinete_corsair_4000d_airflow.jpg';
                }
                }
                
                console.log('🖼️ Imagem mapeada para', productName, ':', productImage);
                
                // Se o preço for 0, gerar um preço baseado no nome do produto
                if (productPrice === 0) {
                    const productNameLower = productName.toLowerCase();
                    if (productNameLower.includes('tv') || productNameLower.includes('smart')) {
                        productPrice = Math.floor(Math.random() * 2000) + 1500; // TVs: R$ 1.500-3.500
                    } else if (productNameLower.includes('fone') || productNameLower.includes('bluetooth')) {
                        productPrice = Math.floor(Math.random() * 500) + 200; // Fones: R$ 200-700
                    } else if (productNameLower.includes('monitor')) {
                        productPrice = Math.floor(Math.random() * 1000) + 800; // Monitores: R$ 800-1.800
                    } else if (productNameLower.includes('cafeteira')) {
                        productPrice = Math.floor(Math.random() * 300) + 150; // Cafeteiras: R$ 150-450
                    } else if (productNameLower.includes('aspirador')) {
                        productPrice = Math.floor(Math.random() * 800) + 400; // Aspiradores: R$ 400-1.200
                    } else {
                        productPrice = Math.floor(Math.random() * 1000) + 200; // Outros: R$ 200-1.200
                    }
                }
                
                console.log('💰 Produto:', productName, 'Preço:', productPrice, 'Estoque:', productStock);
                
                return `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4">
                        <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden">
                            <img src="${productImage}" alt="${productName}" 
                                 class="w-full h-full object-cover rounded-lg"
                                 onerror="this.onerror=null; this.src='assets/images/products/placeholder.jpg';">
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="min-w-0 flex-1">
                            <div class="text-sm font-medium text-gray-900 truncate">${productName}</div>
                            <div class="text-sm text-gray-500">${productBrand}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                            ${getCategoryDisplayName(productCategory)}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        R$ ${productPrice.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="flex items-center">
                            <span class="font-medium">${productStock}</span>
                            <span class="ml-1 text-xs text-gray-500">unidades</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 text-sm font-medium">
                        <div class="flex space-x-2">
                            <button onclick="viewProductDetails('${product.id}')" 
                                    class="text-blue-600 hover:text-blue-900 transition-colors duration-200">
                                <i class="fas fa-eye mr-1"></i>Ver
                            </button>
                            <!-- Botões Editar e Excluir removidos conforme especificação - funcionalidades fora do escopo -->
                            <button onclick="openStockIncrease('${product.id}')" 
                                    class="text-yellow-600 hover:text-yellow-900 transition-colors duration-200">
                                <i class="fas fa-plus mr-1"></i>Adicionar Estoque
                            </button>
                        </div>
                    </td>
                </tr>
                `;
            }).join('');
        }

        // Obter nome de exibição da categoria
        function getCategoryDisplayName(category) {
            const categories = {
                'smartphones': 'Smartphones',
                'notebooks': 'Notebooks',
                'tablets': 'Tablets',
                'acessorios': 'Acessórios',
                'eletronicos': 'Eletrônicos',
                'casa': 'Casa e Jardim',
                'beleza': 'Beleza',
                'esportes': 'Esportes',
                'brinquedos': 'Brinquedos',
                'automotivo': 'Automotivo',
                'tecnologia': 'Tecnologia'
            };
            return categories[category] || category;
        }

        // Configurar filtros de gestão de produtos
        function setupProductManagementFilters() {
            const searchInput = document.getElementById('product-search');
            const categoryFilter = document.getElementById('category-filter');
            const sortFilter = document.getElementById('sort-filter');

            // Filtro de busca
            searchInput.addEventListener('input', function() {
                filterProducts();
            });

            // Filtro de categoria
            categoryFilter.addEventListener('change', function() {
                filterProducts();
            });

            // Filtro de ordenação
            sortFilter.addEventListener('change', function() {
                sortProducts();
            });
        }

        // Filtrar produtos
        function filterProducts() {
            const searchTerm = document.getElementById('product-search').value.toLowerCase();
            const categoryFilter = document.getElementById('category-filter').value;

            filteredProducts = apiProducts.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) ||
                                   product.description.toLowerCase().includes(searchTerm) ||
                                   (product.brand && product.brand.toLowerCase().includes(searchTerm));
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                
                return matchesSearch && matchesCategory;
            });

            sortProducts();
        }

        // Ordenar produtos
        function sortProducts() {
            const sortBy = document.getElementById('sort-filter').value;
            
            filteredProducts.sort((a, b) => {
                switch(sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'price':
                        return a.price - b.price;
                    case 'stock':
                        return a.stock - b.stock;
                    default:
                        return 0;
                }
            });

            renderProductManagementTable();
        }

        function openProfile() {
            // Mostrar modal de perfil moderno
            const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            const vendorData = JSON.parse(localStorage.getItem('vendor_data') || '{}');
            
            const modal = document.getElementById('profile-modal');
            modal.classList.remove('hidden');
            
            // Preencher dados do perfil
            document.getElementById('profile-name').textContent = `${userData.firstName || 'Não informado'} ${userData.lastName || 'Não informado'}`;
            document.getElementById('profile-email').textContent = userData.email || 'Não informado';
            document.getElementById('profile-type').textContent = isDemoUser() ? 'Vendedor (Demonstração)' : 'Vendedor';
            document.getElementById('profile-registration').textContent = userData.timestamp ? new Date(userData.timestamp).toLocaleDateString('pt-BR') : 'Não informado';
            
            // Carregar foto de perfil
            loadProfilePhoto();
            
            // Mostrar banner de demonstração apenas para usuários demo
            const demoNotice = document.getElementById('demo-notice-modal');
            if (demoNotice) {
                demoNotice.style.display = isDemoUser() ? 'block' : 'none';
            }
            
            // Estatísticas do vendedor
            document.getElementById('profile-total-sales').textContent = vendorData.monthlySales || 0;
            document.getElementById('profile-products-sold').textContent = vendorData.productsSold || 0;
            document.getElementById('profile-commission').textContent = `R$ ${(vendorData.commission || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('profile-rating').textContent = vendorData.rating || '0.0';
            
            // Remover event listeners anteriores para evitar duplicação
            modal.removeEventListener('click', handleProfileModalClick);
            
            // Configurar event listener para fechar clicando fora
            modal.addEventListener('click', handleProfileModalClick);
        }
        
        function handleProfileModalClick(e) {
            if (e.target === e.currentTarget) {
                console.log('🖱️ Fechando modal de perfil clicando fora');
                closeProfileModal();
            }
        }
        
        // Funções do modal de exclusão de conta
        function openDeleteAccountModal() {
            console.log('🗑️ Abrindo modal de exclusão de conta...');
            const modal = document.getElementById('delete-account-modal');
            modal.classList.remove('hidden');
            
            // Remover event listeners anteriores para evitar duplicação
            modal.removeEventListener('click', handleDeleteAccountModalClick);
            
            // Configurar event listener para fechar clicando fora
            modal.addEventListener('click', handleDeleteAccountModalClick);
        }
        
        function handleDeleteAccountModalClick(e) {
            if (e.target === e.currentTarget) {
                console.log('🖱️ Fechando modal de exclusão clicando fora');
                closeDeleteAccountModal();
            }
        }

        function closeDeleteAccountModal() {
            console.log('❌ Fechando modal de exclusão de conta...');
            document.getElementById('delete-account-modal').classList.add('hidden');
        }

        function confirmDeleteAccount() {
            console.log('🗑️ Confirmando exclusão de conta...');
            
            // Segunda confirmação para garantir que o usuário realmente quer excluir
            const finalConfirmation = confirm(
                'ATENÇÃO: Esta ação é irreversível!\n\n' +
                'Tem certeza absoluta que deseja excluir sua conta?\n\n' +
                'Todos os seus dados serão perdidos permanentemente.'
            );
            
            if (!finalConfirmation) {
                console.log('❌ Exclusão cancelada pelo usuário');
                return;
            }
            
            // Excluir todos os dados do usuário
            console.log('🗑️ Excluindo dados do usuário...');
            
            // Remover dados do usuário atual
            localStorage.removeItem('e2e_current_user');
            localStorage.removeItem('user');
            
            // Remover dados relacionados ao usuário
            localStorage.removeItem('user_orders');
            localStorage.removeItem('user_favorites');
            localStorage.removeItem('user_reviews');
            localStorage.removeItem('cart');
            localStorage.removeItem('user_favorites');
            
            // Remover dados específicos de vendedor
            localStorage.removeItem('vendor_data');
            
            console.log('✅ Dados do usuário excluídos com sucesso');
            
            // Mostrar mensagem de confirmação
            showSuccessMessage('Conta excluída com sucesso!');
            
            // Fechar modal
            closeDeleteAccountModal();
            
            // Redirecionar para a página inicial após um breve delay
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 2000);
        }

        // Função para fechar modal de perfil
        function closeProfileModal() {
            console.log('❌ Fechando modal de perfil...');
            document.getElementById('profile-modal').classList.add('hidden');
        }

        // Função para fechar modal de relatórios
        function closeSalesReportModal() {
            console.log('❌ Fechando modal de relatórios...');
            document.getElementById('sales-report-modal').classList.add('hidden');
        }

        // Função para abrir modal de edição de perfil
        function openEditProfileModal() {
            console.log('📝 Abrindo modal de edição de perfil...');
            
            try {
                const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
                console.log('👤 Dados do usuário carregados:', userData);
                
                // Preencher campos com dados atuais
                const firstNameField = document.getElementById('edit-first-name');
                const lastNameField = document.getElementById('edit-last-name');
                const emailField = document.getElementById('edit-email');
                const passwordField = document.getElementById('edit-password');
                
                if (firstNameField) firstNameField.value = userData.firstName || '';
                if (lastNameField) lastNameField.value = userData.lastName || '';
                if (emailField) emailField.value = userData.email || '';
                if (passwordField) passwordField.value = '';
                
                console.log('📝 Campos preenchidos');
                
                // Carregar foto do perfil
                loadProfilePhoto();
                
                // Mostrar modal
                const modal = document.getElementById('edit-profile-modal');
                if (modal) {
                    modal.classList.remove('hidden');
                    console.log('✅ Modal de edição de perfil aberto');
                } else {
                    console.error('❌ Modal edit-profile-modal não encontrado');
                }
                
                // Remover event listeners anteriores para evitar duplicação
                modal.removeEventListener('click', handleEditModalClick);
                
                // Configurar event listener para fechar clicando fora
                modal.addEventListener('click', handleEditModalClick);
                
            } catch (error) {
                console.error('❌ Erro ao abrir modal de edição de perfil:', error);
                alert('Erro ao abrir modal de edição de perfil. Verifique o console para mais detalhes.');
            }
        }
        
        function handleEditModalClick(e) {
            if (e.target === e.currentTarget) {
                console.log('🖱️ Fechando modal de edição clicando fora');
                closeEditProfileModal();
            }
        }

        function closeEditProfileModal() {
            console.log('❌ Fechando modal de edição de perfil...');
            document.getElementById('edit-profile-modal').classList.add('hidden');
        }

        // Funções para gerenciar foto do perfil
        function handleProfilePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validar tipo de arquivo
            if (!file.type.startsWith('image/')) {
                alert('Por favor, selecione apenas arquivos de imagem.');
                return;
            }

            // Validar tamanho (máximo 10MB)
            if (file.size > 10 * 1024 * 1024) {
                alert('A imagem deve ter no máximo 10MB.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.getElementById('profile-photo-preview');
                const defaultIcon = document.getElementById('default-avatar-icon');
                const removeBtn = document.getElementById('remove-photo-btn');
                
                img.src = e.target.result;
                img.classList.remove('hidden');
                defaultIcon.classList.add('hidden');
                removeBtn.classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }

        function removeProfilePhoto() {
            const img = document.getElementById('profile-photo-preview');
            const defaultIcon = document.getElementById('default-avatar-icon');
            const removeBtn = document.getElementById('remove-photo-btn');
            const input = document.getElementById('profile-photo-input');
            
            img.src = '';
            img.classList.add('hidden');
            defaultIcon.classList.remove('hidden');
            removeBtn.classList.add('hidden');
            input.value = '';
        }

        // Função para salvar perfil
        function saveProfile(event) {
            event.preventDefault();
            console.log('💾 Salvando perfil...');
            
            const firstName = document.getElementById('edit-first-name').value.trim();
            const lastName = document.getElementById('edit-last-name').value.trim();
            const email = document.getElementById('edit-email').value.trim();
            const password = document.getElementById('edit-password').value;
            
            // Validações
            if (!firstName || !lastName || !email) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            if (password && password.length < 10) {
                alert('A senha deve ter pelo menos 10 caracteres.');
                return;
            }
            
            // Carregar dados atuais do usuário
            const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            
            // Atualizar dados
            userData.firstName = firstName;
            userData.lastName = lastName;
            userData.email = email;
            
            if (password) {
                userData.password = password; // Em produção, criptografar aqui
            }
            
            // Salvar foto do perfil se foi alterada
            const photoInput = document.getElementById('profile-photo-input');
            if (photoInput.files.length > 0) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    userData.profilePhoto = e.target.result;
                    localStorage.setItem('e2e_current_user', JSON.stringify(userData));
                };
                reader.readAsDataURL(photoInput.files[0]);
            }
            
            // Salvar dados atualizados
            localStorage.setItem('e2e_current_user', JSON.stringify(userData));
            
            // Atualizar interface
            loadUserData();
            
            // Fechar modal
            closeEditProfileModal();
            
            // Mostrar mensagem de sucesso
            const successMessage = isDemoUser() 
                ? 'Perfil atualizado com sucesso! (Demonstração - alterações não serão salvas permanentemente)'
                : 'Perfil atualizado com sucesso!';
            showSuccessMessage(successMessage);
            
            console.log('✅ Perfil salvo:', userData);
        }
        
        // Carregar foto de perfil
        function loadProfilePhoto() {
            const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            const profilePhotoPreview = document.getElementById('profile-photo-preview');
            const headerAvatar = document.getElementById('header-avatar');
            const headerAvatarIcon = document.getElementById('header-avatar-icon');
            const removePhotoBtn = document.getElementById('remove-photo-btn');
            const defaultAvatarIcon = document.getElementById('default-avatar-icon');
            
            if (userData.profilePhoto) {
                // Usuário tem foto - mostrar imagem
                profilePhotoPreview.src = userData.profilePhoto;
                profilePhotoPreview.style.display = 'block';
                if (defaultAvatarIcon) {
                    defaultAvatarIcon.style.display = 'none';
                }
                if (headerAvatar) {
                    headerAvatar.src = userData.profilePhoto;
                    headerAvatar.classList.remove('hidden');
                }
                if (headerAvatarIcon) {
                    headerAvatarIcon.classList.add('hidden');
                }
                if (removePhotoBtn) {
                    removePhotoBtn.classList.remove('hidden');
                }
            } else {
                // Usuário não tem foto - mostrar ícone laranja
                profilePhotoPreview.style.display = 'none';
                if (defaultAvatarIcon) {
                    defaultAvatarIcon.style.display = 'block';
                }
                if (headerAvatar) {
                    headerAvatar.classList.add('hidden');
                }
                if (headerAvatarIcon) {
                    headerAvatarIcon.classList.remove('hidden');
                }
                if (removePhotoBtn) {
                    removePhotoBtn.classList.add('hidden');
                }
            }
        }
        
        // Gerenciar upload de foto de perfil (método simples mantendo qualidade)
        function handleProfilePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validar tipo de arquivo
            if (!file.type.startsWith('image/')) {
                alert('Por favor, selecione apenas arquivos de imagem!');
                return;
            }
            
            // Validar tamanho (máximo 10MB para manter qualidade)
            if (file.size > 10 * 1024 * 1024) {
                alert('A imagem deve ter no máximo 10MB!');
                return;
            }
            
            // Converter diretamente para base64 (mantendo qualidade original)
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Image = e.target.result;
                
                // Salvar no localStorage
                const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
                userData.profilePhoto = base64Image;
                localStorage.setItem('e2e_current_user', JSON.stringify(userData));
                
                // Atualizar preview
                const profilePhotoPreview = document.getElementById('profile-photo-preview');
                const defaultAvatarIcon = document.getElementById('default-avatar-icon');
                profilePhotoPreview.src = base64Image;
                profilePhotoPreview.style.display = 'block';
                if (defaultAvatarIcon) {
                    defaultAvatarIcon.style.display = 'none';
                }
                
                // Atualizar avatar do header
                const headerAvatar = document.getElementById('header-avatar');
                const headerAvatarIcon = document.getElementById('header-avatar-icon');
                const removePhotoBtn = document.getElementById('remove-photo-btn');
                if (headerAvatar) {
                    headerAvatar.src = base64Image;
                    headerAvatar.classList.remove('hidden');
                }
                if (headerAvatarIcon) {
                    headerAvatarIcon.classList.add('hidden');
                }
                if (removePhotoBtn) {
                    removePhotoBtn.classList.remove('hidden');
                }
                
                showSuccessMessage('Foto de perfil atualizada com sucesso!');
            };
            
            reader.readAsDataURL(file);
        }
        
        // Função para remover foto de perfil
        function removeProfilePhoto() {
            if (confirm('Tem certeza que deseja remover sua foto de perfil?')) {
                // Remover foto do localStorage
                const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
                delete userData.profilePhoto;
                localStorage.setItem('e2e_current_user', JSON.stringify(userData));
                
                // Atualizar preview para avatar padrão
                const profilePhotoPreview = document.getElementById('profile-photo-preview');
                const defaultAvatarIcon = document.getElementById('default-avatar-icon');
                profilePhotoPreview.style.display = 'none';
                if (defaultAvatarIcon) {
                    defaultAvatarIcon.style.display = 'block';
                }
                
                // Atualizar avatar do header
                const headerAvatar = document.getElementById('header-avatar');
                const headerAvatarIcon = document.getElementById('header-avatar-icon');
                const removePhotoBtn = document.getElementById('remove-photo-btn');
                
                if (headerAvatar) {
                    headerAvatar.classList.add('hidden');
                }
                if (headerAvatarIcon) {
                    headerAvatarIcon.classList.remove('hidden');
                }
                if (removePhotoBtn) {
                    removePhotoBtn.classList.add('hidden');
                }
                
                showSuccessMessage('Foto de perfil removida com sucesso!');
            }
        }
        
        // Função para mostrar mensagens de sucesso
        function showSuccessMessage(message) {
            // Criar elemento de notificação
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i class="fas fa-check-circle"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animar entrada
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remover após 3 segundos
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Abrir modal de aumento de estoque
        function openStockIncrease(productId) {
            console.log('📦 Abrindo modal de aumento de estoque para:', productId);
            console.log('🔍 vendorData.myProducts:', vendorData.myProducts);
            console.log('🔍 apiProducts:', apiProducts);
            
            // Fechar modal de detalhes se estiver aberto
            const detailsModal = document.getElementById('product-details-modal');
            if (detailsModal && !detailsModal.classList.contains('hidden')) {
                console.log('🔍 Fechando modal de detalhes antes de abrir modal de estoque');
                detailsModal.classList.add('hidden');
            }
            
            // Buscar produto na lista de produtos processados
            let product = vendorData.myProducts.find(p => p.id == productId);
            console.log('🔍 Produto encontrado em myProducts:', product);
            
            // Se não encontrar, buscar na lista da API
            if (!product) {
                product = apiProducts.find(p => p.id == productId);
                console.log('🔍 Produto encontrado na API:', product);
            }
            
            if (!product) {
                console.error('❌ Produto não encontrado!');
                alert('Produto não encontrado!');
                return;
            }
            
            console.log('📦 Produto encontrado para aumento de estoque:', product);

            // Processar dados do produto corretamente
            const productName = product.title || product.name || product.slug || 'Produto sem nome';
            const productBrand = product.brand || 'Marca não informada';
            const productCategory = product.category || 'tecnologia';
            const productImage = product.image || product.thumbnail || 'assets/images/products/placeholder.jpg';
            
            // Processar estoque corretamente
            let productStock = 0;
            if (typeof product.stock === 'number') {
                productStock = product.stock;
            } else if (product.stock && typeof product.stock === 'object') {
                productStock = product.stock.quantity || product.stock.stock_quantity || 0;
            } else if (product.stock_quantity) {
                productStock = product.stock_quantity;
            }
            
            const isActive = product.isActive !== false;

            if (!isActive) {
                alert('Não é possível aumentar o estoque de produtos inativos!');
                return;
            }

            currentProductForStock = product;
            
            // Carregar informações do produto
            document.getElementById('stock-product-info').innerHTML = `
                <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg">
                    <div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden">
                        <img src="${productImage}" alt="${productName}" 
                             class="w-full h-full object-cover rounded-lg"
                             onerror="this.onerror=null; this.src='assets/images/products/placeholder.jpg';">
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-900">${productName}</h4>
                        <p class="text-sm text-gray-600">${productBrand}</p>
                        <p class="text-sm text-gray-500">Categoria: ${getCategoryDisplayName(productCategory)}</p>
                    </div>
                </div>
            `;

            // Atualizar estoque atual
            document.getElementById('current-stock').textContent = Number(productStock);
            updateStockPreview();

            // Event listener para atualizar preview
            document.getElementById('stock-increase-amount').addEventListener('change', updateStockPreview);

            document.getElementById('stock-increase-modal').classList.remove('hidden');
        }

        // Função para verificar persistência dos dados
        function checkDataPersistence() {
            console.log('🔍 ===== VERIFICAÇÃO DE PERSISTÊNCIA =====');
            console.log('🔍 vendorData atual:', vendorData);
            console.log('🔍 localStorage vendor_data:', localStorage.getItem('vendor_data'));
            console.log('🔍 localStorage ecommerce_products:', localStorage.getItem('ecommerce_products'));
            console.log('🔍 ===== FIM VERIFICAÇÃO =====');
        }

        // Função para atualizar dados do Gerenciador de Estoque em background
        function updateStockManagerData() {
            console.log('🔄 Atualizando dados do Gerenciador de Estoque em background...');
            
            // Atualizar a lista de produtos da API com os dados mais recentes
            if (vendorData.myProducts && vendorData.myProducts.length > 0) {
                // Sincronizar dados de vendorData.myProducts para apiProducts
                vendorData.myProducts.forEach(updatedProduct => {
                    const apiIndex = apiProducts.findIndex(p => p.id === updatedProduct.id);
                    if (apiIndex !== -1) {
                        apiProducts[apiIndex] = {
                            ...apiProducts[apiIndex],
                            stock: updatedProduct.stock,
                            name: updatedProduct.name,
                            price: updatedProduct.price,
                            image: updatedProduct.image,
                            category: updatedProduct.category,
                            brand: updatedProduct.brand
                        };
                        console.log('✅ Produto atualizado na lista da API:', updatedProduct.name, 'Estoque:', updatedProduct.stock);
                    }
                });
            }
            
            console.log('✅ Dados do Gerenciador de Estoque atualizados em background');
        }

        // Função centralizada para sincronizar estoque entre todas as seções
        function syncStockAcrossSections(productId, newStock) {
            console.log('🔄 Sincronizando estoque entre seções:', productId, newStock);
            
            // Atualizar em vendorData.myProducts
            const myProductIndex = vendorData.myProducts.findIndex(p => p.id === productId);
            if (myProductIndex !== -1) {
                vendorData.myProducts[myProductIndex].stock = newStock;
                console.log('✅ Estoque atualizado em Meus Produtos');
            }
            
            // Atualizar na lista da API
            const apiProductIndex = apiProducts.findIndex(p => p.id === productId);
            if (apiProductIndex !== -1) {
                apiProducts[apiProductIndex].stock = newStock;
                console.log('✅ Estoque atualizado na lista da API');
            }
            
            // Atualizar produto no sistema global
            const product = vendorData.myProducts.find(p => p.id === productId) || apiProducts.find(p => p.id === productId);
            if (product) {
                product.stock = newStock;
                updateProductInGlobalSystem(product);
            }
            
            // Salvar dados
            saveVendorData();
            
            // Verificar persistência dos dados
            setTimeout(() => {
                checkDataPersistence();
            }, 100);
            
            // Atualizar todas as tabelas
            renderMyProductsTable();
            renderProductManagementTable();
            
            // Sempre atualizar Gerenciador de Estoque (mesmo se não estiver aberto)
            console.log('🔄 Atualizando dados do Gerenciador de Estoque...');
            
            // Se o modal estiver aberto, recarregar os dados
            const stockModal = document.getElementById('stock-management-modal');
            if (stockModal && !stockModal.classList.contains('hidden')) {
                console.log('🔄 Modal aberto - recarregando dados...');
                loadAllProductsForStock();
            } else {
                console.log('🔄 Modal fechado - atualizando dados em background...');
                // Atualizar os dados mesmo com modal fechado para próxima abertura
                updateStockManagerData();
            }
        }

        // Atualizar preview do estoque
        function updateStockPreview() {
            if (!currentProductForStock) return;
            
            const increaseAmount = parseInt(document.getElementById('stock-increase-amount').value) || 0;
            
            // Obter estoque atual
            let currentStock = 0;
            if (typeof currentProductForStock.stock === 'number') {
                currentStock = currentProductForStock.stock;
            } else if (currentProductForStock.stock && typeof currentProductForStock.stock === 'object') {
                currentStock = currentProductForStock.stock.quantity || currentProductForStock.stock.stock_quantity || 0;
            } else if (currentProductForStock.stock_quantity) {
                currentStock = currentProductForStock.stock_quantity;
            }
            
            const newStock = currentStock + increaseAmount;
            
            document.getElementById('new-stock').textContent = newStock;
            
            // Atualizar estoque atual também
            document.getElementById('current-stock').textContent = currentStock;
        }

        // Confirmar aumento de estoque
        function confirmStockIncrease() {
            console.log('🔍 ===== INÍCIO confirmStockIncrease =====');
            console.log('🔍 currentProductForStock:', currentProductForStock);
            
            if (!currentProductForStock) {
                console.error('❌ Produto não encontrado!');
                alert('Erro: Produto não encontrado!');
                return;
            }

            const increaseAmount = parseInt(document.getElementById('stock-increase-amount').value);
            console.log('🔍 increaseAmount:', increaseAmount);
            
            // Validações
            if (!increaseAmount || increaseAmount <= 0) {
                console.error('❌ Quantidade inválida:', increaseAmount);
                alert('Por favor, selecione uma quantidade válida para aumentar o estoque!');
                return;
            }
            
            if (increaseAmount % 10 !== 0) {
                alert('A quantidade deve ser um múltiplo de 10 (10, 20, 30, etc.)!');
                return;
            }
            
            // Verificar se produto está ativo
            if (currentProductForStock.isActive === false) {
                alert('Não é possível aumentar o estoque de produtos inativos!');
                return;
            }
            
            // Obter estoque atual
            let currentStock = 0;
            if (typeof currentProductForStock.stock === 'number') {
                currentStock = currentProductForStock.stock;
            } else if (currentProductForStock.stock && typeof currentProductForStock.stock === 'object') {
                currentStock = currentProductForStock.stock.quantity || currentProductForStock.stock.stock_quantity || 0;
            } else if (currentProductForStock.stock_quantity) {
                currentStock = currentProductForStock.stock_quantity;
            }
            
            const newStock = currentStock + increaseAmount;
            const productName = currentProductForStock.name || currentProductForStock.title || 'Produto';

            console.log(`📦 Aumentando estoque do produto ${productName}: ${currentStock} → ${newStock} (+${increaseAmount})`);
            
            // Atualizar estoque no produto atual
            currentProductForStock.stock = newStock;
            console.log('✅ Estoque atualizado no produto atual');
            
            // Sincronizar estoque entre todas as seções
            syncStockAcrossSections(currentProductForStock.id, newStock);
            
            // Fechar modal
            closeStockIncreaseModal();
            
            // Mostrar mensagem de sucesso melhorada
            console.log('🎉 Exibindo mensagem de sucesso...');
            showStockSuccessMessage(`✅ Estoque aumentado com sucesso!\n\nProduto: ${productName}\nEstoque anterior: ${currentStock} unidades\nAumento: +${increaseAmount} unidades\nNovo estoque: ${newStock} unidades`);
            console.log('🔍 ===== FIM confirmStockIncrease =====');
        }

        // Ver detalhes do produto
        function viewProductDetails(productId) {
            console.log('🔍 ===== INÍCIO viewProductDetails =====');
            console.log('🔍 productId:', productId);
            console.log('🔍 vendorData.myProducts:', vendorData.myProducts);
            console.log('🔍 apiProducts:', apiProducts);
            
            // Buscar produto na lista de produtos processados
            let product = vendorData.myProducts.find(p => p.id == productId);
            console.log('🔍 Produto encontrado em myProducts:', product);
            
            // Se não encontrar, buscar na lista da API
            if (!product) {
                product = apiProducts.find(p => p.id == productId);
                console.log('🔍 Produto encontrado na API:', product);
            }
            
            if (!product) {
                console.error('❌ Produto não encontrado!');
                alert('Produto não encontrado!');
                return;
            }

            // Processar dados do produto corretamente
            const productName = product.title || product.name || product.slug || 'Produto sem nome';
            const productDescription = product.description || 'Descrição não disponível';
            const productBrand = product.brand || 'Marca não informada';
            const productCategory = product.category || 'tecnologia';
            const productImage = product.image || product.thumbnail || 'assets/images/products/placeholder.jpg';
            
            // Processar preço corretamente
            let productPrice = 0;
            if (typeof product.price === 'number') {
                productPrice = product.price;
            } else if (product.price && typeof product.price === 'object') {
                productPrice = product.price.final || product.price.price_final || product.price.price || 0;
            } else if (product.price_final) {
                productPrice = product.price_final;
            }
            
            // Processar estoque corretamente
            let productStock = 0;
            if (typeof product.stock === 'number') {
                productStock = product.stock;
            } else if (product.stock && typeof product.stock === 'object') {
                productStock = product.stock.quantity || product.stock.stock_quantity || 0;
            } else if (product.stock_quantity) {
                productStock = product.stock_quantity;
            }
            
            const isActive = product.isActive !== false;

            document.getElementById('product-details-content').innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <div class="w-full h-64 bg-gray-100 rounded-lg flex items-center justify-center mb-4 overflow-hidden">
                            <img src="${productImage}" alt="${productName}" 
                                 class="w-full h-full object-cover rounded-lg"
                                 onerror="this.onerror=null; this.src='assets/images/products/placeholder.jpg';">
                        </div>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">${productName}</h2>
                        <p class="text-gray-600 mb-4">${productDescription}</p>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between">
                                <span class="font-medium text-gray-700">Marca:</span>
                                <span class="text-gray-900">${productBrand}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium text-gray-700">Categoria:</span>
                                <span class="text-gray-900">${getCategoryDisplayName(productCategory)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium text-gray-700">Preço:</span>
                                <span class="text-gray-900 font-semibold">R$ ${Number(productPrice).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium text-gray-700">Estoque Atual:</span>
                                <span class="text-gray-900 font-semibold">${Number(productStock)} unidades</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium text-gray-700">Status:</span>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                    ${isActive ? 'Ativo' : 'Inativo'}
                                </span>
                            </div>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button onclick="openStockIncrease('${product.id}')" 
                                    class="flex-1 bg-primary-500 hover:bg-primary-600 text-white px-4 py-2 rounded-lg transition-colors duration-300">
                                <i class="fas fa-plus mr-2"></i>
                                Aumentar Estoque
                            </button>
                        </div>
                    </div>
                </div>
            `;

            console.log('🔍 Exibindo modal de detalhes do produto...');
            document.getElementById('product-details-modal').classList.remove('hidden');
            console.log('🔍 ===== FIM viewProductDetails =====');
        }

        // Mostrar mensagem de sucesso
        function showSuccessMessage(message) {
            // Criar elemento de notificação
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animar entrada
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remover após 3 segundos
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Funções de download de relatórios
        function downloadReportJSON() {
            const reportData = {
                vendor: {
                    name: document.getElementById('profile-name').textContent,
                    email: document.getElementById('profile-email').textContent,
                    type: 'Vendedor'
                },
                sales: {
                    monthlySales: vendorData.monthlySales || 0,
                    productsSold: vendorData.productsSold || 0,
                    commission: vendorData.commission || 0,
                    rating: vendorData.rating || '0.0'
                },
                products: vendorData.myProducts || [],
                generatedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(reportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `relatorio_vendas_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            showSuccessMessage('Relatório JSON baixado com sucesso!');
        }
        
        function downloadReportPDF() {
            // Simular geração de PDF
            const reportData = {
                vendor: document.getElementById('profile-name').textContent,
                monthlySales: document.getElementById('report-monthly-sales').textContent,
                productsSold: document.getElementById('report-products-sold').textContent,
                commission: document.getElementById('report-commission').textContent,
                rating: document.getElementById('report-rating').textContent
            };
            
            // Criar conteúdo HTML para PDF
            const htmlContent = `
                <html>
                    <head>
                        <title>Relatório de Vendas</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .header { text-align: center; margin-bottom: 30px; }
                            .section { margin-bottom: 20px; }
                            .section h3 { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 5px; }
                            .data { margin: 10px 0; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h1>Relatório de Vendas</h1>
                            <p>Gerado em: ${new Date().toLocaleDateString('pt-BR')}</p>
                        </div>
                        <div class="section">
                            <h3>Informações do Vendedor</h3>
                            <div class="data"><strong>Nome:</strong> ${reportData.vendor}</div>
                        </div>
                        <div class="section">
                            <h3>Estatísticas de Vendas</h3>
                            <div class="data"><strong>Vendas do Mês:</strong> ${reportData.monthlySales}</div>
                            <div class="data"><strong>Produtos Vendidos:</strong> ${reportData.productsSold}</div>
                            <div class="data"><strong>Comissão:</strong> ${reportData.commission}</div>
                            <div class="data"><strong>Avaliação:</strong> ${reportData.rating}/5.0</div>
                        </div>
                    </body>
                </html>
            `;
            
            // Simular download (em produção, usar biblioteca como jsPDF)
            const dataBlob = new Blob([htmlContent], {type: 'text/html'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `relatorio_vendas_${new Date().toISOString().split('T')[0]}.html`;
            link.click();
            
            URL.revokeObjectURL(url);
            showSuccessMessage('Relatório HTML baixado com sucesso! (Simulação de PDF)');
        }
        
        function downloadReportXML() {
            const reportData = {
                vendor: document.getElementById('profile-name').textContent,
                monthlySales: vendorData.monthlySales || 0,
                productsSold: vendorData.productsSold || 0,
                commission: vendorData.commission || 0,
                rating: vendorData.rating || '0.0'
            };
            
            const xmlContent = `<?xml version="1.0" encoding="UTF-8"?>
<relatorio>
    <vendedor>
        <nome>${reportData.vendor}</nome>
        <tipo>Vendedor</tipo>
    </vendedor>
    <vendas>
        <vendas_mes>${reportData.monthlySales}</vendas_mes>
        <produtos_vendidos>${reportData.productsSold}</produtos_vendidos>
        <comissao>${reportData.commission}</comissao>
        <avaliacao>${reportData.rating}</avaliacao>
    </vendas>
    <gerado_em>${new Date().toISOString()}</gerado_em>
</relatorio>`;
            
            const dataBlob = new Blob([xmlContent], {type: 'application/xml'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `relatorio_vendas_${new Date().toISOString().split('T')[0]}.xml`;
            link.click();
            
            URL.revokeObjectURL(url);
            showSuccessMessage('Relatório XML baixado com sucesso!');
        }
        
        // Função de logout
        function openLogoutModal() {
            document.getElementById('logout-modal').classList.remove('hidden');
        }
        
        function confirmLogout() {
            // Limpar dados do localStorage
            localStorage.removeItem('e2e_current_user');
            localStorage.removeItem('vendor_data');
            
            // Redirecionar para login
            window.location.href = 'login.html';
        }
        
        function cancelLogout() {
            document.getElementById('logout-modal').classList.add('hidden');
        }


        function deleteProduct(productId) {
            if (confirm('Tem certeza que deseja excluir este produto?')) {
                // Encontrar o produto antes de excluir
                const product = vendorData.myProducts.find(p => p.id === productId);
                
                vendorData.myProducts = vendorData.myProducts.filter(p => p.id !== productId);
                
                // Remover do sistema global
                removeProductFromGlobalSystem(productId);
                
                // Atualizar tabelas
                renderMyProductsTable();
                renderProductManagementTable();
                
                // Salvar dados atualizados
                saveVendorData();
                
                showSuccessMessage('Produto excluído com sucesso!');
            }
        }

        // Função para verificar se é usuário demo
        function isDemoUser() {
            const userData = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            const demoEmails = ['joao@email.com', 'maria@email.com', 'admin@email.com', 'joao@demo.com'];
            const isDemo = demoEmails.includes(userData.email) || userData.profile === 'demo' || userData.id === 'demo';
            
            console.log('🎭 Verificando se é usuário demo (vendedor):', {
                userData: userData,
                email: userData.email,
                profile: userData.profile,
                id: userData.id,
                isDemo: isDemo
            });
            
            return isDemo;
        }

        // Função para forçar exibição do banner demo
        function forceShowDemoBanner() {
            console.log('🎭 Forçando exibição do banner demo...');
            const demoNotice = document.getElementById('demo-notice');
            if (demoNotice) {
                demoNotice.style.display = 'block';
                console.log('✅ Banner demo forçado a aparecer');
            } else {
                console.warn('⚠️ Elemento demo-notice não encontrado');
            }
        }

        // Função de logout
        function logout() {
            const demoMessage = isDemoUser() ? '\n\nEste é um perfil de demonstração. Alterações feitas não serão salvas.' : '';
            if (confirm('Tem certeza que deseja sair?' + demoMessage)) {
                localStorage.removeItem('user');
                localStorage.removeItem('e2e_current_user');
                localStorage.removeItem('vendor_data');
                window.location.href = 'index.html';
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Dashboard Vendedor carregado!');
            
            // Criar conta demo se não existir usuário (para demonstração)
            if (!localStorage.getItem('e2e_current_user')) {
                console.log('🏢 Criando conta demo...');
                createDemoAccount();
            }
            
            // Verificar se há usuário logado
            const currentUser = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            if (!currentUser.id) {
                console.log('⚠️ Nenhum usuário logado, redirecionando para login...');
                window.location.href = 'login.html';
                return;
            }
            
            // Verificar se o usuário tem permissão para acessar o dashboard de vendedor
            const userRole = currentUser.profile || currentUser.role;
            if (userRole !== 'vendedor' && userRole !== 'admin' && userRole !== 'administrador') {
                console.log('🚫 Acesso negado: Usuário não tem permissão para acessar o dashboard de vendedor');
                alert('Acesso negado. Faça login para acessar seu perfil.');
                window.location.href = 'login.html';
                return;
            }
            
            console.log('👤 Usuário logado:', currentUser.fullName, '- Role:', userRole);
            
            // Verificar e exibir banner demo se necessário
            setTimeout(() => {
                const isDemo = isDemoUser();
                console.log('🎭 Verificação final do banner demo:', isDemo);
                if (isDemo) {
                    forceShowDemoBanner();
                }
            }, 2000);
            
            // Verificar se é conta demo
            const demoEmails = ['joao@email.com', 'maria@email.com', 'admin@email.com'];
            const isDemoAccount = currentUser && (
                demoEmails.includes(currentUser.email) ||
                currentUser.email === 'demo@e2eshop.com' || 
                currentUser.id === 'demo' ||
                currentUser.profile === 'demo'
            );
            
            // Atualizar interface com dados do usuário
            updateUserInterface();
            
            // Atualizar texto do botão demo
            updateDemoButtonText();
            
            // Carregar os 30 produtos
            loadMyProducts();
            
            if (isDemoAccount) {
                console.log('🏢 Conta DEMO detectada - carregando dados demonstrativos...');
                
                // CARREGAR DADOS DEMONSTRATIVOS PARA CONTA DEMO
                setTimeout(() => {
                    console.log('🔄 Carregando dados demo forçadamente...');
                    
                    // Forçar dados demonstrativos altos imediatamente
                    forceHighDemoData();
                    
                    // Carregar dados demo completos
                    forceDemoData();
                    
                    // Forçar atualização adicional
                    setTimeout(() => {
                        console.log('🔧 Forçando atualização final...');
                        const demoData = generateRealisticDemoData();
                        forceUpdateAllPossibleElements(demoData);
                        
                        // Forçar atualização de elementos zerados
                        forceUpdateZeroElements();
                        
                        // Forçar atualização das seções
                        updateFeaturedProductsSection(demoData);
                        updateRecentSalesSection(demoData);
                    }, 1000);
                }, 100);
            } else {
                console.log('👤 Conta REAL detectada - carregando dados do usuário...');
                
                // CARREGAR DADOS REAIS DO USUÁRIO
                setTimeout(() => {
                    console.log('📊 Carregando dados reais do usuário...');
                    loadBasicAnalyticsData();
                    
                    // Atualizar interface com dados do usuário
                    setTimeout(() => {
                        console.log('🔧 Atualizando interface com dados reais...');
                        updateUserInterface();
                    }, 500);
                }, 100);
            }
            
            // Configurar fechamento de modais
            // Event listeners já configurados nas funções de abertura dos modais
            
            // Event listener para formulário de produto
            document.getElementById('add-product-form').addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('📝 Submetendo formulário de adicionar produto');
                
                const formData = new FormData(this);
                
                // Obter imagem se foi selecionada
                let productImage = null;
                const imageInput = document.getElementById('product-image-input');
                if (imageInput.files && imageInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        productImage = e.target.result;
                        saveNewProduct(formData, productImage);
                    };
                    reader.readAsDataURL(imageInput.files[0]);
                } else {
                    saveNewProduct(formData, null);
                }
            });
            
            // Função para salvar o novo produto
            function saveNewProduct(formData, productImage) {
                // Gerar ID único
                const newId = 'PROD-' + String(Date.now()).slice(-6);
                
                const newProduct = {
                    id: newId,
                    name: formData.get('name'),
                    brand: formData.get('brand'),
                    price: parseFloat(formData.get('price')),
                    stock: parseInt(formData.get('stock')),
                    description: formData.get('description'),
                    category: formData.get('category'),
                    image: productImage || 'assets/images/products/placeholder.jpg',
                    sales: 0,
                    status: 'active',
                    createdAt: new Date().toISOString()
                };
                
                console.log('🆕 Novo produto criado:', newProduct);
                
                // Garantir que myProducts seja um array
                if (!Array.isArray(vendorData.myProducts)) {
                    vendorData.myProducts = [];
                }
                
                // Adicionar aos produtos do vendedor
                vendorData.myProducts.push(newProduct);
                console.log('📦 Total de produtos após adicionar:', vendorData.myProducts.length);
                console.log('📦 Produtos atuais:', vendorData.myProducts);
                
                // Adicionar ao sistema global de produtos do ecommerce
                addProductToGlobalSystem(newProduct);
                
                // Forçar renderização das tabelas
                setTimeout(() => {
                    renderMyProductsTable();
                    renderProductManagementTable();
                }, 100);
                
                // Fechar modal e limpar formulário
                closeAddProductModal();
                
                // Salvar dados atualizados
                saveVendorData();
                
                // Mostrar mensagem de sucesso
                showSuccessMessage('Produto adicionado com sucesso!');
                
                // Campos removidos a pedido: não recarregar top products
                // loadTopProducts();
                
                console.log('✅ Produto adicionado com sucesso');
            }
        });
    </script>

    <!-- Edit Product Modal -->
    <div id="edit-product-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-[70] cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Editar Produto</h3>
                            <p class="text-sm text-gray-500">Modifique as informações do produto</p>
                        </div>
                        <button onclick="closeEditProductModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <form id="edit-product-form" onsubmit="saveEditedProduct(event)">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-tag mr-2 text-blue-500"></i>Nome do Produto
                                </label>
                                <input type="text" id="edit-product-name" required
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm"
                                       placeholder="Digite o nome do produto">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-dollar-sign mr-2 text-green-500"></i>Preço (R$)
                                </label>
                                <input type="number" id="edit-product-price" step="0.01" min="0" required
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm"
                                       placeholder="0,00">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-boxes mr-2 text-orange-500"></i>Estoque
                                </label>
                                <input type="number" id="edit-product-stock" min="0" required
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm"
                                       placeholder="0">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-folder mr-2 text-purple-500"></i>Categoria
                                </label>
                                <select id="edit-product-category" required
                                        class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm">
                                    <option value="eletronicos">Eletrônicos</option>
                                    <option value="casa">Casa</option>
                                    <option value="tecnologia">Tecnologia</option>
                                    <option value="acessorios">Acessórios</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-award mr-2 text-yellow-500"></i>Marca
                                </label>
                                <input type="text" id="edit-product-brand" required
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm"
                                       placeholder="Digite a marca">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-align-left mr-2 text-indigo-500"></i>Descrição
                                </label>
                                <textarea id="edit-product-description" rows="3"
                                          class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm resize-none"
                                          placeholder="Descreva o produto..."></textarea>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-100">
                            <button type="button" onclick="closeEditProductModal()" 
                                    class="px-6 py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-semibold transition-all duration-200 flex items-center">
                                <i class="fas fa-times mr-2"></i>
                                Cancelar
                            </button>
                            <button type="submit" 
                                    class="px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl flex items-center">
                                <i class="fas fa-save mr-2"></i>
                                Salvar Alterações
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-w-sm sm:max-w-md lg:max-w-2xl max-h-[90vh] overflow-hidden cursor-default animate-slideIn flex flex-col">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Meu Perfil</h3>
                            <p class="text-sm text-gray-500">Informações pessoais e estatísticas</p>
                        </div>
                        <button onclick="document.getElementById('profile-modal').classList.add('hidden')" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-4 sm:p-6 overflow-y-auto flex-1">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Informações Pessoais</h4>
                            
                            <!-- Demo Profile Notice (only for demo users) -->
                            <div id="demo-notice-modal" class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4" style="display: none;">
                                <div class="flex items-start space-x-3">
                                    <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                                    <div>
                                        <p class="font-medium text-blue-800 mb-1">Perfil de Demonstração</p>
                                        <p class="text-blue-700 text-sm">
                                            Este é um perfil de demonstração. Alterações feitas não serão salvas permanentemente.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Foto de Perfil -->
                            <div class="space-y-4 mb-6">
                                <div class="flex flex-col items-center space-y-4">
                                    <!-- Círculo da foto -->
                                    <div class="relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 shadow-xl bg-primary-500 flex items-center justify-center">
                                        <img id="profile-photo-preview" src="assets/images/default-avatar.png" alt="Foto de Perfil" 
                                             class="w-full h-full object-cover">
                                        <i id="default-avatar-icon" class="fas fa-user text-white text-3xl"></i>
                                    </div>
                                    
                                    <!-- Botões fora do círculo -->
                                    <div class="flex space-x-3">
                                        <!-- Botão de adicionar/alterar foto -->
                                        <button onclick="document.getElementById('profile-photo-input').click()" 
                                                class="px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg flex items-center space-x-2 shadow-md hover:shadow-lg photo-action-btn">
                                            <i class="fas fa-camera"></i>
                                            <span>Alterar Foto</span>
                                        </button>
                                        
                                        <!-- Botão de remover foto -->
                                        <button id="remove-photo-btn" onclick="removeProfilePhoto()" 
                                                class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center space-x-2 shadow-md hover:shadow-lg photo-action-btn hidden">
                                            <i class="fas fa-trash"></i>
                                            <span>Remover</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Instruções -->
                                    <div class="text-center">
                                        <p class="text-sm font-medium text-gray-900">Foto de Perfil</p>
                                        <p class="text-xs text-gray-500">Clique em "Alterar Foto" para adicionar ou trocar</p>
                                        <p class="text-xs text-blue-500 mt-1">Qualidade original mantida - até 10MB</p>
                                    </div>
                                    
                                    <input type="file" id="profile-photo-input" accept="image/*" class="hidden" onchange="handleProfilePhotoUpload(event)">
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-user text-blue-500 w-5"></i>
                                    <div>
                                        <p class="text-sm text-gray-500">Nome Completo</p>
                                        <p id="profile-name" class="font-semibold text-gray-900">-</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-envelope text-green-500 w-5"></i>
                                    <div>
                                        <p class="text-sm text-gray-500">Email</p>
                                        <p id="profile-email" class="font-semibold text-gray-900">-</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-briefcase text-purple-500 w-5"></i>
                                    <div>
                                        <p class="text-sm text-gray-500">Tipo de Conta</p>
                                        <p id="profile-type" class="font-semibold text-gray-900">-</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-calendar text-orange-500 w-5"></i>
                                    <div>
                                        <p class="text-sm text-gray-500">Data de Cadastro</p>
                                        <p id="profile-registration" class="font-semibold text-gray-900">-</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">Estatísticas de Vendas</h4>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-blue-50 p-4 rounded-xl">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-chart-line text-blue-500"></i>
                                        <span class="text-sm text-gray-600">Vendas do Mês</span>
                                    </div>
                                    <p id="profile-total-sales" class="text-xl font-bold text-blue-600 mt-1">-</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-xl">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-box text-green-500"></i>
                                        <span class="text-sm text-gray-600">Produtos Vendidos</span>
                                    </div>
                                    <p id="profile-products-sold" class="text-xl font-bold text-green-600 mt-1">-</p>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-xl">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-dollar-sign text-yellow-500"></i>
                                        <span class="text-sm text-gray-600">Comissão</span>
                                    </div>
                                    <p id="profile-commission" class="text-xl font-bold text-yellow-600 mt-1">-</p>
                                </div>
                                <div class="bg-purple-50 p-4 rounded-xl">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-star text-purple-500"></i>
                                        <span class="text-sm text-gray-600">Avaliação</span>
                                    </div>
                                    <p id="profile-rating" class="text-xl font-bold text-purple-600 mt-1">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botões de Ação -->
                    <div class="mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200">
                        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
                            <button onclick="openEditProfileModal()" class="flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-xl transition-all duration-300 hover:scale-105 text-sm sm:text-base">
                                <i class="fas fa-edit mr-2"></i>
                                Editar Perfil
                            </button>
                            
                            <button onclick="openDeleteAccountModal()" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-xl transition-all duration-300 hover:scale-105 text-sm sm:text-base">
                                <i class="fas fa-trash-alt mr-2"></i>
                                Excluir Conta
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Edição de Perfil -->
    <div id="edit-profile-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full max-w-sm sm:max-w-md cursor-default animate-slideIn max-h-[90vh] overflow-hidden flex flex-col">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-primary-50 to-orange-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 to-orange-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Editar Perfil</h3>
                            <p class="text-sm text-gray-500">Atualize suas informações pessoais</p>
                        </div>
                        <button onclick="closeEditProfileModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6 overflow-y-auto flex-1">
                    <form id="edit-profile-form" onsubmit="saveProfile(event)">
                        <div class="space-y-4">
                            <!-- Upload de Foto -->
                            <div class="text-center mb-6">
                                <div class="relative inline-block">
                                    <div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4 relative overflow-hidden">
                                        <img id="profile-photo-preview" src="" alt="Foto do perfil" class="w-full h-full object-cover hidden">
                                        <i id="default-avatar-icon" class="fas fa-user text-gray-500 text-2xl"></i>
                                    </div>
                                    <input type="file" id="profile-photo-input" accept="image/*" class="hidden" onchange="handleProfilePhotoUpload(event)">
                                    <button type="button" onclick="document.getElementById('profile-photo-input').click()" class="absolute -bottom-2 -right-2 w-8 h-8 bg-primary-500 hover:bg-primary-600 text-white rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110">
                                        <i class="fas fa-camera text-sm"></i>
                                    </button>
                                    <button type="button" id="remove-photo-btn" onclick="removeProfilePhoto()" class="absolute -bottom-2 -left-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110 hidden">
                                        <i class="fas fa-times text-sm"></i>
                                    </button>
                                </div>
                                <p class="text-sm text-gray-500">Clique na câmera para adicionar foto</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome</label>
                                <input type="text" id="edit-first-name" class="w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 text-sm sm:text-base" placeholder="Seu nome" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Sobrenome</label>
                                <input type="text" id="edit-last-name" class="w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 text-sm sm:text-base" placeholder="Seu sobrenome" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">E-mail</label>
                                <input type="email" id="edit-email" class="w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 text-sm sm:text-base" placeholder="seu@email.com" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nova Senha (opcional)</label>
                                <input type="password" id="edit-password" class="w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 text-sm sm:text-base" placeholder="Deixe em branco para manter a atual">
                            </div>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 mt-6">
                            <button type="button" onclick="closeEditProfileModal()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-xl transition-all duration-200 text-sm sm:text-base">
                                Cancelar
                            </button>
                            <button type="submit" class="flex-1 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-xl transition-all duration-200 text-sm sm:text-base">
                                <i class="fas fa-save mr-2"></i>
                                Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação de Exclusão de Conta -->
    <div id="delete-account-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full max-w-sm sm:max-w-md cursor-default animate-slideIn max-h-[90vh] overflow-hidden flex flex-col">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-red-50 to-pink-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-red-500 to-pink-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Excluir Conta</h3>
                            <p class="text-sm text-gray-500">Esta ação não pode ser desfeita</p>
                        </div>
                        <button onclick="closeDeleteAccountModal()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6 overflow-y-auto flex-1">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                        </div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-2">Tem certeza que deseja excluir sua conta?</h4>
                        <p class="text-gray-600 text-sm">
                            Esta ação irá remover permanentemente:
                        </p>
                    </div>
                    
                    <div class="bg-red-50 rounded-xl p-4 mb-6">
                        <ul class="text-sm text-gray-700 space-y-2">
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-check text-red-500"></i>
                                <span>Seus dados pessoais</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-check text-red-500"></i>
                                <span>Histórico de vendas</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-check text-red-500"></i>
                                <span>Produtos cadastrados</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <i class="fas fa-check text-red-500"></i>
                                <span>Configurações da conta</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6">
                        <div class="flex items-start space-x-3">
                            <i class="fas fa-info-circle text-yellow-600 mt-1"></i>
                            <div class="text-sm">
                                <p class="font-medium text-yellow-800 mb-1">Atenção!</p>
                                <p class="text-yellow-700">
                                    Esta ação é irreversível. Todos os seus dados serão perdidos permanentemente.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
                        <button onclick="closeDeleteAccountModal()" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-xl transition-all duration-200 text-sm sm:text-base">
                            <i class="fas fa-times mr-2"></i>
                            Cancelar
                        </button>
                        <button onclick="confirmDeleteAccount()" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-xl transition-all duration-200 text-sm sm:text-base">
                            <i class="fas fa-trash-alt mr-2"></i>
                            Excluir Conta
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sales Report Modal -->
    <div id="sales-report-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-w-sm sm:max-w-md lg:max-w-4xl max-h-[90vh] overflow-hidden cursor-default animate-slideIn flex flex-col">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-green-50 to-blue-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-blue-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Relatório de Vendas</h3>
                            <p class="text-sm text-gray-500">Análise de performance e downloads</p>
                        </div>
                        <button onclick="document.getElementById('sales-report-modal').classList.add('hidden')" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-all duration-200 text-gray-600 hover:text-red-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6 overflow-y-auto flex-1">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="space-y-6">
                            <h4 class="text-lg font-semibold text-gray-900">Estatísticas Atuais</h4>
                            <div class="space-y-4">
                                <div class="bg-blue-50 p-4 rounded-xl">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <i class="fas fa-chart-line text-blue-500 text-xl"></i>
                                            <div>
                                                <p class="text-sm text-gray-600">Vendas do Mês</p>
                                                <p id="report-monthly-sales" class="text-2xl font-bold text-blue-600">-</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-green-50 p-4 rounded-xl">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <i class="fas fa-box text-green-500 text-xl"></i>
                                            <div>
                                                <p class="text-sm text-gray-600">Produtos Vendidos</p>
                                                <p id="report-products-sold" class="text-2xl font-bold text-green-600">-</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-xl">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <i class="fas fa-dollar-sign text-yellow-500 text-xl"></i>
                                            <div>
                                                <p class="text-sm text-gray-600">Comissão</p>
                                                <p id="report-commission" class="text-2xl font-bold text-yellow-600">-</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-purple-50 p-4 rounded-xl">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <i class="fas fa-star text-purple-500 text-xl"></i>
                                            <div>
                                                <p class="text-sm text-gray-600">Avaliação</p>
                                                <p id="report-rating" class="text-2xl font-bold text-purple-600">-</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-6">
                            <h4 class="text-lg font-semibold text-gray-900">Gráfico de Vendas (7 dias)</h4>
                            <div id="sales-chart" class="bg-gray-50 p-4 rounded-xl h-64 flex items-end justify-between space-x-2">
                                <!-- Gráfico será gerado dinamicamente -->
                            </div>
                            <div class="space-y-4">
                                <h4 class="text-lg font-semibold text-gray-900">Download de Relatórios</h4>
                                <div class="grid grid-cols-1 gap-3">
                                    <button onclick="downloadReportJSON()" class="flex items-center space-x-3 p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors duration-200">
                                        <i class="fas fa-file-code text-blue-500 text-xl"></i>
                                        <div class="flex-1 text-left">
                                            <p class="font-semibold text-gray-900">JSON</p>
                                            <p class="text-sm text-gray-500">Dados estruturados</p>
                                        </div>
                                        <i class="fas fa-download text-gray-400"></i>
                                    </button>
                                    <button onclick="downloadReportPDF()" class="flex items-center space-x-3 p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors duration-200">
                                        <i class="fas fa-file-pdf text-red-500 text-xl"></i>
                                        <div class="flex-1 text-left">
                                            <p class="font-semibold text-gray-900">PDF</p>
                                            <p class="text-sm text-gray-500">Relatório formatado</p>
                                        </div>
                                        <i class="fas fa-download text-gray-400"></i>
                                    </button>
                                    <button onclick="downloadReportXML()" class="flex items-center space-x-3 p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors duration-200">
                                        <i class="fas fa-file-alt text-orange-500 text-xl"></i>
                                        <div class="flex-1 text-left">
                                            <p class="font-semibold text-gray-900">XML</p>
                                            <p class="text-sm text-gray-500">Formato XML</p>
                                        </div>
                                        <i class="fas fa-download text-gray-400"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Logout Modal -->
    <div id="logout-modal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm hidden z-50 cursor-pointer">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full cursor-default animate-slideIn">
                <div class="p-6 border-b border-gray-100 bg-gradient-to-r from-red-50 to-orange-50 relative">
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-red-500 to-orange-500 rounded-t-3xl"></div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Confirmar Logout</h3>
                            <p class="text-sm text-gray-500">Tem certeza que deseja sair?</p>
                        </div>
                        <button onclick="cancelLogout()" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200 text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="text-center space-y-4">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto">
                            <i class="fas fa-sign-out-alt text-red-500 text-2xl"></i>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-gray-900">Sair da Conta</h4>
                            <p class="text-sm text-gray-500 mt-1">Você será redirecionado para a página de login e todos os dados serão mantidos.</p>
                        </div>
                        <div class="flex space-x-3 pt-4">
                            <button onclick="cancelLogout()" class="flex-1 px-4 py-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl font-semibold transition-all duration-200">
                                Cancelar
                            </button>
                            <button onclick="confirmLogout()" class="flex-1 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl">
                                <i class="fas fa-sign-out-alt mr-2"></i>
                                Confirmar Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <!-- Logo System - Solução Direta -->
    <script>
        // Sistema de logo simplificado e robusto
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎨 Carregando logos...');
            loadAllLogos();
        });
        
        function loadAllLogos() {
            // Carregar logos do header
            const headerLogos = document.querySelectorAll('.header-logo');
            headerLogos.forEach(logo => {
                // Detectar se o fundo é escuro ou claro
                const isDarkBackground = isElementDarkBackground(logo);
                const logoUrl = isDarkBackground ? 
                    'assets/images/logo/header/logo-light.png' : 
                    'assets/images/logo/header/logo-dark.png';
                
                logo.src = logoUrl;
                logo.alt = 'E2E Shop';
                logo.onerror = function() {
                    console.warn('⚠️ Logo do header falhou, usando fallback');
                    this.style.display = 'none';
                    const parent = this.parentElement;
                    if (parent) {
                        parent.innerHTML = `
                            <div class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-shopping-bag text-white text-sm"></i>
                                </div>
                                <span class="text-xl font-bold text-gray-900">E2E SHOP</span>
                            </div>
                        `;
                    }
                };
                console.log(`✅ Logo do header carregado: ${isDarkBackground ? 'dark' : 'light'}`);
            });
            
            // Carregar logos do footer
            const footerLogos = document.querySelectorAll('.footer-logo');
            footerLogos.forEach(logo => {
                // Detectar se o fundo é escuro ou claro
                const isDarkBackground = isElementDarkBackground(logo);
                const logoUrl = isDarkBackground ? 
                    'assets/images/logo/footer/logo-footer.png' : 
                    'assets/images/logo/footer/logo-white.png';
                
                logo.src = logoUrl;
                logo.alt = 'E2E Shop';
                logo.onerror = function() {
                    console.warn('⚠️ Logo do footer falhou, usando fallback');
                    this.style.display = 'none';
                    const parent = this.parentElement;
                    if (parent) {
                        parent.innerHTML = `
                            <div class="flex items-center space-x-2">
                                <div class="w-6 h-6 bg-orange-500 rounded flex items-center justify-center">
                                    <i class="fas fa-shopping-bag text-white text-xs"></i>
                                </div>
                                <span class="text-lg font-bold text-gray-900">E2E SHOP</span>
                            </div>
                        `;
                    }
                };
                console.log(`✅ Logo do footer carregado: ${isDarkBackground ? 'white' : 'default'}`);
            });
            
            // Carregar favicon
            const favicon = document.querySelector('link[rel="icon"]');
            if (favicon) {
                favicon.href = 'assets/images/logo/favicon/favicon.png';
            } else {
                const newFavicon = document.createElement('link');
                newFavicon.rel = 'icon';
                newFavicon.type = 'image/png';
                newFavicon.href = 'assets/images/logo/favicon/favicon.png';
                document.head.appendChild(newFavicon);
            }
            console.log('✅ Favicon carregado');
        }
        
        // Função para detectar se o fundo é escuro
        function isElementDarkBackground(element) {
            // Verificar classes CSS que indicam fundo escuro
            const darkClasses = ['bg-gray-900', 'bg-black', 'bg-gray-800', 'bg-gray-700', 'bg-blue-900', 'bg-indigo-900'];
            const parent = element.closest('header, footer, div');
            
            if (parent) {
                // Verificar se o elemento pai tem classes de fundo escuro
                for (let className of darkClasses) {
                    if (parent.classList.contains(className)) {
                        return true;
                    }
                }
                
                // Verificar estilos computados
                const computedStyle = window.getComputedStyle(parent);
                const backgroundColor = computedStyle.backgroundColor;
                
                if (backgroundColor && backgroundColor !== 'rgba(0, 0, 0, 0)') {
                    const rgb = backgroundColor.match(/\d+/g);
                    if (rgb && rgb.length >= 3) {
                        const r = parseInt(rgb[0]);
                        const g = parseInt(rgb[1]);
                        const b = parseInt(rgb[2]);
                        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
                        return brightness < 128; // Se brightness < 128, é fundo escuro
                    }
                }
            }
            
            // Por padrão, assumir fundo claro
            return false;
        }

        // Função para detectar se é conta demo
        function isDemoAccount() {
            const currentUser = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            // Se não há usuário logado, permanece demo (experiência de demonstração)
            if (!currentUser || !currentUser.id) {
                return true;
            }
            
            // É demo se explicitamente marcado como demo
            return currentUser.profile === 'demo' || currentUser.id === 'demo' || currentUser.email?.includes('demo');
        }

        // Função para detectar se é conta real (não demo)
        function isRealAccount() {
            const currentUser = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            // É conta real se tem usuário logado e NÃO é demo
            return currentUser && currentUser.id && !isDemoAccount();
        }

        // Função para atualizar interface com dados do usuário
        function updateUserInterface() {
            const currentUser = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            if (currentUser && currentUser.fullName) {
                const vendorNameElement = document.getElementById('vendor-name');
                if (vendorNameElement) {
                    vendorNameElement.textContent = currentUser.fullName;
                    console.log('👤 Nome do usuário atualizado:', currentUser.fullName);
                }
            }
        }

        // Função para criar conta demo padrão
        function createDemoAccount() {
            const demoUser = {
                id: 'demo',
                firstName: 'Maria',
                lastName: 'Santos',
                fullName: 'Maria Santos',
                email: 'demo@e2eshop.com',
                password: 'demo123',
                profile: 'demo',
                role: 'vendedor',
                createdAt: new Date().toISOString(),
                lastLogin: new Date().toISOString(),
                avatar: 'assets/images/default-avatar.png'
            };
            localStorage.setItem('e2e_current_user', JSON.stringify(demoUser));
            console.log('🏢 Conta demo criada:', demoUser);
            return demoUser;
        }

        // Função para gerar dados demo realistas (empresa estabelecida)
        function generateRealisticDemoData() {
            console.log('🏢 Gerando dados demo realistas para empresa estabelecida...');
            
            // Usar dados unificados se já existirem
            if (window.demoData) {
                console.log('🔄 Usando dados unificados existentes...');
                return window.demoData;
            }
            
            // Dados de vendas realistas para empresa R$ 100k+ mensais (unificados)
            const monthlySales = 196074.17; // Valor fixo para consistência
            const productsSold = 1405; // Valor fixo para consistência
            const commission = 15685.93; // Valor fixo para consistência
            const rating = 4.7; // Valor fixo para consistência
            
            // Gerar percentuais consistentes para empresa estabelecida
            const dailyGrowth = 15 + Math.floor(Math.random() * 10); // 15-25% crescimento diário
            const monthlyGrowth = dailyGrowth + Math.floor(Math.random() * 8); // 20-33% crescimento mensal
            const productsGrowth = 12 + Math.floor(Math.random() * 10); // 12-22% crescimento produtos
            const commissionGrowth = 8 + Math.floor(Math.random() * 8); // 8-16% crescimento comissão
            
            // Gerar vendas recentes realistas (limitado a 5)
            const recentSales = generateRecentSales(5);
            
            // Usar produtos reais dos 30 produtos do sistema para as seções do dashboard (limitado a 5)
            const localProducts = getLocalProducts();
            const productsWithSales = localProducts.slice(0, 5).map(product => {
                const sales = Math.floor(Math.random() * 150) + 50; // 50-200 vendas
                const revenue = sales * product.price;
                const performance = 60 + Math.random() * 35; // 60-95% performance
                
                return {
                    ...product,
                    sales: sales,
                    revenue: revenue,
                    performance: performance,
                    stock: Math.floor(Math.random() * 100) + 50, // 50-150 estoque
                    rating: 4.2 + Math.random() * 0.7 // 4.2-4.9 estrelas
                };
            });
            
            return {
                monthlySales: monthlySales,
                productsSold: productsSold,
                commission: commission,
                rating: rating,
                recentSales: recentSales,
                products: productsWithSales,
                dailyGrowth: dailyGrowth,
                monthlyGrowth: monthlyGrowth,
                productsGrowth: productsGrowth,
                commissionGrowth: commissionGrowth,
                growth: 15 + Math.random() * 10, // 15-25% crescimento
                conversionRate: 3.5 + Math.random() * 0.7, // 3.5-4.2%
                retention: 85 + Math.random() * 5, // 85-90%
                nps: 70 + Math.random() * 15 // 70-85
            };
        }

        // Função para gerar vendas recentes com produtos reais
        function generateRecentSales(count) {
            const sales = [];
            const products = getLocalProducts();
            const statuses = ['completed', 'processing', 'shipped'];
            const paymentMethods = ['credit_card', 'pix', 'boleto'];
            
            for (let i = 0; i < count; i++) {
                const product = products[Math.floor(Math.random() * products.length)];
                const quantity = Math.floor(Math.random() * 3) + 1; // 1-3 unidades
                const total = product.price * quantity;
                const date = new Date();
                date.setDate(date.getDate() - Math.floor(Math.random() * 30)); // Últimos 30 dias
                
                sales.push({
                    id: `sale_${i + 1}`,
                    product: product.name,
                    customer: generateRandomCustomerName(),
                    quantity: quantity,
                    total: total,
                    status: statuses[Math.floor(Math.random() * statuses.length)],
                    paymentMethod: paymentMethods[Math.floor(Math.random() * paymentMethods.length)],
                    date: date.toISOString(),
                    rating: 4.0 + Math.random() * 1.0
                });
            }
            
            return sales.sort((a, b) => new Date(b.date) - new Date(a.date));
        }

        // Função para gerar nomes de clientes aleatórios
        function generateRandomCustomerName() {
            const firstNames = ['Ana', 'Carlos', 'Maria', 'João', 'Fernanda', 'Pedro', 'Juliana', 'Rafael', 'Camila', 'Lucas'];
            const lastNames = ['Silva', 'Santos', 'Oliveira', 'Costa', 'Pereira', 'Rodrigues', 'Almeida', 'Lima', 'Gomes', 'Ribeiro'];
            
            const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
            const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
            
            return `${firstName} ${lastName}`;
        }

        // Função para forçar dados demonstrativos altos imediatamente
        function forceHighDemoData() {
            console.log('🚀 Forçando dados demonstrativos altos imediatamente...');
            
            // Dados demonstrativos altos fixos (unificados)
            const highDemoData = {
                monthlySales: 196074.17,
                productsSold: 1405,
                commission: 15685.93,
                rating: 4.7,
                todaySales: 9803.71, // 5% das vendas mensais
                dailyGrowth: 12,
                monthlyGrowth: 18,
                productsGrowth: 15,
                commissionGrowth: 8
            };
            
            // Garantir que apenas UMA fonte de dados seja usada
            console.log('🔧 Unificando dados demonstrativos...');
            window.demoData = highDemoData; // Armazenar globalmente para evitar duplicação
            
            // Atualizar elementos principais imediatamente
            updateElementsImmediately(highDemoData);
            
            // Atualizar todas as seções do dashboard
            updateAllDashboardSections(highDemoData);
            
            
            console.log('✅ Dados demonstrativos altos aplicados');
        }
        
        // Função para atualizar todas as seções do dashboard
        function updateAllDashboardSections(data) {
            console.log('🔧 Atualizando todas as seções do dashboard...');
            
            // 1. Atualizar Performance Analytics
            updatePerformanceAnalyticsSection(data);
            
            // Campos removidos/ocultos: não atualizar seções de lista
            // updateFeaturedProductsSection(data);
            // updateRecentSalesSection(data);
            
            console.log('✅ Todas as seções do dashboard atualizadas');
        }
        
        // Função para atualizar Performance Analytics
        function updatePerformanceAnalyticsSection(data) {
            console.log('📊 Atualizando Performance Analytics...');
            
            // Procurar por todos os elementos possíveis de Performance Analytics
            const allElements = document.querySelectorAll('*');
            let foundElements = 0;
            
            allElements.forEach(element => {
                const text = element.textContent || '';
                
                // Procurar por elementos que contenham "R$ 0,00" ou "0" e estejam na seção de Performance Analytics
                if (text.includes('R$ 0,00') || text.includes('0') && text.length < 10) {
                    const parent = element.closest('.performance-analytics, .analytics-section, [class*="performance"], [class*="analytics"]');
                    if (parent) {
                        // Verificar se é um elemento de valor
                        if (element.tagName === 'SPAN' || element.tagName === 'DIV' || element.tagName === 'P') {
                            // Tentar identificar o tipo de métrica pelo contexto
                            const parentText = parent.textContent || '';
                            
                            if (parentText.includes('Vendas') && parentText.includes('Mês')) {
                                element.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                                foundElements++;
                            } else if (parentText.includes('Produtos') && parentText.includes('Vendidos')) {
                                element.textContent = data.productsSold.toString();
                                foundElements++;
                            } else if (parentText.includes('Comissão')) {
                                element.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                                foundElements++;
                            } else if (parentText.includes('Avaliação')) {
                                element.textContent = data.rating.toFixed(1);
                                foundElements++;
                            }
                        }
                    }
                }
            });
            
            console.log(`✅ Performance Analytics: ${foundElements} elementos atualizados`);
        }
        
        // Recalcular KPIs a partir de orders e myProducts e sincronizar Painel/Performance
        // Helpers para normalizar pedidos reais
        function getOrderTotal(order) {
            let v = order?.total ?? order?.amount ?? order?.totalPrice ?? order?.grandTotal ?? 0;
            if (typeof v === 'string') {
                v = parseFloat(v.replace('R$','').replace(/\./g,'').replace(',','.')) || 0;
            }
            return Number(v) || 0;
        }
        function getOrderDate(order) {
            const d = order?.date || order?.createdAt || order?.created_at || order?.timestamp || order?.orderDate;
            return d ? new Date(d) : new Date();
        }
        function getOrderItemsCount(order) {
            const list = order?.items || order?.products || order?.cart || order?.cartItems || [];
            if (Array.isArray(list)) {
                return list.reduce((n, it) => n + (it.quantity ?? it.qty ?? 1), 0);
            }
            return 0;
        }

        function computeAndSyncPerformance() {
            try {
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                let monthlySales = 0, productsSold = 0;
                orders.forEach(o => {
                    monthlySales += getOrderTotal(o);
                    productsSold += getOrderItemsCount(o);
                });

                // Se não houver pedidos, usar vendas recentes reais
                if (monthlySales === 0 && productsSold === 0 && Array.isArray(vendorData.recentSales)) {
                    vendorData.recentSales.forEach(s => {
                        const val = typeof s.amount === 'number' ? s.amount : parseFloat(String(s.amount||'').replace('R$','').replace(/\./g,'').replace(',','.')) || 0;
                        monthlySales += val;
                        productsSold += (s.quantity || 1);
                    });
                }

                // Se ainda zero, estimar a partir de myProducts (preço * vendas)
                if (monthlySales === 0 && productsSold === 0 && Array.isArray(vendorData.myProducts)) {
                    vendorData.myProducts.forEach(p => {
                        const price = Number(p.price) || 0;
                        const sales = Number(p.sales) || 0;
                        monthlySales += price * sales;
                        productsSold += sales;
                    });
                }
                // Sincronizar objetos centrais
                vendorData.monthlySales = monthlySales;
                vendorData.productsSold = productsSold;
                // Painel de Vendas Inteligente
                const welcome = document.getElementById('welcome-sales');
                if (welcome) welcome.textContent = `R$ ${monthlySales.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
                // Performance Analytics KPIs
                const salesEl = document.getElementById('analytics-sales');
                const productsEl = document.getElementById('analytics-products');
                const commissionEl = document.getElementById('analytics-commission');
                const ratingEl = document.getElementById('analytics-rating');
                if (salesEl) salesEl.textContent = `R$ ${monthlySales.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
                if (productsEl) productsEl.textContent = productsSold.toString();
                // Comissão simples (8%)
                const commission = monthlySales * 0.08;
                if (commissionEl) commissionEl.textContent = `R$ ${commission.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;
                // Rating permanece o existente (se houver)
                if (ratingEl && typeof vendorData.rating === 'number') {
                    ratingEl.textContent = vendorData.rating.toFixed(1);
                }
                // Barras
                const salesBar = document.getElementById('analytics-sales-bar');
                const productsBar = document.getElementById('analytics-products-bar');
                const commissionBar = document.getElementById('analytics-commission-bar');
                if (salesBar) salesBar.style.width = `${Math.min(100, (monthlySales/50000)*100)}%`;
                if (productsBar) productsBar.style.width = `${Math.min(100, (productsSold/100)*100)}%`;
                if (commissionBar) commissionBar.style.width = `${Math.min(100, (commission/10000)*100)}%`;
                console.log('✅ Performance sincronizada a partir de orders:', { monthlySales, productsSold, commission });

                // Forecast removido a pedido: não renderizar
            } catch (e) {
                console.warn('computeAndSyncPerformance:', e);
            }
        }

        // Previsão de vendas baseada em pedidos anteriores (heurística simples)
        function renderSalesForecast(orders = []) {
            try {
                // Extrair vendas diárias dos últimos 30 dias
                const map = {};
                const now = new Date();
                orders.forEach(o => {
                    const d = getOrderDate(o);
                    if (!d || (now - d) > 30*24*60*60*1000) return;
                    const key = d.toISOString().slice(0,10);
                    map[key] = (map[key] || 0) + getOrderTotal(o);
                });

                // Complementar com recentSales reais quando não houver orders
                if (Object.keys(map).length === 0 && Array.isArray(vendorData.recentSales)) {
                    vendorData.recentSales.forEach(s => {
                        const d = s.date ? new Date(s.date) : null;
                        if (!d || (now - d) > 30*24*60*60*1000) return;
                        const key = d.toISOString().slice(0,10);
                        const val = typeof s.amount === 'number' ? s.amount : parseFloat(String(s.amount||'').replace('R$','').replace(/\./g,'').replace(',','.')) || 0;
                        map[key] = (map[key] || 0) + val;
                    });
                }

                // Como último recurso, estimar a partir de myProducts
                if (Object.keys(map).length === 0 && Array.isArray(vendorData.myProducts)) {
                    const estimatedMonthly = vendorData.myProducts.reduce((sum,p)=>sum + ((Number(p.price)||0)*(Number(p.sales)||0)), 0);
                    const daily = estimatedMonthly/30;
                    for (let i=0;i<30;i++) {
                        const d = new Date(now.getFullYear(), now.getMonth(), now.getDate()-i);
                        const key = d.toISOString().slice(0,10);
                        map[key] = daily;
                    }
                }

                // Fallback específico para DEMO: se ainda não houver dados, derive do monthlySales demo
                if (Object.keys(map).length === 0 && typeof isDemoAccount === 'function' && isDemoAccount()) {
                    const baseMonthly = Number(vendorData.monthlySales) || 50000; // valor razoável
                    const daily = baseMonthly/30;
                    for (let i=0;i<30;i++) {
                        const d = new Date(now.getFullYear(), now.getMonth(), now.getDate()-i);
                        const key = d.toISOString().slice(0,10);
                        // variação suave
                        map[key] = daily * (0.85 + Math.random()*0.3);
                    }
                }
                const last7 = Array.from({length:7}, (_,i) => {
                    const d = new Date(now.getFullYear(), now.getMonth(), now.getDate()-i);
                    const key = d.toISOString().slice(0,10);
                    return map[key] || 0;
                }).reverse();

                // Média e tendência simples
                const avg = last7.reduce((a,b)=>a+b,0)/ (last7.length||1);
                const trend = (last7[last7.length-1] - last7[0]) / (last7.length||1); // inclinação média
                let forecast7d = avg*7 + trend*3; // leve projeção
                let forecast30d = avg*30 + trend*10;

                // Para DEMO, alinhar com vendas do mês demo (se disponível)
                if (typeof isDemoAccount === 'function' && isDemoAccount()) {
                    const demoMonthly = Number(vendorData.monthlySales) || avg*30;
                    forecast7d = demoMonthly * 0.25;
                    forecast30d = demoMonthly * 1.00;
                }

                const f7 = document.getElementById('forecast-7d');
                const f30 = document.getElementById('forecast-30d');
                if (f7) f7.textContent = `R$ ${Math.max(0, forecast7d).toLocaleString('pt-BR',{minimumFractionDigits:2})}`;
                if (f30) f30.textContent = `R$ ${Math.max(0, forecast30d).toLocaleString('pt-BR',{minimumFractionDigits:2})}`;
                // Tabela
                const table = document.getElementById('forecast-table-body');
                if (table) {
                    table.innerHTML = `
                        <tr>
                            <td class="px-4 py-2 text-gray-700">Próximos 7 dias</td>
                            <td class="px-4 py-2 font-semibold text-teal-700">R$ ${Math.max(0, forecast7d).toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 text-gray-700">Próximos 30 dias</td>
                            <td class="px-4 py-2 font-semibold text-teal-700">R$ ${Math.max(0, forecast30d).toLocaleString('pt-BR',{minimumFractionDigits:2})}</td>
                        </tr>`;
                }

                // Mini gráfico de barras para próximos 7 dias
                const chart = document.getElementById('forecast-chart');
                if (chart) {
                    const base = Math.max(...last7, 1);
                    chart.innerHTML = Array.from({length:7}, (_,i)=>{
                        const val = Math.max(2, Math.round(((last7[i]||0)/base)*100));
                        return `<div style="height:${val}%" class="bg-teal-500 rounded"></div>`;
                    }).join('');
                }
            } catch (e) {
                console.warn('renderSalesForecast:', e);
            }
        }
        
        // Função para atualizar Produtos em Destaque
        function updateFeaturedProductsSection(data) {
            console.log('⭐ Atualizando Produtos em Destaque...');
            const featuredSection = document.getElementById('top-products');
            if (featuredSection && featuredSection.offsetParent !== null) {
                console.log('✅ Seção de Produtos em Destaque encontrada');
                
                // Usar produtos reais dos 30 produtos do sistema (5 produtos)
                const realProducts = [
                    { name: 'Smart TV Lenovo 55" 4K UHD', sales: 245, revenue: 245000, price: 1204.84 },
                    { name: 'Fone Bluetooth JBL com Cancelamento de Ruído', sales: 189, revenue: 189000, price: 499.25 },
                    { name: 'Aspirador Robô Britania Wi-Fi', sales: 156, revenue: 156000, price: 789.28 },
                    { name: 'Fone Bluetooth Dell com Cancelamento de Ruído', sales: 134, revenue: 134000, price: 760.00 },
                    { name: 'Aspirador Robô Mondial Wi-Fi', sales: 98, revenue: 98000, price: 450.00 }
                ];
                
                // Limpar conteúdo existente e adicionar produtos
                const contentArea = featuredSection;
                if (contentArea) {
                    contentArea.innerHTML = '';
                    const html = realProducts.map((product, index) => `
                        <div class="featured-product-item bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-3 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-gray-900">${product.name}</h4>
                                    <p class="text-sm text-gray-600">${product.sales} vendas</p>
                                    <p class="text-sm text-green-600 font-medium">R$ ${product.revenue.toLocaleString('pt-BR')}</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-2xl font-bold text-blue-600">#${index + 1}</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    
                    contentArea.innerHTML = html;
                }
                
                console.log('✅ Produtos em Destaque atualizados');
            } else {
                console.log('⚠️ Seção de Produtos em Destaque não encontrada');
            }
        }
        
        // Função para atualizar Vendas Recentes
        function updateRecentSalesSection(data) {
            console.log('📈 Atualizando Vendas Recentes...');
            const recentSection = document.getElementById('recent-sales');
            if (recentSection && recentSection.offsetParent !== null) {
                console.log('✅ Seção de Vendas Recentes encontrada');
                
                // Usar produtos reais dos 30 produtos do sistema (5 vendas)
                const recentSales = [
                    { product: 'Smart TV Lenovo 55" 4K UHD', customer: 'João Silva', date: 'Hoje', amount: 1204.84 },
                    { product: 'Fone Bluetooth JBL com Cancelamento de Ruído', customer: 'Maria Santos', date: 'Ontem', amount: 499.25 },
                    { product: 'Aspirador Robô Britania Wi-Fi', customer: 'Pedro Costa', date: '2 dias atrás', amount: 789.28 },
                    { product: 'Fone Bluetooth Dell com Cancelamento de Ruído', customer: 'Ana Lima', date: '3 dias atrás', amount: 760.00 },
                    { product: 'Aspirador Robô Mondial Wi-Fi', customer: 'Carlos Oliveira', date: '4 dias atrás', amount: 450.00 }
                ];
                
                // Limpar conteúdo existente e adicionar vendas
                const contentArea = recentSection;
                if (contentArea) {
                    contentArea.innerHTML = '';
                    const html = recentSales.map(sale => `
                        <div class="recent-sale-item bg-white p-3 rounded-lg shadow-sm border border-gray-200 mb-2 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="font-semibold text-gray-900">${sale.product}</h4>
                                    <p class="text-sm text-gray-600">${sale.customer}</p>
                                    <p class="text-sm text-gray-500">${sale.date}</p>
                                </div>
                                <div class="text-right">
                                    <p class="font-bold text-green-600">R$ ${sale.amount.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    
                    contentArea.innerHTML = html;
                }
                
                console.log('✅ Vendas Recentes atualizadas');
            } else {
                console.log('⚠️ Seção de Vendas Recentes não encontrada');
            }
        }
        
        // Função para atualizar elementos imediatamente
        function updateElementsImmediately(data) {
            console.log('⚡ Atualizando elementos imediatamente...');
            
            // Atualizar vendas mensais
            const salesElements = document.querySelectorAll('#analytics-sales, .sales-value, .monthly-sales-value, [data-sales]');
            salesElements.forEach(el => {
                el.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            });
            
            // Atualizar produtos vendidos
            const productsElements = document.querySelectorAll('#analytics-products, .products-sold-value, [data-products]');
            productsElements.forEach(el => {
                el.textContent = data.productsSold.toString();
            });
            
            // Atualizar comissão
            const commissionElements = document.querySelectorAll('#analytics-commission, .commission-value, [data-commission]');
            commissionElements.forEach(el => {
                el.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            });
            
            // Atualizar avaliação
            const ratingElements = document.querySelectorAll('#analytics-rating, .rating-value, [data-rating]');
            ratingElements.forEach(el => {
                el.textContent = data.rating.toFixed(1);
            });
            
            // Atualizar vendas hoje
            const todayElements = document.querySelectorAll('.today-sales-value, .smart-panel-today-sales, [data-today-sales]');
            todayElements.forEach(el => {
                el.textContent = `R$ ${data.todaySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            });
            
            // Atualizar seções específicas
            updateAllDashboardSections(data);
            
            // Forçar atualização de todos os elementos zerados
            forceUpdateAllZeroElements(data);
            
            
            console.log('✅ Elementos atualizados imediatamente');
        }
        
        // Função para forçar atualização de todos os elementos zerados
        function forceUpdateAllZeroElements(data) {
            console.log('🔧 Forçando atualização de todos os elementos zerados...');
            
            // Procurar por todos os elementos que contenham valores zerados
            const allElements = document.querySelectorAll('*');
            let updatedElements = 0;
            
            allElements.forEach(element => {
                const text = element.textContent || '';
                
                // Procurar por elementos com valores zerados
                if (text === 'R$ 0,00' || text === '0' || text === '0,0' || text === 'R$ 0,00') {
                    const parent = element.parentElement;
                    const parentText = parent ? parent.textContent || '' : '';
                    
                    // Identificar tipo de métrica pelo contexto
                    if (parentText.includes('Vendas') && parentText.includes('Mês')) {
                        element.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                        updatedElements++;
                    } else if (parentText.includes('Produtos') && parentText.includes('Vendidos')) {
                        element.textContent = data.productsSold.toString();
                        updatedElements++;
                    } else if (parentText.includes('Comissão')) {
                        element.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                        updatedElements++;
                    } else if (parentText.includes('Avaliação')) {
                        element.textContent = data.rating.toFixed(1);
                        updatedElements++;
                    } else if (parentText.includes('Vendas') && parentText.includes('Hoje')) {
                        element.textContent = `R$ ${data.todaySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                        updatedElements++;
                    }
                }
            });
            
            console.log(`✅ ${updatedElements} elementos zerados atualizados`);
        }
        
        
        
        // Função para atualizar todas as seções do dashboard
        function updateAllDashboardSections(data) {
            console.log('🔧 Atualizando todas as seções do dashboard...');
            
            // 1. Atualizar Performance Analytics
            updatePerformanceAnalyticsSection(data);
            
            // Campos removidos/ocultos: não atualizar seções de lista
            // updateFeaturedProductsSection(data);
            // updateRecentSalesSection(data);
            
            // 4. Atualizar tabela de produtos
            updateProductsTableSection(data);
            
            console.log('✅ Todas as seções atualizadas');
        }
        
        // Função para atualizar Performance Analytics
        function updatePerformanceAnalyticsSection(data) {
            console.log('📊 Atualizando Performance Analytics...');
            
            // Procurar por todos os elementos possíveis de Performance Analytics
            const allElements = document.querySelectorAll('*');
            let foundElements = 0;
            
            allElements.forEach(element => {
                const text = element.textContent || '';
                
                // Procurar por elementos que contenham "R$ 0,00" ou "0" e estejam na seção de Performance Analytics
                if (text.includes('R$ 0,00') || text.includes('0') && text.length < 10) {
                    const parent = element.closest('.performance-analytics, .analytics-section, [class*="performance"], [class*="analytics"]');
                    if (parent) {
                        // Verificar se é um elemento de valor
                        if (element.tagName === 'SPAN' || element.tagName === 'DIV' || element.tagName === 'P') {
                            // Tentar identificar o tipo de métrica pelo contexto
                            const parentText = parent.textContent || '';
                            
                            if (parentText.includes('Vendas') && parentText.includes('Mês')) {
                                element.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                                foundElements++;
                            } else if (parentText.includes('Produtos') && parentText.includes('Vendidos')) {
                                element.textContent = data.productsSold.toString();
                                foundElements++;
                            } else if (parentText.includes('Comissão')) {
                                element.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                                foundElements++;
                            } else if (parentText.includes('Avaliação')) {
                                element.textContent = data.rating.toFixed(1);
                                foundElements++;
                            }
                        }
                    }
                }
            });
            
            console.log(`✅ Performance Analytics: ${foundElements} elementos atualizados`);
        }
        
        
        // Função para atualizar tabela de produtos
        function updateProductsTableSection(data) {
            console.log('📦 Atualizando tabela de produtos...');
            
            const tableRows = document.querySelectorAll('#analytics-products-table tbody tr, .products-table tbody tr');
            tableRows.forEach((row, index) => {
                const salesCell = row.querySelector('td:nth-child(4), .sales-cell, [data-sales]');
                if (salesCell) {
                    const sales = Math.floor(Math.random() * 100) + 50; // 50-150 vendas
                    salesCell.textContent = sales.toString();
                }
            });
        }
        
        // Função para forçar carregamento de dados demo
        function forceDemoData() {
            console.log('🔄 Forçando carregamento de dados demo...');
            
            // Limpar dados existentes
            vendorData.myProducts = [];
            
            // Verificar se é conta demo
            if (isDemoAccount()) {
                console.log('🏢 Conta demo detectada - carregando dados realistas...');
                const demoData = generateRealisticDemoData();
                
                // Aplicar dados demo realistas
                vendorData.monthlySales = demoData.monthlySales;
                vendorData.productsSold = demoData.productsSold;
                vendorData.commission = demoData.commission;
                vendorData.rating = demoData.rating;
                vendorData.recentSales = demoData.recentSales;
                vendorData.myProducts = demoData.products;
                
                // Sincronizar todos os dados
                syncAllData(demoData);
                
                // Forçar atualização das seções
                setTimeout(() => {
                    updateFeaturedProductsSection(demoData);
                    updateRecentSalesSection(demoData);
                }, 1000);
                
                console.log('📊 Dados demo realistas aplicados:', {
                    monthlySales: `R$ ${demoData.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`,
                    productsSold: demoData.productsSold,
                    commission: `R$ ${demoData.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`,
                    rating: demoData.rating.toFixed(1)
                });
            } else {
                console.log('👤 Conta real detectada - carregando dados zerados...');
                
                // Carregar produtos com dados zerados para contas reais
                const localProducts = getLocalProducts();
                vendorData.myProducts = localProducts.map(product => ({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    stock: product.stock,
                    sales: 0,
                    category: product.category,
                    description: product.description || '',
                    image: product.image,
                    brand: product.brand,
                    isActive: true
                }));
                
                // Dados zerados para contas reais
                vendorData.monthlySales = 0;
                vendorData.productsSold = 0;
                vendorData.commission = 0;
                vendorData.rating = 0;
                vendorData.recentSales = [];
                
                // Atualizar interface com dados zerados
                updateKPIs({
                    monthlySales: 0,
                    productsSold: 0,
                    commission: 0,
                    rating: 0
                });
            }
            
            console.log('📊 Produtos processados:', vendorData.myProducts.length);
            console.log('📦 Total de páginas:', Math.ceil(vendorData.myProducts.length / myProductsPageSize));
            
            // Renderizar tabela com paginação
            renderMyProductsTable(1);
            
            // Salvar dados
            saveVendorData();
            
            console.log('✅ Dados carregados com sucesso!');
        }

        // Função para atualizar KPIs na interface
        function updateKPIs(data) {
            console.log('🔄 Atualizando KPIs na interface...', data);
            
            // Atualizar elementos do Performance Analytics
            const monthlySalesEl = document.getElementById('monthly-sales');
            const productsSoldEl = document.getElementById('products-sold');
            const commissionEl = document.getElementById('commission');
            const ratingEl = document.getElementById('rating');
            
            if (monthlySalesEl) {
                monthlySalesEl.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                console.log('✅ Vendas do mês atualizadas:', monthlySalesEl.textContent);
            }
            
            if (productsSoldEl) {
                productsSoldEl.textContent = data.productsSold.toString();
                console.log('✅ Produtos vendidos atualizados:', productsSoldEl.textContent);
            }
            
            if (commissionEl) {
                commissionEl.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                console.log('✅ Comissão atualizada:', commissionEl.textContent);
            }
            
            if (ratingEl) {
                ratingEl.textContent = data.rating.toFixed(1);
                console.log('✅ Avaliação atualizada:', ratingEl.textContent);
            }
            
            // Atualizar barras de progresso
            updateProgressBars(data);
        }

        // Função para atualizar barras de progresso
        function updateProgressBars(data) {
            const salesBar = document.getElementById('monthly-sales-bar');
            const productsBar = document.getElementById('products-sold-bar');
            const commissionBar = document.getElementById('commission-bar');
            const ratingBar = document.getElementById('rating-bar');
            
            if (salesBar) {
                const salesPercentage = Math.min((data.monthlySales / 200000) * 100, 100);
                salesBar.style.width = `${salesPercentage}%`;
                console.log('✅ Barra de vendas atualizada:', `${salesPercentage}%`);
            }
            
            if (productsBar) {
                const productsPercentage = Math.min((data.productsSold / 1500) * 100, 100);
                productsBar.style.width = `${productsPercentage}%`;
                console.log('✅ Barra de produtos atualizada:', `${productsPercentage}%`);
            }
            
            if (commissionBar) {
                const commissionPercentage = Math.min((data.commission / 10000) * 100, 100);
                commissionBar.style.width = `${commissionPercentage}%`;
                console.log('✅ Barra de comissão atualizada:', `${commissionPercentage}%`);
            }
            
            if (ratingBar) {
                const ratingPercentage = (data.rating / 5) * 100;
                ratingBar.style.width = `${ratingPercentage}%`;
                console.log('✅ Barra de avaliação atualizada:', `${ratingPercentage}%`);
            }
        }

        // Função centralizada para sincronizar todos os dados (COM TRY-CATCH)
        function syncAllData(data) {
            console.log('🔄 Sincronizando todos os dados...', data);
            
            try {
                // 1. Atualizar Performance Analytics
                updateKPIs(data);
                
                // 2. Atualizar Painel de Vendas Inteligente
                const smartPanelSales = document.querySelector('.smart-panel-sales');
                if (smartPanelSales) {
                    smartPanelSales.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                    console.log('✅ Painel de vendas inteligente sincronizado');
                }
                
                // 3. Atualizar cards de resumo com percentuais consistentes
                const summaryCards = document.querySelectorAll('.summary-card');
                summaryCards.forEach((card, index) => {
                    const valueEl = card.querySelector('.summary-value');
                    if (valueEl) {
                        switch(index) {
                            case 0: // Vendas do Mês
                                valueEl.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                                break;
                            case 1: // Produtos Vendidos
                                valueEl.textContent = data.productsSold.toString();
                                break;
                            case 2: // Comissão
                                valueEl.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                                break;
                            case 3: // Avaliação
                                valueEl.textContent = data.rating.toFixed(1);
                                break;
                        }
                    }
                });
                
                // 4. Atualizar percentuais consistentes (SIMPLIFICADO)
                updateConsistentPercentages(data);
                
                // 5. Atualizar Produtos em Destaque
                updateTopProducts(data.products);
                
                // 6. Atualizar Vendas Recentes
                updateRecentSales(data.recentSales);
                
                console.log('✅ Todos os dados sincronizados com sucesso');
            } catch (error) {
                console.error('❌ Erro ao sincronizar dados:', error);
                // Continuar mesmo com erro
            }
        }

        // Função para atualizar percentuais consistentes (SIMPLIFICADA)
        function updateConsistentPercentages(data) {
            console.log('🔄 Atualizando percentuais consistentes...');
            
            try {
                // Atualizar percentual do Painel de Vendas (vs ontem)
                const dailyGrowthElements = document.querySelectorAll('[data-daily-growth]');
                dailyGrowthElements.forEach(element => {
                    element.textContent = `+${data.dailyGrowth}% vs ontem`;
                });
                
                // Atualizar percentuais dos cards (vs mês anterior)
                const monthlyGrowthElements = document.querySelectorAll('[data-monthly-growth]');
                monthlyGrowthElements.forEach(element => {
                    element.textContent = `+${data.monthlyGrowth}% vs mês anterior`;
                });
                
                // Atualizar percentual de produtos
                const productsGrowthElements = document.querySelectorAll('[data-products-growth]');
                productsGrowthElements.forEach(element => {
                    element.textContent = `+${data.productsGrowth}% vs mês anterior`;
                });
                
                // Atualizar percentual de comissão
                const commissionGrowthElements = document.querySelectorAll('[data-commission-growth]');
                commissionGrowthElements.forEach(element => {
                    element.textContent = `+${data.commissionGrowth}% vs mês anterior`;
                });
                
                console.log('✅ Percentuais consistentes atualizados com sucesso');
            } catch (error) {
                console.error('❌ Erro ao atualizar percentuais:', error);
            }
        }

        // Função para forçar atualização dos textos de percentual (SIMPLIFICADA)
        function forceUpdatePercentageTexts(data) {
            console.log('🔧 Forçando atualização dos textos de percentual...');
            
            try {
                // Buscar apenas elementos específicos que podem ter "vs ontem"
                const possibleElements = document.querySelectorAll('.summary-card, .kpi-card, .analytics-card');
                possibleElements.forEach(element => {
                    const text = element.textContent;
                    
                    // Se contém "vs ontem", mudar para "vs mês anterior"
                    if (text.includes('vs ontem')) {
                        const newText = text.replace(/vs ontem/g, 'vs mês anterior');
                        element.textContent = newText;
                        console.log('✅ Texto atualizado:', newText);
                    }
                });
                
                console.log('✅ Textos de percentual atualizados com sucesso');
            } catch (error) {
                console.error('❌ Erro ao atualizar textos de percentual:', error);
            }
        }

        // Função para forçar atualização de todos os elementos possíveis
        function forceUpdateAllPossibleElements(data) {
            console.log('🔧 Forçando atualização de todos os elementos...');
            
            // Tentar todos os seletores possíveis para vendas
            const salesSelectors = [
                '#monthly-sales',
                '#analytics-sales',
                '.smart-panel-sales',
                '.sales-value',
                '.monthly-sales-value',
                '[data-sales]',
                '.kpi-sales',
                '.dashboard-sales',
                '.performance-sales',
                '.analytics-sales-value'
            ];
            
            salesSelectors.forEach(selector => {
                const element = document.querySelector(selector);
                if (element) {
                    element.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                    console.log(`✅ Elemento ${selector} atualizado`);
                }
            });
            
            // Tentar todos os seletores possíveis para produtos vendidos
            const productsSelectors = [
                '#products-sold',
                '#analytics-products',
                '.products-sold-value',
                '.kpi-products',
                '[data-products]',
                '.performance-products',
                '.analytics-products-value'
            ];
            
            productsSelectors.forEach(selector => {
                const element = document.querySelector(selector);
                if (element) {
                    element.textContent = data.productsSold.toString();
                    console.log(`✅ Elemento ${selector} atualizado`);
                }
            });
            
            // Tentar todos os seletores possíveis para comissão
            const commissionSelectors = [
                '#commission',
                '#analytics-commission',
                '.commission-value',
                '.kpi-commission',
                '[data-commission]',
                '.performance-commission',
                '.analytics-commission-value'
            ];
            
            commissionSelectors.forEach(selector => {
                const element = document.querySelector(selector);
                if (element) {
                    element.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                    console.log(`✅ Elemento ${selector} atualizado`);
                }
            });
            
            // Tentar todos os seletores possíveis para avaliação
            const ratingSelectors = [
                '#rating',
                '#analytics-rating',
                '.rating-value',
                '.kpi-rating',
                '[data-rating]',
                '.performance-rating',
                '.analytics-rating-value'
            ];
            
            ratingSelectors.forEach(selector => {
                const element = document.querySelector(selector);
                if (element) {
                    element.textContent = data.rating.toFixed(1);
                    console.log(`✅ Elemento ${selector} atualizado`);
                }
            });
            
            // Forçar atualização de barras de progresso
            updateProgressBars(data);
            
            // Atualizar seções específicas que estão zeradas
            updateSpecificSections(data);
            
            console.log('✅ Todos os elementos possíveis atualizados');
        }
        
        // Função para atualizar seções específicas
        function updateSpecificSections(data) {
            console.log('🔧 Atualizando seções específicas...');
            
            // Atualizar "Vendas Hoje" no Painel de Vendas Inteligente
            const todaySalesElement = document.querySelector('.today-sales-value, .smart-panel-today-sales, [data-today-sales]');
            if (todaySalesElement) {
                const todaySales = data.monthlySales * 0.05; // 5% das vendas mensais
                todaySalesElement.textContent = `R$ ${todaySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                console.log('✅ Vendas Hoje atualizada');
            }
            
            // Atualizar Performance Analytics
            updatePerformanceAnalytics(data);
            
            // Atualizar Produtos em Destaque
            updateFeaturedProducts(data);
            
            // Atualizar Vendas Recentes
            updateRecentSales(data);
            
            // Atualizar tabela de produtos com vendas
            updateProductsTableWithSales(data);
        }
        
        // Função para atualizar Performance Analytics
        function updatePerformanceAnalytics(data) {
            console.log('📊 Atualizando Performance Analytics...');
            
            // Atualizar cards de Performance Analytics
            const performanceCards = document.querySelectorAll('.performance-analytics .card');
            performanceCards.forEach((card, index) => {
                const valueElement = card.querySelector('.value, .card-value, .metric-value');
                if (valueElement) {
                    switch(index) {
                        case 0: // Vendas do Mês
                            valueElement.textContent = `R$ ${data.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                            break;
                        case 1: // Produtos Vendidos
                            valueElement.textContent = data.productsSold.toString();
                            break;
                        case 2: // Comissão
                            valueElement.textContent = `R$ ${data.commission.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                            break;
                        case 3: // Avaliação
                            valueElement.textContent = data.rating.toFixed(1);
                            break;
                    }
                }
            });
        }
        
        // Função para atualizar Produtos em Destaque
        function updateFeaturedProducts(data) {
            console.log('⭐ Atualizando Produtos em Destaque...');
            
            const featuredSection = document.querySelector('.featured-products, .produtos-destaque');
            if (featuredSection) {
                const products = data.productsWithSales || [];
                const topProducts = products.slice(0, 3); // Top 3 produtos
                
                let html = '';
                topProducts.forEach((product, index) => {
                    html += `
                        <div class="featured-product-item">
                            <div class="product-info">
                                <h4>${product.title}</h4>
                                <p>Vendas: ${product.sales}</p>
                                <p>Receita: R$ ${product.revenue.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                            </div>
                        </div>
                    `;
                });
                
                const contentArea = featuredSection.querySelector('.content, .featured-content');
                if (contentArea) {
                    contentArea.innerHTML = html;
                }
            }
        }
        
        // Função para atualizar Vendas Recentes
        function updateRecentSales(data) {
            console.log('📈 Atualizando Vendas Recentes...');
            
            const recentSalesSection = document.querySelector('.recent-sales, .vendas-recentes');
            if (recentSalesSection) {
                const recentSales = data.recentSales || [];
                
                let html = '';
                recentSales.slice(0, 5).forEach((sale, index) => {
                    html += `
                        <div class="recent-sale-item">
                            <div class="sale-info">
                                <h4>${sale.product}</h4>
                                <p>Cliente: ${sale.customer}</p>
                                <p>Valor: R$ ${sale.amount.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                                <p>Data: ${sale.date}</p>
                            </div>
                        </div>
                    `;
                });
                
                const contentArea = recentSalesSection.querySelector('.content, .recent-content');
                if (contentArea) {
                    contentArea.innerHTML = html;
                }
            }
        }
        
        // Função para atualizar tabela de produtos com vendas
        function updateProductsTableWithSales(data) {
            console.log('📦 Atualizando tabela de produtos com vendas...');
            
            const tableRows = document.querySelectorAll('#analytics-products-table tbody tr');
            tableRows.forEach((row, index) => {
                const salesCell = row.querySelector('td:nth-child(4)'); // Coluna de vendas
                if (salesCell) {
                    const sales = Math.floor(Math.random() * 100) + 10; // 10-110 vendas
                    salesCell.textContent = sales.toString();
                }
            });
        }

        // Renderizar ranking Top 5 por receita
        function renderTopSellers() {
            const container = document.getElementById('top-products');
            if (!container) return;
            const products = Array.isArray(vendorData.myProducts) ? vendorData.myProducts : [];
            if (products.length === 0) {
                container.innerHTML = `<div class="p-4 bg-white rounded-xl border border-gray-200 text-sm text-gray-600">Sem produtos ainda.</div>`;
                return;
            }
            // Receita simulada: price * sales (sales pode ser inexistente)
            const ranked = products.map(p => ({
                name: p.name,
                price: p.price || 0,
                sales: p.sales || 0,
                revenue: (p.price || 0) * (p.sales || 0)
            })).sort((a,b) => b.revenue - a.revenue).slice(0,3);
            container.innerHTML = ranked.map((p, idx) => `
                <div class="flex items-center justify-between p-3 bg-white rounded-xl border border-gray-200">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-amber-100 text-amber-700 rounded-lg flex items-center justify-center font-bold">#${idx+1}</div>
                        <div>
                            <p class="font-medium text-gray-900 text-sm">${p.name}</p>
                            <p class="text-xs text-gray-500">${p.sales} vendas</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="text-amber-700 font-bold">R$ ${p.revenue.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</span>
                        </div>
                    </div>
                `).join('');
        }

        // Conversão por Categoria (estimada a partir de vendas/estoque)
        function renderCategoryConversion() {
            const container = document.getElementById('category-conversion');
            if (!container) return;
            const products = Array.isArray(vendorData.myProducts) ? vendorData.myProducts : [];
            if (products.length === 0) {
                container.innerHTML = `<div class="p-4 bg-white rounded-xl border border-gray-200 text-sm text-gray-600">Sem dados suficientes.</div>`;
                return;
            }
            const byCat = {};
            products.forEach(p => {
                const cat = p.category || 'geral';
                if (!byCat[cat]) byCat[cat] = { sales: 0, stock: 0 };
                byCat[cat].sales += p.sales || 0;
                byCat[cat].stock += (typeof p.stock === 'number' ? p.stock : 0);
            });
            const entries = Object.entries(byCat).map(([cat, v]) => {
                const denom = v.sales + v.stock;
                const rate = denom > 0 ? (v.sales / denom) : 0;
                return { cat, rate, sales: v.sales, stock: v.stock };
            }).sort((a,b) => b.rate - a.rate).slice(0,3);
            container.innerHTML = entries.map(e => `
                <button class="w-full text-left p-3 bg-white rounded-xl border border-gray-200 hover:shadow transition" onclick="openCategoryConversionModal('${e.cat}')">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-medium text-gray-900 text-sm">${getCategoryDisplayName ? getCategoryDisplayName(e.cat) : e.cat}</span>
                        <span class="text-sky-700 font-bold">${(e.rate*100).toFixed(1)}%</span>
                    </div>
                    <div class="w-full bg-sky-100 rounded-full h-2">
                        <div class="bg-sky-500 h-2 rounded-full" style="width:${Math.min(100, e.rate*100)}%"></div>
                    </div>
                    <div class="mt-2 text-xs text-gray-500">Vendas: ${e.sales} • Estoque: ${e.stock}</div>
                </button>
            `).join('');
        }

        // Modal de detalhes para Conversão por Categoria
        function openCategoryConversionModal(categoryKey) {
            const modal = document.getElementById('category-conversion-modal');
            const title = document.getElementById('category-conversion-title');
            const body = document.getElementById('category-conversion-body');
            if (!modal || !body) return;
            const products = (vendorData.myProducts || []).filter(p => (p.category || 'geral') === categoryKey);
            const rows = products.map(p => {
                const denom = (p.sales || 0) + (typeof p.stock === 'number' ? p.stock : 0);
                const rate = denom > 0 ? (p.sales || 0) / denom : 0;
                return { name: p.name, sales: p.sales || 0, stock: p.stock || 0, rate };
            }).sort((a,b) => b.rate - a.rate);
            if (title) title.textContent = `Conversão - ${getCategoryDisplayName ? getCategoryDisplayName(categoryKey) : categoryKey}`;
            body.innerHTML = rows.length ? rows.map(r => `
                <div class="flex items-center justify-between p-2 border-b border-gray-100">
                    <div>
                        <div class="text-sm font-medium text-gray-900">${r.name}</div>
                        <div class="text-xs text-gray-500">Vendas: ${r.sales} • Estoque: ${r.stock}</div>
                    </div>
                    <div class="text-sky-700 font-bold">${(r.rate*100).toFixed(1)}%</div>
                </div>
            `).join('') : '<div class="p-4 text-sm text-gray-600">Sem produtos nesta categoria.</div>';
            modal.classList.remove('hidden');
        }
        function closeCategoryConversionModal() {
            const modal = document.getElementById('category-conversion-modal');
            if (modal) modal.classList.add('hidden');
        }

        // Sincronizar coluna "Vendas" dos produtos a partir de vendas recentes (fallback inteligente)
        function syncProductSales() {
            try {
                const products = Array.isArray(vendorData.myProducts) ? vendorData.myProducts : [];
                // Agregar vendas reais dos pedidos (orders) por produto
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                const salesFromOrders = [];
                orders.forEach(o => {
                    if (Array.isArray(o.items)) {
                        o.items.forEach(it => salesFromOrders.push({ product: it.name || it.title, quantity: it.quantity || 1 }));
                    }
                });
                const sales = Array.isArray(vendorData.recentSales) ? vendorData.recentSales : [];
                if (products.length === 0) return;

                // Mapear por nome (case-insensitive) para ambientes sem id nas vendas
                const nameToCount = {};
                // Contar por nome vindo de recentSales
                sales.forEach(s => {
                    const key = (s.product || '').toLowerCase().trim();
                    if (!key) return;
                    nameToCount[key] = (nameToCount[key] || 0) + (s.quantity || 1);
                });
                // Contar por nome vindo de orders
                salesFromOrders.forEach(s => {
                    const key = (s.product || '').toLowerCase().trim();
                    if (!key) return;
                    nameToCount[key] = (nameToCount[key] || 0) + (s.quantity || 1);
                });

                let anySet = false;
                products.forEach(p => {
                    const key = (p.name || '').toLowerCase().trim();
                    const cnt = nameToCount[key] || 0;
                    if (typeof p.sales !== 'number' || p.sales === 0) {
                        p.sales = cnt;
                        if (cnt > 0) anySet = true;
                    }
                });

                // Fallback: se continuou tudo zero, distribuir um volume pequeno entre produtos
                if (!anySet && products.every(p => (p.sales || 0) === 0)) {
                    const totalOrders = Math.max(sales.length, Math.min(10, products.length * 2));
                    for (let i = 0; i < totalOrders; i++) {
                        const idx = Math.floor(Math.random() * products.length);
                        products[idx].sales = (products[idx].sales || 0) + 1;
                    }
                }
            } catch (e) {
                console.warn('syncProductSales fallback:', e);
            }
        }
        // Função para atualizar Vendas Recentes
        function updateRecentSales(sales) {
            const recentSalesContainer = document.getElementById('recent-sales');
            if (recentSalesContainer && sales && sales.length > 0) {
                recentSalesContainer.innerHTML = sales.slice(0, 5).map(sale => `
                    <div class="flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200">
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-shopping-cart text-green-600 text-sm"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium text-gray-900 text-sm">${sale.customer}</p>
                            <p class="text-gray-600 text-xs">${sale.product}</p>
                            <p class="text-green-600 font-bold text-sm">R$ ${sale.total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                        </div>
                    </div>
                `).join('');
                console.log('✅ Vendas recentes atualizadas');
            }
        }

        // Função para atualizar texto do botão demo
        function updateDemoButtonText() {
            const demoModeText = document.getElementById('demo-mode-text');
            if (demoModeText) {
                if (isDemoAccount()) {
                    demoModeText.textContent = 'Modo Demo';
                } else {
                    demoModeText.textContent = 'Modo Real';
                }
            }
        }

        // Função para forçar atualização imediata dos elementos zerados
        function forceUpdateZeroElements() {
            console.log('🔧 Forçando atualização de elementos zerados...');
            
            if (isDemoAccount()) {
                const demoData = generateRealisticDemoData();
                
                // Forçar atualização de todos os elementos possíveis
                forceUpdateAllPossibleElements(demoData);
                
                // Atualizar percentuais consistentes
                updateConsistentPercentages(demoData);
                
                // CORRIGIR especificamente os cards de resumo
                fixSummaryCardsPercentages(demoData);
                
                // Tentar atualizar elementos específicos que podem estar zerados
                const allTextElements = document.querySelectorAll('*');
                allTextElements.forEach(element => {
                    if (element.textContent === 'R$ 0,00' || element.textContent === '0' || element.textContent === '0,0') {
                        // Tentar identificar o tipo de elemento e atualizar
                        if (element.textContent === 'R$ 0,00') {
                            element.textContent = `R$ ${demoData.monthlySales.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                        } else if (element.textContent === '0' && element.id?.includes('products')) {
                            element.textContent = demoData.productsSold.toString();
                        } else if (element.textContent === '0,0' && element.id?.includes('rating')) {
                            element.textContent = demoData.rating.toFixed(1);
                        }
                    }
                });
                
                console.log('✅ Elementos zerados atualizados');
            }
        }

        // Função específica para corrigir percentuais dos cards de resumo (SIMPLIFICADA)
        function fixSummaryCardsPercentages(data) {
            console.log('🔧 Corrigindo percentuais dos cards de resumo...');
            
            try {
                // Buscar especificamente os cards de resumo
                const summaryCards = document.querySelectorAll('.summary-card');
                summaryCards.forEach((card, index) => {
                    // Buscar apenas elementos de texto que podem conter percentuais
                    const textElements = card.querySelectorAll('p, span, div');
                    textElements.forEach(element => {
                        const text = element.textContent;
                        
                        // Se contém "vs ontem", mudar para "vs mês anterior"
                        if (text.includes('vs ontem')) {
                            let newPercentage;
                            switch(index) {
                                case 0: // Vendas do Mês
                                    newPercentage = `+${data.monthlyGrowth}% vs mês anterior`;
                                    break;
                                case 1: // Produtos Vendidos
                                    newPercentage = `+${data.productsGrowth}% vs mês anterior`;
                                    break;
                                case 2: // Comissão
                                    newPercentage = `+${data.commissionGrowth}% vs mês anterior`;
                                    break;
                                case 3: // Avaliação
                                    newPercentage = `+${data.productsGrowth}% vs mês anterior`;
                                    break;
                                default:
                                    newPercentage = `+${data.monthlyGrowth}% vs mês anterior`;
                            }
                            
                            element.textContent = newPercentage;
                            console.log(`✅ Card ${index} percentual corrigido:`, newPercentage);
                        }
                    });
                });
                
                console.log('✅ Cards de resumo corrigidos com sucesso');
            } catch (error) {
                console.error('❌ Erro ao corrigir cards de resumo:', error);
            }
        }

        // Função para limpar dados demo
        function clearDemoData() {
            console.log('🧹 Limpando dados demo...');
            
            // Limpar dados do vendor
            vendorData.monthlySales = 0;
            vendorData.productsSold = 0;
            vendorData.commission = 0;
            vendorData.rating = 0;
            vendorData.recentSales = [];
            
            // Carregar produtos zerados
            const localProducts = getLocalProducts();
            vendorData.myProducts = localProducts.map(product => ({
                id: product.id,
                name: product.name,
                price: product.price,
                stock: product.stock,
                sales: 0,
                category: product.category,
                description: product.description || '',
                image: product.image,
                brand: product.brand,
                isActive: true
            }));
            
            // Atualizar interface
            updateKPIs({
                monthlySales: 0,
                productsSold: 0,
                commission: 0,
                rating: 0
            });
            
            renderMyProductsTable(1);
            saveVendorData();
            
            console.log('✅ Dados demo limpos');
        }

        // Função para alternar entre modo demo e modo real
        function toggleDemoMode() {
            console.log('🔄 Alternando modo demo...');
            
            const currentUser = JSON.parse(localStorage.getItem('e2e_current_user') || '{}');
            const demoModeText = document.getElementById('demo-mode-text');
            
            if (currentUser.profile === 'demo' || currentUser.id === 'demo') {
                // Mudar para modo real
                currentUser.profile = 'vendedor';
                currentUser.id = 'real_user_' + Date.now();
                currentUser.email = 'usuario@real.com';
                
                localStorage.setItem('e2e_current_user', JSON.stringify(currentUser));
                
                if (demoModeText) {
                    demoModeText.textContent = 'Modo Real';
                }
                
                console.log('👤 Modo real ativado - dados zerados');
                
                // Limpar dados demo
                clearDemoData();
                
            } else {
                // Mudar para modo demo
                currentUser.profile = 'demo';
                currentUser.id = 'demo';
                currentUser.email = 'demo@e2eshop.com';
                
                localStorage.setItem('e2e_current_user', JSON.stringify(currentUser));
                
                if (demoModeText) {
                    demoModeText.textContent = 'Modo Demo';
                }
                
                console.log('🏢 Modo demo ativado - dados realistas');
                
                // Carregar dados demo
                forceDemoData();
            }
        }
    </script>
    <script src="assets/js/mobile-ui.js"></script>
</body>
</html>
</html>
</html>